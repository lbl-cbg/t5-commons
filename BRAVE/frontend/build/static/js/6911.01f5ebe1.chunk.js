"use strict";(self.webpackChunkfrontend=self.webpackChunkfrontend||[]).push([[6911],{6911:(e,t,a)=>{a.r(t),a.d(t,{default:()=>f});var r=a(73583),n=a(29432),s=a(48591),c=a(50472),i=a(10718),o=a(91855),u=a(30539),d=a(43879),h=a(98518);class f extends s.BaseFeatureDataAdapter{async configurePre(e){const t=this.pluginManager,a=new r.C({filehandle:(0,c.openLocation)(this.getConf("bigBedLocation"),t)}),s=await a.getHeader(e);return{bigbed:a,header:s,parser:new n.A({autoSql:s.autoSql})}}async configure(e){return this.cached||(this.cached=this.configurePre(e).catch((e=>{throw this.cached=void 0,e}))),this.cached}async getRefNames(e){const{header:t}=await this.configure(e);return Object.keys(t.refsByName)}async getHeader(e){const{parser:t,header:a}=await this.configure(e),{version:r,fileType:n}=a,{fields:s,...c}=t.autoSql;return{version:r,fileType:n,autoSql:{...c},fields:Object.fromEntries(s.map((e=>{let{name:t,comment:a}=e;return[t,a]})))}}getFeatures(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const{refName:a,start:r,end:n}=e,{signal:s}=t;return(0,i.ObservableCreate)((async e=>{try{const{parser:c,bigbed:i}=await this.configure(t);(await i.getFeatureStream(a,r,n,{signal:s,basesPerSpan:n-r})).pipe((0,u.U)(),(0,d.T)((e=>{const t=c.parseLine("".concat(a,"\t").concat(e.start,"\t").concat(e.end,"\t").concat(e.rest),{uniqueId:e.uniqueId}),{blockCount:r,blockSizes:n,blockStarts:s,chromStarts:i}=t;if(r){const a=i||s||[],c=n,o=e.start;t.subfeatures=[];for(let n=0;n<r;n+=1){const r=(a[n]||0)+o,s=r+(c[n]||0);t.subfeatures.push({uniqueId:"".concat(e.uniqueId,"-").concat(n),start:r,end:s,type:"block"})}}if(void 0===e.uniqueId)throw new Error("invalid bbi feature");const{chromStart:u,chromEnd:d,chrom:f,...l}=t,g=new o.default({id:"".concat(this.id,"-").concat(e.uniqueId),data:{...l,start:e.start,end:e.end,refName:a}});return function(e){return e.get("thickStart")&&e.get("blockCount")&&0!==e.get("strand")}(g)?(0,h.B)(g):g}))).subscribe(e)}catch(c){e.error(c)}}),t.signal)}freeResources(){}}}}]);
//# sourceMappingURL=6911.01f5ebe1.chunk.js.map