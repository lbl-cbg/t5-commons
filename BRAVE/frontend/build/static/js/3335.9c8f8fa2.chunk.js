"use strict";(self.webpackChunkfrontend=self.webpackChunkfrontend||[]).push([[3335],{43335:(e,t,a)=>{a.d(t,{convertTrackConfig:()=>i});a(50472);var r=a(91775),o=a(19871);function i(e,t,a){var i;const n={trackId:(0,r.objectHash)(e),name:e.key||e.label},c=e.metadata&&(e.metadata.description||e.metadata.Description);c&&(n.description=c);const p=e.category||(null===(i=e.metadata)||void 0===i?void 0:i.category);n.category=p?p.split(/\s*\/\s*/):[];const{storeClass:l}=e;if(!e.urlTemplate){if(!l||!l.endsWith("FromConfig")){const t=e.key||e.label;return console.warn('Could not import JBrowse1 track "'.concat(t,'" because it does not have a "urlTemplate" or is not a "FromConfig" track')),(0,o.generateUnsupportedTrackConf)(n.name,t,n.category)}return function(e,t){const a=e.features||[],r=a.map((e=>{const t=JSON.parse(JSON.stringify(e));return t.refName=e.seq_id,t.uniqueId="".concat(e.seq_id,":").concat(e.start,"-").concat(e.end,":").concat(e.name||""),t}));return t.adapter={type:"FromConfigAdapter",features:r},t.type="FeatureTrack",t}(e,n)}const u=e=>new URL(e,"".concat(t,"/")).href.replaceAll(/%7B/gi,"{").replaceAll(/%7D/gi,"}"),d=u(e.urlTemplate);if(l){if("JBrowse/Store/SeqFeature/BAM"===l){const t={type:"BamAdapter",bamLocation:{uri:d,locationType:"UriLocation"}};return e.baiUrlTemplate?t.index={location:{uri:u(e.baiUrlTemplate),locationType:"UriLocation"}}:e.csiUrlTemplate?t.index={location:{uri:u(e.csiUrlTemplate),locationType:"UriLocation"},indexType:"CSI"}:t.index={location:{uri:"".concat(d,".bai"),locationType:"UriLocation"}},{...n,type:"AlignmentsTrack",adapter:t}}if("JBrowse/Store/SeqFeature/CRAM"===l){const t={type:"CramAdapter",cramLocation:{uri:d,locationType:"UriLocation"},sequenceAdapter:a};return t.craiLocation=e.craiUrlTemplate?{uri:u(e.craiUrlTemplate),locationType:"UriLocation"}:{uri:"".concat(d,".crai"),locationType:"UriLocation"},{...n,type:"AlignmentsTrack",adapter:t}}if("JBrowse/Store/SeqFeature/NCList"===l)return{...n,type:"FeatureTrack",adapter:{type:"NCListAdapter",rootUrlTemplate:{uri:d,locationType:"UriLocation"}}};if("JBrowse/Store/SeqFeature/BigWig"===l||"JBrowse/Store/BigWig"===l)return e.type&&e.type.endsWith("XYPlot")?n.defaultRendering="xyplot":e.type&&e.type.endsWith("Density")&&(n.defaultRendering="density"),{...n,type:"QuantitativeTrack",adapter:{type:"BigWigAdapter",bigWigLocation:{uri:d,locationType:"UriLocation"}}};if("JBrowse/Store/SeqFeature/VCFTabix"===l){const t={type:"VcfTabixAdapter",vcfGzLocation:{uri:d,locationType:"UriLocation"}};return e.tbiUrlTemplate?t.index={location:{uri:u(e.tbiUrlTemplate),locationType:"UriLocation"}}:e.csiUrlTemplate?t.index={location:{uri:u(e.csiUrlTemplate),locationType:"UriLocation"},indexType:"CSI"}:t.index={location:{uri:"".concat(d,".tbi"),locationType:"UriLocation"}},{...n,type:"VariantTrack",adapter:t}}if("JBrowse/Store/SeqFeature/VCFTribble"===l)return(0,o.generateUnsupportedTrackConf)(n.name,"VCFTribble (".concat(d,")"),n.category);if("JBrowse/Store/SeqFeature/GFF3"===l)return{...n,type:"FeatureTrack",adapter:{type:"Gff3Adapter",gffLocation:{uri:d,locationType:"UriLocation"}}};if("JBrowse/Store/SeqFeature/BigBed"===l)return{...n,type:"FeatureTrack",adapter:{type:"BigBedAdapter",bigBedLocation:{uri:d,locationType:"UriLocation"}}};if("JBrowse/Store/SeqFeature/GFF3Tabix"===l){const t={type:"Gff3TabixAdapter",gffGzLocation:{uri:d,locationType:"UriLocation"}};return e.tbiUrlTemplate?t.index={location:{uri:u(e.tbiUrlTemplate),locationType:"UriLocation"}}:e.csiUrlTemplate?t.index={location:{uri:u(e.csiUrlTemplate),locationType:"UriLocation"},indexType:"CSI"}:t.index={location:{uri:"".concat(d,".tbi"),locationType:"UriLocation"}},{...n,type:"FeatureTrack",adapter:t}}if("JBrowse/Store/SeqFeature/BED"===l)return(0,o.generateUnsupportedTrackConf)(n.name,"BED (".concat(d,")"),n.category);if("JBrowse/Store/SeqFeature/BEDTabix"===l){const t={type:"BedTabixAdapter",bedGzLocation:{uri:d,locationType:"UriLocation"}};return e.tbiUrlTemplate?t.index={location:{uri:u(e.tbiUrlTemplate),locationType:"UriLocation"}}:e.csiUrlTemplate?t.index={location:{uri:u(e.csiUrlTemplate),locationType:"UriLocation"},indexType:"CSI"}:t.index={location:{uri:"".concat(d,".tbi"),locationType:"UriLocation"}},{...n,type:"FeatureTrack",adapter:t}}if("JBrowse/Store/SeqFeature/GTF"===l)return{...n,type:"FeatureTrack",adapter:{type:"GtfAdapter",gtfLocation:{uri:d,locationType:"UriLocation"}}};if("JBrowse/Store/SeqFeature/StaticChunked"===l||"JBrowse/Store/Sequence/StaticChunked"===l)return(0,o.generateUnsupportedTrackConf)(n.name,"StaticChunked (".concat(d,")"),n.category);if("JBrowse/Store/SeqFeature/UnindexedFasta"===l)return(0,o.generateUnsupportedTrackConf)(n.name,"UnindexedFasta (".concat(d,")"),n.category);if("JBrowse/Store/SeqFeature/IndexedFasta"===l){const t={type:"IndexedFastaAdapter",fastaLocation:{uri:d,locationType:"UriLocation"}};return t.faiLocation=e.faiUrlTemplate?{uri:u(e.faiUrlTemplate),locationType:"UriLocation"}:{uri:"".concat(d,".fai"),locationType:"UriLocation"},{...n,type:"SequenceTrack",adapter:t}}if("JBrowse/Store/SeqFeature/BgzipIndexedFasta"===l){const t={type:"BgzipFastaAdapter",fastaLocation:{uri:d,locationType:"UriLocation"}};return t.faiLocation=e.faiUrlTemplate?{uri:u(e.faiUrlTemplate),locationType:"UriLocation"}:{uri:"".concat(d,".fai"),locationType:"UriLocation"},t.gziLocation=e.gziUrlTemplate?{uri:u(e.gziUrlTemplate),locationType:"UriLocation"}:{uri:"".concat(d,".gzi"),locationType:"UriLocation"},{...n,type:"ReferenceSequenceTrack",adapter:t}}if("JBrowse/Store/SeqFeature/TwoBit"===l)return{...n,type:"ReferenceSequenceTrack",adapter:{type:"TwoBitAdapter",twoBitLocation:{uri:d,locationType:"UriLocation"}}}}if(n.adapter=(0,o.guessAdapter)({uri:d,locationType:"UriLocation"},void 0,d),!n.adapter)throw new Error("Could not determine adapter");return n.adapter.type===o.UNSUPPORTED?(0,o.generateUnsupportedTrackConf)(n.name,d,n.category):n.adapter.type===o.UNKNOWN?(0,o.generateUnknownTrackConf)(n.name,d,n.category):(n.type=(0,o.guessTrackType)(n.adapter.type),"QuantitativeTrack"===n.type&&(e.type&&e.type.endsWith("XYPlot")?n.defaultRendering="xyplot":e.type&&e.type.endsWith("Density")&&(n.defaultRendering="density")),n)}}}]);
//# sourceMappingURL=3335.9c8f8fa2.chunk.js.map