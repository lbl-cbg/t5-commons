{"version":3,"file":"static/js/9565.3d72bbfe.chunk.js","mappings":"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","sources":["../node_modules/@jbrowse/plugin-wiggle/esm/MultiLinearWiggleDisplay/components/RectBg.js","../node_modules/@jbrowse/plugin-wiggle/esm/MultiLinearWiggleDisplay/components/ColorLegend.js","../node_modules/@jbrowse/plugin-wiggle/esm/MultiLinearWiggleDisplay/components/ScoreLegend.js","../node_modules/@jbrowse/plugin-wiggle/esm/MultiLinearWiggleDisplay/components/YScaleBars.js","../node_modules/@jbrowse/plugin-wiggle/esm/MultiLinearWiggleDisplay/components/util.js","../node_modules/@jbrowse/plugin-wiggle/esm/MultiLinearWiggleDisplay/models/renderSvg.js"],"sourcesContent":["import React from 'react';\nconst RectBg = (props) => {\n    const { color = 'rgb(255,255,255,0.8)' } = props;\n    return React.createElement(\"rect\", { ...props, fill: color });\n};\nexport default RectBg;\n","import React from 'react';\nimport { observer } from 'mobx-react';\nimport RectBg from './RectBg';\nconst ColorLegend = observer(function ({ model, rowHeight, labelWidth, exportSVG, }) {\n    const { needsCustomLegend, needsScalebar, needsFullHeightScalebar, rowHeightTooSmallForScalebar, renderColorBoxes, sources, } = model;\n    const svgFontSize = Math.min(rowHeight, 12);\n    const canDisplayLabel = rowHeight > 11;\n    const colorBoxWidth = renderColorBoxes ? 15 : 0;\n    const legendWidth = labelWidth + colorBoxWidth + 5;\n    const svgOffset = exportSVG ? 10 : 0;\n    const extraOffset = svgOffset || (needsScalebar && !rowHeightTooSmallForScalebar ? 50 : 0);\n    return sources ? (React.createElement(React.Fragment, null,\n        /* 0.25 for hanging letters like g */\n        needsFullHeightScalebar ? (React.createElement(RectBg, { y: 0, x: extraOffset, width: legendWidth, height: (sources.length + 0.25) * rowHeight })) : null,\n        sources.map((source, idx) => {\n            const boxHeight = Math.min(20, rowHeight);\n            return (React.createElement(React.Fragment, { key: `${source.name}-${idx}` },\n                needsFullHeightScalebar ? null : (React.createElement(RectBg, { y: idx * rowHeight + 1, x: extraOffset, width: legendWidth, height: boxHeight })),\n                source.color ? (React.createElement(RectBg, { y: idx * rowHeight + 1, x: extraOffset, width: colorBoxWidth, height: needsCustomLegend ? rowHeight : boxHeight, color: source.color })) : null,\n                canDisplayLabel ? (React.createElement(\"text\", { y: idx * rowHeight + 13, x: extraOffset + colorBoxWidth + 2, fontSize: svgFontSize }, source.name)) : null));\n        }))) : null;\n});\nexport default ColorLegend;\n","import React from 'react';\nimport { measureText, getContainingView } from '@jbrowse/core/util';\nimport { observer } from 'mobx-react';\nimport RectBg from './RectBg';\nconst ScoreLegend = observer(({ model }) => {\n    const { ticks, scaleType } = model;\n    const { width } = getContainingView(model);\n    const legend = `[${ticks === null || ticks === void 0 ? void 0 : ticks.values[0]}-${ticks === null || ticks === void 0 ? void 0 : ticks.values[1]}]` +\n        (scaleType === 'log' ? ' (log scale)' : '');\n    const len = measureText(legend, 14);\n    const padding = 25;\n    const xpos = width - len - padding;\n    return (React.createElement(React.Fragment, null,\n        React.createElement(RectBg, { y: 0, x: xpos, width: len + 6, height: 16 }),\n        React.createElement(\"text\", { y: 13, x: xpos }, legend)));\n});\nexport default ScoreLegend;\n","import React from 'react';\nimport { measureText, getContainingView } from '@jbrowse/core/util';\nimport { observer } from 'mobx-react';\nimport YScaleBar from '../../shared/YScaleBar';\nimport ColorLegend from './ColorLegend';\nimport ScoreLegend from './ScoreLegend';\nimport { getOffset } from './util';\nconst Wrapper = observer(function ({ children, model, exportSVG, }) {\n    if (exportSVG) {\n        return React.createElement(React.Fragment, null, children);\n    }\n    else {\n        const { height } = model;\n        return (React.createElement(\"svg\", { style: {\n                position: 'absolute',\n                top: 0,\n                left: 0,\n                pointerEvents: 'none',\n                height,\n                width: getContainingView(model).width,\n            } }, children));\n    }\n});\nexport const YScaleBars = observer(function (props) {\n    const { model, orientation, exportSVG } = props;\n    const { stats, needsCustomLegend, needsFullHeightScalebar, rowHeightTooSmallForScalebar, rowHeight, sources, ticks, } = model;\n    const svgFontSize = Math.min(rowHeight, 12);\n    const canDisplayLabel = rowHeight > 11;\n    const { width: viewWidth } = getContainingView(model);\n    const minWidth = 20;\n    const ready = stats && sources;\n    if (!ready) {\n        return null;\n    }\n    const labelWidth = Math.max(...(sources\n        .map(s => measureText(s.name, svgFontSize))\n        .map(width => (canDisplayLabel ? width : minWidth)) || [0]));\n    return (React.createElement(Wrapper, { ...props }, needsFullHeightScalebar ? (React.createElement(React.Fragment, null,\n        React.createElement(\"g\", { transform: `translate(${!exportSVG ? getOffset(model) : 0},0)` },\n            React.createElement(YScaleBar, { model: model, orientation: orientation })),\n        React.createElement(\"g\", { transform: `translate(${viewWidth - labelWidth - 100},0)` },\n            React.createElement(ColorLegend, { exportSVG: exportSVG, model: model, rowHeight: 12, labelWidth: labelWidth })))) : (React.createElement(React.Fragment, null,\n        React.createElement(ColorLegend, { exportSVG: exportSVG, model: model, rowHeight: model.rowHeight, labelWidth: labelWidth }),\n        rowHeightTooSmallForScalebar || needsCustomLegend ? (React.createElement(ScoreLegend, { ...props })) : (sources.map((_source, idx) => (React.createElement(\"g\", { transform: `translate(0 ${rowHeight * idx})`, key: `${JSON.stringify(ticks)}-${idx}` },\n            React.createElement(YScaleBar, { model: model, orientation: orientation })))))))));\n});\nexport default YScaleBars;\n","import { getContainingTrack, getContainingView, measureText, } from '@jbrowse/core/util';\nimport { getConf } from '@jbrowse/core/configuration';\nexport function moveUp(arr, sel, by = 1) {\n    const idxs = sel\n        .map(l => arr.findIndex(v => v.name === l))\n        .sort((a, b) => a - b);\n    let lastIdx = 0;\n    for (const old of idxs) {\n        const idx = Math.max(lastIdx, old - by);\n        if (idx >= lastIdx) {\n            arr.splice(idx, 0, arr.splice(old, 1)[0]);\n        }\n        lastIdx = lastIdx + 1;\n    }\n    return arr;\n}\nexport function moveDown(arr, sel, by = 1) {\n    const idxs = sel\n        .map(l => arr.findIndex(v => v.name === l))\n        .sort((a, b) => b - a);\n    let lastIdx = arr.length - 1;\n    for (const old of idxs) {\n        const idx = Math.min(lastIdx, old + by);\n        if (idx <= lastIdx) {\n            arr.splice(idx, 0, arr.splice(old, 1)[0]);\n        }\n        lastIdx = lastIdx - 1;\n    }\n    return arr;\n}\nconst trackLabelFontSize = 12.8;\nexport function getOffset(model) {\n    const { prefersOffset } = model;\n    const { trackLabels } = getContainingView(model);\n    const track = getContainingTrack(model);\n    const trackName = getConf(track, 'name');\n    return trackLabels === 'overlapping' && !prefersOffset\n        ? measureText(trackName, trackLabelFontSize) + 100\n        : 10;\n}\n","import React from 'react';\nimport { getContainingView } from '@jbrowse/core/util';\nimport { when } from 'mobx';\nimport YScaleBars from '../components/YScaleBars';\nexport async function renderSvg(self, opts, superRenderSvg) {\n    await when(() => !!self.stats && !!self.regionCannotBeRenderedText);\n    const { offsetPx } = getContainingView(self);\n    return (React.createElement(React.Fragment, null,\n        React.createElement(\"g\", { id: \"snpcov\" }, await superRenderSvg(opts)),\n        React.createElement(\"g\", { transform: `translate(${Math.max(-offsetPx, 0)})` },\n            React.createElement(YScaleBars, { model: self, orientation: \"left\", exportSVG: true }))));\n}\n"],"names":["props","color","React","fill","observer","_ref","model","rowHeight","labelWidth","exportSVG","needsCustomLegend","needsScalebar","needsFullHeightScalebar","rowHeightTooSmallForScalebar","renderColorBoxes","sources","svgFontSize","Math","min","canDisplayLabel","colorBoxWidth","legendWidth","extraOffset","RectBg","y","x","width","height","length","map","source","idx","boxHeight","key","concat","name","fontSize","ticks","scaleType","getContainingView","legend","values","len","measureText","xpos","Wrapper","children","style","position","top","left","pointerEvents","orientation","stats","viewWidth","max","s","transform","getOffset","YScaleBar","ColorLegend","ScoreLegend","_source","JSON","stringify","moveUp","arr","sel","by","arguments","undefined","idxs","l","findIndex","v","sort","a","b","lastIdx","old","splice","moveDown","trackLabelFontSize","prefersOffset","trackLabels","track","getContainingTrack","trackName","getConf","async","renderSvg","self","opts","superRenderSvg","when","regionCannotBeRenderedText","offsetPx","id","YScaleBars"],"sourceRoot":""}