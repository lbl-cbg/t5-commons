"use strict";(self.webpackChunkfrontend=self.webpackChunkfrontend||[]).push([[1078],{51078:(e,t,a)=>{a.r(t),a.d(t,{default:()=>d});var r=a(48591),s=a(50472),n=a(10718),i=a(19621),c=a(43050),o=a(70059),h=a(44600);class u extends r.BaseFeatureDataAdapter{async getHeader(){const{header:e}=await this.setup();return e}async getMetadata(){const{header:e}=await this.setup();return new o.A({header:e}).getMetadata()}async setupP(){const e=this.pluginManager,t=await(0,s.openLocation)(this.getConf("vcfLocation"),e).readFile(),a=function(e){return 31===e[0]&&139===e[1]&&8===e[2]}(t)?await(0,c.unzip)(t):t;if(a.length>536870888)throw new Error("Data exceeds maximum string length (512MB)");const r=(new TextDecoder).decode(a),{header:n,lines:u}=(e=>{const t=[],a=[];return e.split(/\n|\r\n|\r/).map((e=>e.trim())).filter((e=>!!e)).forEach((e=>{e.startsWith("#")?t.push(e):e&&a.push(e)})),{header:t.join("\n"),lines:a}})(r),d={},l=new o.A({header:n});let f=0;for(const s of u){const e=new h.A({variant:l.parseLine(s),parser:l,id:"".concat(this.id,"-").concat(f++)}),t=e.get("refName");d[t]||(d[t]=new i.Ay),d[t].insert([e.get("start"),e.get("end")],e)}return{header:n,intervalTree:d}}async setup(){return this.vcfFeatures||(this.vcfFeatures=this.setupP().catch((e=>{throw this.vcfFeatures=void 0,e}))),this.vcfFeatures}async getRefNames(){const{intervalTree:e}=await this.setup();return Object.keys(e)}getFeatures(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return(0,n.ObservableCreate)((async t=>{var a;try{const{start:r,end:s,refName:n}=e,{intervalTree:i}=await this.setup();null===(a=i[n])||void 0===a||a.search([r,s]).forEach((e=>{t.next(e)})),t.complete()}catch(r){t.error(r)}}),t.signal)}freeResources(){}}u.capabilities=["getFeatures","getRefNames"];const d=u}}]);
//# sourceMappingURL=1078.b8fafabd.chunk.js.map