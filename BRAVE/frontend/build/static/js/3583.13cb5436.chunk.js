"use strict";(self.webpackChunkfrontend=self.webpackChunkfrontend||[]).push([[3583],{73583:(e,t,n)=>{n.d(t,{C:()=>Wn,j:()=>Mn});const i=BigInt(32);"getBigInt64"in DataView||(DataView.prototype.getBigInt64=function(e,t){return function(e,t,n){const s=Number(!!n),a=Number(!n);return BigInt(e.getInt32(t,n)*a+e.getInt32(t+4,n)*s)<<i|BigInt(e.getUint32(t,n)*s+e.getUint32(t+4,n)*a)}(this,e,t)}),"getBigUint64"in DataView||(DataView.prototype.getBigUint64=function(e,t){return function(e,t,n){const s=e.getUint32(t,n),a=e.getUint32(t+4,n),r=Number(!!n),o=Number(!n);return BigInt(s*o+a*r)<<i|BigInt(s*r+a*o)}(this,e,t)}),"setBigInt64"in DataView||(DataView.prototype.setBigInt64=function(e,t,n){!function(e,t,n,s){const a=Number(n>>i),r=Number(n&BigInt(4294967295));s?(e.setInt32(t+4,a,s),e.setUint32(t,r,s)):(e.setInt32(t,a,s),e.setUint32(t+4,r,s))}(this,e,t,n)}),"setBigUint64"in DataView||(DataView.prototype.setBigUint64=function(e,t,n){!function(e,t,n,s){const a=Number(n>>i),r=Number(n&BigInt(4294967295));s?(e.setUint32(t+4,a,s),e.setUint32(t,r,s)):(e.setUint32(t,a,s),e.setUint32(t+4,r,s))}(this,e,t,n)});var s=n(26382);class a{constructor(e,t){this.code="",this.scopes=[["vars"]],this.bitFields=[],this.tmpVariableCount=0,this.references=new Map,this.imports=[],this.reverseImports=new Map,this.useContextVariables=!1,this.importPath=e,this.useContextVariables=t}generateVariable(e){const t=[...this.scopes[this.scopes.length-1]];return e&&t.push(e),t.join(".")}generateOption(e){switch(typeof e){case"number":return e.toString();case"string":return this.generateVariable(e);case"function":return"".concat(this.addImport(e),".call(").concat(this.generateVariable(),", vars)")}}generateError(e){this.pushCode("throw new Error(".concat(e,");"))}generateTmpVariable(){return"$tmp"+this.tmpVariableCount++}pushCode(e){this.code+=e+"\n"}pushPath(e){e&&this.scopes[this.scopes.length-1].push(e)}popPath(e){e&&this.scopes[this.scopes.length-1].pop()}pushScope(e){this.scopes.push([e])}popScope(){this.scopes.pop()}addImport(e){if(!this.importPath)return"(".concat(e,")");let t=this.reverseImports.get(e);return t||(t=this.imports.push(e)-1,this.reverseImports.set(e,t)),"".concat(this.importPath,"[").concat(t,"]")}addReference(e){this.references.has(e)||this.references.set(e,{resolved:!1,requested:!1})}markResolved(e){const t=this.references.get(e);t&&(t.resolved=!0)}markRequested(e){e.forEach((e=>{const t=this.references.get(e);t&&(t.requested=!0)}))}getUnresolvedReferences(){return Array.from(this.references).filter((e=>{let[t,n]=e;return!n.resolved&&!n.requested})).map((e=>{let[t,n]=e;return t}))}}const r=new Map,o="___parser_",h={uint8:1,uint16le:2,uint16be:2,uint32le:4,uint32be:4,int8:1,int16le:2,int16be:2,int32le:4,int32be:4,int64be:8,int64le:8,uint64be:8,uint64le:8,floatle:4,floatbe:4,doublele:8,doublebe:8},l={uint8:"Uint8",uint16le:"Uint16",uint16be:"Uint16",uint32le:"Uint32",uint32be:"Uint32",int8:"Int8",int16le:"Int16",int16be:"Int16",int32le:"Int32",int32be:"Int32",int64be:"BigInt64",int64le:"BigInt64",uint64be:"BigUint64",uint64le:"BigUint64",floatle:"Float32",floatbe:"Float32",doublele:"Float64",doublebe:"Float64"},c={uint8:!1,uint16le:!0,uint16be:!1,uint32le:!0,uint32be:!1,int8:!1,int16le:!0,int16be:!1,int32le:!0,int32be:!1,int64be:!1,int64le:!0,uint64be:!1,uint64le:!0,floatle:!0,floatbe:!1,doublele:!0,doublebe:!1};class d{constructor(){this.varName="",this.type="",this.options={},this.endian="be",this.useContextVariables=!1}static start(){return new d}primitiveGenerateN(e,t){const n=l[e],i=c[e];t.pushCode("".concat(t.generateVariable(this.varName)," = dataView.get").concat(n,"(offset, ").concat(i,");")),t.pushCode("offset += ".concat(h[e],";"))}primitiveN(e,t,n){return this.setNextParser(e,t,n)}useThisEndian(e){return e+this.endian.toLowerCase()}uint8(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return this.primitiveN("uint8",e,t)}uint16(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return this.primitiveN(this.useThisEndian("uint16"),e,t)}uint16le(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return this.primitiveN("uint16le",e,t)}uint16be(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return this.primitiveN("uint16be",e,t)}uint32(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return this.primitiveN(this.useThisEndian("uint32"),e,t)}uint32le(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return this.primitiveN("uint32le",e,t)}uint32be(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return this.primitiveN("uint32be",e,t)}int8(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return this.primitiveN("int8",e,t)}int16(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return this.primitiveN(this.useThisEndian("int16"),e,t)}int16le(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return this.primitiveN("int16le",e,t)}int16be(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return this.primitiveN("int16be",e,t)}int32(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return this.primitiveN(this.useThisEndian("int32"),e,t)}int32le(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return this.primitiveN("int32le",e,t)}int32be(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return this.primitiveN("int32be",e,t)}bigIntVersionCheck(){if(!DataView.prototype.getBigInt64)throw new Error("BigInt64 is unsupported on this runtime")}int64(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return this.bigIntVersionCheck(),this.primitiveN(this.useThisEndian("int64"),e,t)}int64be(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return this.bigIntVersionCheck(),this.primitiveN("int64be",e,t)}int64le(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return this.bigIntVersionCheck(),this.primitiveN("int64le",e,t)}uint64(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return this.bigIntVersionCheck(),this.primitiveN(this.useThisEndian("uint64"),e,t)}uint64be(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return this.bigIntVersionCheck(),this.primitiveN("uint64be",e,t)}uint64le(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return this.bigIntVersionCheck(),this.primitiveN("uint64le",e,t)}floatle(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return this.primitiveN("floatle",e,t)}floatbe(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return this.primitiveN("floatbe",e,t)}doublele(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return this.primitiveN("doublele",e,t)}doublebe(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return this.primitiveN("doublebe",e,t)}bitN(e,t,n){return n.length=e,this.setNextParser("bit",t,n)}bit1(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return this.bitN(1,e,t)}bit2(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return this.bitN(2,e,t)}bit3(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return this.bitN(3,e,t)}bit4(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return this.bitN(4,e,t)}bit5(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return this.bitN(5,e,t)}bit6(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return this.bitN(6,e,t)}bit7(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return this.bitN(7,e,t)}bit8(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return this.bitN(8,e,t)}bit9(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return this.bitN(9,e,t)}bit10(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return this.bitN(10,e,t)}bit11(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return this.bitN(11,e,t)}bit12(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return this.bitN(12,e,t)}bit13(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return this.bitN(13,e,t)}bit14(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return this.bitN(14,e,t)}bit15(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return this.bitN(15,e,t)}bit16(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return this.bitN(16,e,t)}bit17(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return this.bitN(17,e,t)}bit18(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return this.bitN(18,e,t)}bit19(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return this.bitN(19,e,t)}bit20(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return this.bitN(20,e,t)}bit21(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return this.bitN(21,e,t)}bit22(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return this.bitN(22,e,t)}bit23(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return this.bitN(23,e,t)}bit24(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return this.bitN(24,e,t)}bit25(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return this.bitN(25,e,t)}bit26(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return this.bitN(26,e,t)}bit27(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return this.bitN(27,e,t)}bit28(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return this.bitN(28,e,t)}bit29(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return this.bitN(29,e,t)}bit30(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return this.bitN(30,e,t)}bit31(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return this.bitN(31,e,t)}bit32(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return this.bitN(32,e,t)}namely(e){return r.set(e,this),this.alias=e,this}skip(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return this.seek(e,t)}seek(e){if((arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}).assert)throw new Error("assert option on seek is not allowed.");return this.setNextParser("seek","",{length:e})}string(e,t){if(!t.zeroTerminated&&!t.length&&!t.greedy)throw new Error("One of length, zeroTerminated, or greedy must be defined for string.");if((t.zeroTerminated||t.length)&&t.greedy)throw new Error("greedy is mutually exclusive with length and zeroTerminated for string.");if(t.stripNull&&!t.length&&!t.greedy)throw new Error("length or greedy must be defined if stripNull is enabled.");return t.encoding=t.encoding||"utf8",this.setNextParser("string",e,t)}buffer(e,t){if(!t.length&&!t.readUntil)throw new Error("length or readUntil must be defined for buffer.");return this.setNextParser("buffer",e,t)}wrapped(e,t){if("object"!==typeof t&&"object"===typeof e&&(t=e,e=""),!t||!t.wrapper||!t.type)throw new Error("Both wrapper and type must be defined for wrapped.");if(!t.length&&!t.readUntil)throw new Error("length or readUntil must be defined for wrapped.");return this.setNextParser("wrapper",e,t)}array(e,t){if(!t.readUntil&&!t.length&&!t.lengthInBytes)throw new Error("One of readUntil, length and lengthInBytes must be defined for array.");if(!t.type)throw new Error("type is required for array.");if("string"===typeof t.type&&!r.has(t.type)&&!(t.type in h))throw new Error('Array element type "'.concat(t.type,'" is unkown.'));return this.setNextParser("array",e,t)}choice(e,t){if("object"!==typeof t&&"object"===typeof e&&(t=e,e=""),!t)throw new Error("tag and choices are are required for choice.");if(!t.tag)throw new Error("tag is requird for choice.");if(!t.choices)throw new Error("choices is required for choice.");for(const n in t.choices){const e=parseInt(n,10),i=t.choices[e];if(isNaN(e))throw new Error('Choice key "'.concat(n,'" is not a number.'));if("string"===typeof i&&!r.has(i)&&!(i in h))throw new Error('Choice type "'.concat(i,'" is unkown.'))}return this.setNextParser("choice",e,t)}nest(e,t){if("object"!==typeof t&&"object"===typeof e&&(t=e,e=""),!t||!t.type)throw new Error("type is required for nest.");if(!(t.type instanceof d)&&!r.has(t.type))throw new Error("type must be a known parser name or a Parser object.");if(!(t.type instanceof d)&&!e)throw new Error("type must be a Parser object if the variable name is omitted.");return this.setNextParser("nest",e,t)}pointer(e,t){if(!t.offset)throw new Error("offset is required for pointer.");if(!t.type)throw new Error("type is required for pointer.");if("string"===typeof t.type&&!(t.type in h)&&!r.has(t.type))throw new Error('Pointer type "'.concat(t.type,'" is unkown.'));return this.setNextParser("pointer",e,t)}saveOffset(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return this.setNextParser("saveOffset",e,t)}endianness(e){switch(e.toLowerCase()){case"little":this.endian="le";break;case"big":this.endian="be";break;default:throw new Error('endianness must be one of "little" or "big"')}return this}endianess(e){return this.endianness(e)}useContextVars(){let e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];return this.useContextVariables=e,this}create(e){if(!(e instanceof Function))throw new Error("Constructor must be a Function object.");return this.constructorFn=e,this}getContext(e){const t=new a(e,this.useContextVariables);return t.pushCode("var dataView = new DataView(buffer.buffer, buffer.byteOffset, buffer.length);"),this.alias?(this.addAliasedCode(t),t.pushCode("return ".concat(o+this.alias,"(0).result;"))):this.addRawCode(t),t}getCode(){return this.getContext("imports").code}addRawCode(e){e.pushCode("var offset = 0;"),e.pushCode("var vars = ".concat(this.constructorFn?"new constructorFn()":"{}",";")),e.pushCode("vars.$parent = null;"),e.pushCode("vars.$root = vars;"),this.generate(e),this.resolveReferences(e),e.pushCode("delete vars.$parent;"),e.pushCode("delete vars.$root;"),e.pushCode("return vars;")}addAliasedCode(e){return e.pushCode("function ".concat(o+this.alias,"(offset, context) {")),e.pushCode("var vars = ".concat(this.constructorFn?"new constructorFn()":"{}",";")),e.pushCode("var ctx = Object.assign({$parent: null, $root: vars}, context || {});"),e.pushCode("vars = Object.assign(vars, ctx);"),this.generate(e),e.markResolved(this.alias),this.resolveReferences(e),e.pushCode("Object.keys(ctx).forEach(function (item) { delete vars[item]; });"),e.pushCode("return { offset: offset, result: vars };"),e.pushCode("}"),e}resolveReferences(e){const t=e.getUnresolvedReferences();e.markRequested(t),t.forEach((t=>{var n;null===(n=r.get(t))||void 0===n||n.addAliasedCode(e)}))}compile(){const e="imports",t=this.getContext(e);this.compiled=new Function(e,"TextDecoder","return function (buffer, constructorFn) { ".concat(t.code," };"))(t.imports,TextDecoder)}sizeOf(){let e=NaN;if(Object.keys(h).indexOf(this.type)>=0)e=h[this.type];else if("string"===this.type&&"number"===typeof this.options.length)e=this.options.length;else if("buffer"===this.type&&"number"===typeof this.options.length)e=this.options.length;else if("array"===this.type&&"number"===typeof this.options.length){let t=NaN;"string"===typeof this.options.type?t=h[this.options.type]:this.options.type instanceof d&&(t=this.options.type.sizeOf()),e=this.options.length*t}else"seek"===this.type?e=this.options.length:"nest"===this.type?e=this.options.type.sizeOf():this.type||(e=0);return this.next&&(e+=this.next.sizeOf()),e}parse(e){return this.compiled||this.compile(),this.compiled(e,this.constructorFn)}setNextParser(e,t,n){const i=new d;return i.type=e,i.varName=t,i.options=n,i.endian=this.endian,this.head?this.head.next=i:this.next=i,this.head=i,this}generate(e){if(this.type){switch(this.type){case"uint8":case"uint16le":case"uint16be":case"uint32le":case"uint32be":case"int8":case"int16le":case"int16be":case"int32le":case"int32be":case"int64be":case"int64le":case"uint64be":case"uint64le":case"floatle":case"floatbe":case"doublele":case"doublebe":this.primitiveGenerateN(this.type,e);break;case"bit":this.generateBit(e);break;case"string":this.generateString(e);break;case"buffer":this.generateBuffer(e);break;case"seek":this.generateSeek(e);break;case"nest":this.generateNest(e);break;case"array":this.generateArray(e);break;case"choice":this.generateChoice(e);break;case"pointer":this.generatePointer(e);break;case"saveOffset":this.generateSaveOffset(e);break;case"wrapper":this.generateWrapper(e)}"bit"!==this.type&&this.generateAssert(e)}const t=e.generateVariable(this.varName);return this.options.formatter&&"bit"!==this.type&&this.generateFormatter(e,t,this.options.formatter),this.generateNext(e)}generateAssert(e){if(!this.options.assert)return;const t=e.generateVariable(this.varName);switch(typeof this.options.assert){case"function":{const n=e.addImport(this.options.assert);e.pushCode("if (!".concat(n,".call(vars, ").concat(t,")) {"))}break;case"number":e.pushCode("if (".concat(this.options.assert," !== ").concat(t,") {"));break;case"string":e.pushCode("if (".concat(JSON.stringify(this.options.assert)," !== ").concat(t,") {"));break;default:throw new Error("assert option must be a string, number or a function.")}e.generateError('"Assertion error: '.concat(t,' is " + ').concat(JSON.stringify(this.options.assert.toString()))),e.pushCode("}")}generateNext(e){return this.next&&(e=this.next.generate(e)),e}generateBit(e){const t=JSON.parse(JSON.stringify(this));if(t.options=this.options,t.generateAssert=this.generateAssert.bind(this),t.generateFormatter=this.generateFormatter.bind(this),t.varName=e.generateVariable(t.varName),e.bitFields.push(t),!this.next||this.next&&["bit","nest"].indexOf(this.next.type)<0){const t=e.generateTmpVariable();e.pushCode("var ".concat(t," = 0;"));const n=function(){let t=0;for(let n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;n<e.bitFields.length;n++){const i=e.bitFields[n].options.length;if(t+i>32)break;t+=i}return t},i=n=>(n<=8?(e.pushCode("".concat(t," = dataView.getUint8(offset);")),n=8):n<=16?(e.pushCode("".concat(t," = dataView.getUint16(offset);")),n=16):n<=24?(e.pushCode("".concat(t," = (dataView.getUint16(offset) << 8) | dataView.getUint8(offset + 2);")),n=24):(e.pushCode("".concat(t," = dataView.getUint32(offset);")),n=32),e.pushCode("offset += ".concat(n/8,";")),n);let s=0;const a="be"===this.endian;let r=0,o=0;e.bitFields.forEach(((h,l)=>{let c=h.options.length;if(c>o){if(o){const n=-1>>>32-o;e.pushCode("".concat(h.varName," = (").concat(t," & 0x").concat(n.toString(16),") << ").concat(c-o,";")),c-=o}s=0,o=r=i(n(l)-o)}const d=a?r-s-c:s,f=-1>>>32-c;e.pushCode("".concat(h.varName," ").concat(c<h.options.length?"|=":"="," ").concat(t," >> ").concat(d," & 0x").concat(f.toString(16),";")),32===h.options.length&&e.pushCode("".concat(h.varName," >>>= 0")),h.options.assert&&h.generateAssert(e),h.options.formatter&&h.generateFormatter(e,h.varName,h.options.formatter),s+=c,o-=c})),e.bitFields=[]}}generateSeek(e){const t=e.generateOption(this.options.length);e.pushCode("offset += ".concat(t,";"))}generateString(e){const t=e.generateVariable(this.varName),n=e.generateTmpVariable(),i=this.options.encoding,s="hex"===i.toLowerCase(),a='b => b.toString(16).padStart(2, "0")';if(this.options.length&&this.options.zeroTerminated){const r=this.options.length;e.pushCode("var ".concat(n," = offset;")),e.pushCode("while(dataView.getUint8(offset++) !== 0 && offset - ".concat(n," < ").concat(r,");"));const o="offset - ".concat(n," < ").concat(r," ? offset - 1 : offset");e.pushCode(s?"".concat(t," = Array.from(buffer.subarray(").concat(n,", ").concat(o,"), ").concat(a,").join('');"):"".concat(t," = new TextDecoder('").concat(i,"').decode(buffer.subarray(").concat(n,", ").concat(o,"));"))}else if(this.options.length){const n=e.generateOption(this.options.length);e.pushCode(s?"".concat(t," = Array.from(buffer.subarray(offset, offset + ").concat(n,"), ").concat(a,").join('');"):"".concat(t," = new TextDecoder('").concat(i,"').decode(buffer.subarray(offset, offset + ").concat(n,"));")),e.pushCode("offset += ".concat(n,";"))}else this.options.zeroTerminated?(e.pushCode("var ".concat(n," = offset;")),e.pushCode("while(dataView.getUint8(offset++) !== 0);"),e.pushCode(s?"".concat(t," = Array.from(buffer.subarray(").concat(n,", offset - 1), ").concat(a,").join('');"):"".concat(t," = new TextDecoder('").concat(i,"').decode(buffer.subarray(").concat(n,", offset - 1));"))):this.options.greedy&&(e.pushCode("var ".concat(n," = offset;")),e.pushCode("while(buffer.length > offset++);"),e.pushCode(s?"".concat(t," = Array.from(buffer.subarray(").concat(n,", offset), ").concat(a,").join('');"):"".concat(t," = new TextDecoder('").concat(i,"').decode(buffer.subarray(").concat(n,", offset));")));this.options.stripNull&&e.pushCode("".concat(t," = ").concat(t,".replace(/\\x00+$/g, '')"))}generateBuffer(e){const t=e.generateVariable(this.varName);if("function"===typeof this.options.readUntil){const n=this.options.readUntil,i=e.generateTmpVariable(),s=e.generateTmpVariable();e.pushCode("var ".concat(i," = offset;")),e.pushCode("var ".concat(s," = 0;")),e.pushCode("while (offset < buffer.length) {"),e.pushCode("".concat(s," = dataView.getUint8(offset);"));const a=e.addImport(n);e.pushCode("if (".concat(a,".call(").concat(e.generateVariable(),", ").concat(s,", buffer.subarray(offset))) break;")),e.pushCode("offset += 1;"),e.pushCode("}"),e.pushCode("".concat(t," = buffer.subarray(").concat(i,", offset);"))}else if("eof"===this.options.readUntil)e.pushCode("".concat(t," = buffer.subarray(offset);"));else{const n=e.generateOption(this.options.length);e.pushCode("".concat(t," = buffer.subarray(offset, offset + ").concat(n,");")),e.pushCode("offset += ".concat(n,";"))}this.options.clone&&e.pushCode("".concat(t," = buffer.constructor.from(").concat(t,");"))}generateArray(e){const t=e.generateOption(this.options.length),n=e.generateOption(this.options.lengthInBytes),i=this.options.type,s=e.generateTmpVariable(),a=e.generateVariable(this.varName),f=e.generateTmpVariable(),u=this.options.key,p="string"===typeof u;if(p?e.pushCode("".concat(a," = {};")):e.pushCode("".concat(a," = [];")),"function"===typeof this.options.readUntil?e.pushCode("do {"):"eof"===this.options.readUntil?e.pushCode("for (var ".concat(s," = 0; offset < buffer.length; ").concat(s,"++) {")):void 0!==n?e.pushCode("for (var ".concat(s," = offset + ").concat(n,"; offset < ").concat(s,"; ) {")):e.pushCode("for (var ".concat(s," = ").concat(t,"; ").concat(s," > 0; ").concat(s,"--) {")),"string"===typeof i)if(r.get(i)){const a=e.generateTmpVariable();if(e.pushCode("var ".concat(a," = ").concat(o+i,"(offset, {")),e.useContextVariables){const i=e.generateVariable();e.pushCode("$parent: ".concat(i,",")),e.pushCode("$root: ".concat(i,".$root,")),this.options.readUntil||void 0!==n||e.pushCode("$index: ".concat(t," - ").concat(s,","))}e.pushCode("});"),e.pushCode("var ".concat(f," = ").concat(a,".result; offset = ").concat(a,".offset;")),i!==this.alias&&e.addReference(i)}else{const t=l[i],n=c[i];e.pushCode("var ".concat(f," = dataView.get").concat(t,"(offset, ").concat(n,");")),e.pushCode("offset += ".concat(h[i],";"))}else if(i instanceof d){e.pushCode("var ".concat(f," = {};"));const a=e.generateVariable();e.pushScope(f),e.useContextVariables&&(e.pushCode("".concat(f,".$parent = ").concat(a,";")),e.pushCode("".concat(f,".$root = ").concat(a,".$root;")),this.options.readUntil||void 0!==n||e.pushCode("".concat(f,".$index = ").concat(t," - ").concat(s,";"))),i.generate(e),e.useContextVariables&&(e.pushCode("delete ".concat(f,".$parent;")),e.pushCode("delete ".concat(f,".$root;")),e.pushCode("delete ".concat(f,".$index;"))),e.popScope()}if(p?e.pushCode("".concat(a,"[").concat(f,".").concat(u,"] = ").concat(f,";")):e.pushCode("".concat(a,".push(").concat(f,");")),e.pushCode("}"),"function"===typeof this.options.readUntil){const t=this.options.readUntil,n=e.addImport(t);e.pushCode("while (!".concat(n,".call(").concat(e.generateVariable(),", ").concat(f,", buffer.subarray(offset)));"))}}generateChoiceCase(e,t,n){if("string"===typeof n){const t=e.generateVariable(this.varName);if(r.has(n)){const i=e.generateTmpVariable();e.pushCode("var ".concat(i," = ").concat(o+n,"(offset, {")),e.useContextVariables&&(e.pushCode("$parent: ".concat(t,".$parent,")),e.pushCode("$root: ".concat(t,".$root,"))),e.pushCode("});"),e.pushCode("".concat(t," = ").concat(i,".result; offset = ").concat(i,".offset;")),n!==this.alias&&e.addReference(n)}else{const i=l[n],s=c[n];e.pushCode("".concat(t," = dataView.get").concat(i,"(offset, ").concat(s,");")),e.pushCode("offset += ".concat(h[n]))}}else n instanceof d&&(e.pushPath(t),n.generate(e),e.popPath(t))}generateChoice(e){const t=e.generateOption(this.options.tag),n=e.generateVariable(this.varName);if(this.varName&&(e.pushCode("".concat(n," = {};")),e.useContextVariables)){const t=e.generateVariable();e.pushCode("".concat(n,".$parent = ").concat(t,";")),e.pushCode("".concat(n,".$root = ").concat(t,".$root;"))}e.pushCode("switch(".concat(t,") {"));for(const i in this.options.choices){const t=parseInt(i,10),n=this.options.choices[t];e.pushCode("case ".concat(t,":")),this.generateChoiceCase(e,this.varName,n),e.pushCode("break;")}e.pushCode("default:"),this.options.defaultChoice?this.generateChoiceCase(e,this.varName,this.options.defaultChoice):e.generateError('"Met undefined tag value " + '.concat(t,' + " at choice"')),e.pushCode("}"),this.varName&&e.useContextVariables&&(e.pushCode("delete ".concat(n,".$parent;")),e.pushCode("delete ".concat(n,".$root;")))}generateNest(e){const t=e.generateVariable(this.varName);if(this.options.type instanceof d){if(this.varName&&(e.pushCode("".concat(t," = {};")),e.useContextVariables)){const n=e.generateVariable();e.pushCode("".concat(t,".$parent = ").concat(n,";")),e.pushCode("".concat(t,".$root = ").concat(n,".$root;"))}e.pushPath(this.varName),this.options.type.generate(e),e.popPath(this.varName),this.varName&&e.useContextVariables&&e.useContextVariables&&(e.pushCode("delete ".concat(t,".$parent;")),e.pushCode("delete ".concat(t,".$root;")))}else if(r.has(this.options.type)){const n=e.generateTmpVariable();if(e.pushCode("var ".concat(n," = ").concat(o+this.options.type,"(offset, {")),e.useContextVariables){const t=e.generateVariable();e.pushCode("$parent: ".concat(t,",")),e.pushCode("$root: ".concat(t,".$root,"))}e.pushCode("});"),e.pushCode("".concat(t," = ").concat(n,".result; offset = ").concat(n,".offset;")),this.options.type!==this.alias&&e.addReference(this.options.type)}}generateWrapper(e){const t=e.generateVariable(this.varName),n=e.generateTmpVariable();if("function"===typeof this.options.readUntil){const t=this.options.readUntil,i=e.generateTmpVariable(),s=e.generateTmpVariable();e.pushCode("var ".concat(i," = offset;")),e.pushCode("var ".concat(s," = 0;")),e.pushCode("while (offset < buffer.length) {"),e.pushCode("".concat(s," = dataView.getUint8(offset);"));const a=e.addImport(t);e.pushCode("if (".concat(a,".call(").concat(e.generateVariable(),", ").concat(s,", buffer.subarray(offset))) break;")),e.pushCode("offset += 1;"),e.pushCode("}"),e.pushCode("".concat(n," = buffer.subarray(").concat(i,", offset);"))}else if("eof"===this.options.readUntil)e.pushCode("".concat(n," = buffer.subarray(offset);"));else{const t=e.generateOption(this.options.length);e.pushCode("".concat(n," = buffer.subarray(offset, offset + ").concat(t,");")),e.pushCode("offset += ".concat(t,";"))}this.options.clone&&e.pushCode("".concat(n," = buffer.constructor.from(").concat(n,");"));const i=e.generateTmpVariable(),s=e.generateTmpVariable(),a=e.generateTmpVariable(),h=e.addImport(this.options.wrapper);if(e.pushCode("".concat(n," = ").concat(h,".call(this, ").concat(n,").subarray(0);")),e.pushCode("var ".concat(i," = buffer;")),e.pushCode("var ".concat(s," = offset;")),e.pushCode("var ".concat(a," = dataView;")),e.pushCode("buffer = ".concat(n,";")),e.pushCode("offset = 0;"),e.pushCode("dataView = new DataView(buffer.buffer, buffer.byteOffset, buffer.length);"),this.options.type instanceof d)this.varName&&e.pushCode("".concat(t," = {};")),e.pushPath(this.varName),this.options.type.generate(e),e.popPath(this.varName);else if(r.has(this.options.type)){const n=e.generateTmpVariable();e.pushCode("var ".concat(n," = ").concat(o+this.options.type,"(0);")),e.pushCode("".concat(t," = ").concat(n,".result;")),this.options.type!==this.alias&&e.addReference(this.options.type)}e.pushCode("buffer = ".concat(i,";")),e.pushCode("dataView = ".concat(a,";")),e.pushCode("offset = ".concat(s,";"))}generateFormatter(e,t,n){if("function"===typeof n){const i=e.addImport(n);e.pushCode("".concat(t," = ").concat(i,".call(").concat(e.generateVariable(),", ").concat(t,");"))}}generatePointer(e){const t=this.options.type,n=e.generateOption(this.options.offset),i=e.generateTmpVariable(),s=e.generateVariable(this.varName);if(e.pushCode("var ".concat(i," = offset;")),e.pushCode("offset = ".concat(n,";")),this.options.type instanceof d){if(e.pushCode("".concat(s," = {};")),e.useContextVariables){const t=e.generateVariable();e.pushCode("".concat(s,".$parent = ").concat(t,";")),e.pushCode("".concat(s,".$root = ").concat(t,".$root;"))}e.pushPath(this.varName),this.options.type.generate(e),e.popPath(this.varName),e.useContextVariables&&(e.pushCode("delete ".concat(s,".$parent;")),e.pushCode("delete ".concat(s,".$root;")))}else if(r.has(this.options.type)){const t=e.generateTmpVariable();if(e.pushCode("var ".concat(t," = ").concat(o+this.options.type,"(offset, {")),e.useContextVariables){const t=e.generateVariable();e.pushCode("$parent: ".concat(t,",")),e.pushCode("$root: ".concat(t,".$root,"))}e.pushCode("});"),e.pushCode("".concat(s," = ").concat(t,".result; offset = ").concat(t,".offset;")),this.options.type!==this.alias&&e.addReference(this.options.type)}else if(Object.keys(h).indexOf(this.options.type)>=0){const n=l[t],i=c[t];e.pushCode("".concat(s," = dataView.get").concat(n,"(offset, ").concat(i,");")),e.pushCode("offset += ".concat(h[t],";"))}e.pushCode("offset = ".concat(i,";"))}generateSaveOffset(e){const t=e.generateVariable(this.varName);e.pushCode("".concat(t," = offset"))}}var f=n(91205),u=n.n(f),p=n(52631),b=n.n(p);class g{constructor(e){this.ranges=e}get min(){return this.ranges[0].min}get max(){return this.ranges[this.ranges.length-1].max}contains(e){for(const t of this.ranges)if(t.min<=e&&t.max>=e)return!0;return!1}isContiguous(){return this.ranges.length>1}getRanges(){return this.ranges.map((e=>new g([{min:e.min,max:e.max}])))}toString(){return this.ranges.map((e=>"[".concat(e.min,"-").concat(e.max,"]"))).join(",")}union(e){const t=[...this.getRanges(),...e.getRanges()].sort(((e,t)=>e.min<t.min?-1:e.min>t.min?1:e.max<t.max?-1:t.max>e.max?1:0)),n=[];let i=t[0];for(let s=1;s<t.length;s+=1){const e=t[s];e.min>i.max+1?(n.push(i),i=e):e.max>i.max&&(i=new g([{min:i.min,max:e.max}]))}return n.push(i),1===n.length?n[0]:new g(n)}}function _(e){let t=e.length;for(;--t>=0;)e[t]=0}const m=256,w=286,y=30,v=15,k=new Uint8Array([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0]),x=new Uint8Array([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13]),C=new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7]),N=new Uint8Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),z=new Array(576);_(z);const E=new Array(60);_(E);const S=new Array(512);_(S);const U=new Array(256);_(U);const O=new Array(29);_(O);const B=new Array(y);function A(e,t,n,i,s){this.static_tree=e,this.extra_bits=t,this.extra_base=n,this.elems=i,this.max_length=s,this.has_stree=e&&e.length}let T,I,V;function R(e,t){this.dyn_tree=e,this.max_code=0,this.stat_desc=t}_(B);const D=e=>e<256?S[e]:S[256+(e>>>7)],F=(e,t)=>{e.pending_buf[e.pending++]=255&t,e.pending_buf[e.pending++]=t>>>8&255},Z=(e,t,n)=>{e.bi_valid>16-n?(e.bi_buf|=t<<e.bi_valid&65535,F(e,e.bi_buf),e.bi_buf=t>>16-e.bi_valid,e.bi_valid+=n-16):(e.bi_buf|=t<<e.bi_valid&65535,e.bi_valid+=n)},P=(e,t,n)=>{Z(e,n[2*t],n[2*t+1])},L=(e,t)=>{let n=0;do{n|=1&e,e>>>=1,n<<=1}while(--t>0);return n>>>1},$=(e,t,n)=>{const i=new Array(16);let s,a,r=0;for(s=1;s<=v;s++)r=r+n[s-1]<<1,i[s]=r;for(a=0;a<=t;a++){let t=e[2*a+1];0!==t&&(e[2*a]=L(i[t]++,t))}},H=e=>{let t;for(t=0;t<w;t++)e.dyn_ltree[2*t]=0;for(t=0;t<y;t++)e.dyn_dtree[2*t]=0;for(t=0;t<19;t++)e.bl_tree[2*t]=0;e.dyn_ltree[512]=1,e.opt_len=e.static_len=0,e.sym_next=e.matches=0},M=e=>{e.bi_valid>8?F(e,e.bi_buf):e.bi_valid>0&&(e.pending_buf[e.pending++]=e.bi_buf),e.bi_buf=0,e.bi_valid=0},j=(e,t,n,i)=>{const s=2*t,a=2*n;return e[s]<e[a]||e[s]===e[a]&&i[t]<=i[n]},q=(e,t,n)=>{const i=e.heap[n];let s=n<<1;for(;s<=e.heap_len&&(s<e.heap_len&&j(t,e.heap[s+1],e.heap[s],e.depth)&&s++,!j(t,i,e.heap[s],e.depth));)e.heap[n]=e.heap[s],n=s,s<<=1;e.heap[n]=i},K=(e,t,n)=>{let i,s,a,r,o=0;if(0!==e.sym_next)do{i=255&e.pending_buf[e.sym_buf+o++],i+=(255&e.pending_buf[e.sym_buf+o++])<<8,s=e.pending_buf[e.sym_buf+o++],0===i?P(e,s,t):(a=U[s],P(e,a+m+1,t),r=k[a],0!==r&&(s-=O[a],Z(e,s,r)),i--,a=D(i),P(e,a,n),r=x[a],0!==r&&(i-=B[a],Z(e,i,r)))}while(o<e.sym_next);P(e,256,t)},W=(e,t)=>{const n=t.dyn_tree,i=t.stat_desc.static_tree,s=t.stat_desc.has_stree,a=t.stat_desc.elems;let r,o,h,l=-1;for(e.heap_len=0,e.heap_max=573,r=0;r<a;r++)0!==n[2*r]?(e.heap[++e.heap_len]=l=r,e.depth[r]=0):n[2*r+1]=0;for(;e.heap_len<2;)h=e.heap[++e.heap_len]=l<2?++l:0,n[2*h]=1,e.depth[h]=0,e.opt_len--,s&&(e.static_len-=i[2*h+1]);for(t.max_code=l,r=e.heap_len>>1;r>=1;r--)q(e,n,r);h=a;do{r=e.heap[1],e.heap[1]=e.heap[e.heap_len--],q(e,n,1),o=e.heap[1],e.heap[--e.heap_max]=r,e.heap[--e.heap_max]=o,n[2*h]=n[2*r]+n[2*o],e.depth[h]=(e.depth[r]>=e.depth[o]?e.depth[r]:e.depth[o])+1,n[2*r+1]=n[2*o+1]=h,e.heap[1]=h++,q(e,n,1)}while(e.heap_len>=2);e.heap[--e.heap_max]=e.heap[1],((e,t)=>{const n=t.dyn_tree,i=t.max_code,s=t.stat_desc.static_tree,a=t.stat_desc.has_stree,r=t.stat_desc.extra_bits,o=t.stat_desc.extra_base,h=t.stat_desc.max_length;let l,c,d,f,u,p,b=0;for(f=0;f<=v;f++)e.bl_count[f]=0;for(n[2*e.heap[e.heap_max]+1]=0,l=e.heap_max+1;l<573;l++)c=e.heap[l],f=n[2*n[2*c+1]+1]+1,f>h&&(f=h,b++),n[2*c+1]=f,c>i||(e.bl_count[f]++,u=0,c>=o&&(u=r[c-o]),p=n[2*c],e.opt_len+=p*(f+u),a&&(e.static_len+=p*(s[2*c+1]+u)));if(0!==b){do{for(f=h-1;0===e.bl_count[f];)f--;e.bl_count[f]--,e.bl_count[f+1]+=2,e.bl_count[h]--,b-=2}while(b>0);for(f=h;0!==f;f--)for(c=e.bl_count[f];0!==c;)d=e.heap[--l],d>i||(n[2*d+1]!==f&&(e.opt_len+=(f-n[2*d+1])*n[2*d],n[2*d+1]=f),c--)}})(e,t),$(n,l,e.bl_count)},Y=(e,t,n)=>{let i,s,a=-1,r=t[1],o=0,h=7,l=4;for(0===r&&(h=138,l=3),t[2*(n+1)+1]=65535,i=0;i<=n;i++)s=r,r=t[2*(i+1)+1],++o<h&&s===r||(o<l?e.bl_tree[2*s]+=o:0!==s?(s!==a&&e.bl_tree[2*s]++,e.bl_tree[32]++):o<=10?e.bl_tree[34]++:e.bl_tree[36]++,o=0,a=s,0===r?(h=138,l=3):s===r?(h=6,l=3):(h=7,l=4))},G=(e,t,n)=>{let i,s,a=-1,r=t[1],o=0,h=7,l=4;for(0===r&&(h=138,l=3),i=0;i<=n;i++)if(s=r,r=t[2*(i+1)+1],!(++o<h&&s===r)){if(o<l)do{P(e,s,e.bl_tree)}while(0!==--o);else 0!==s?(s!==a&&(P(e,s,e.bl_tree),o--),P(e,16,e.bl_tree),Z(e,o-3,2)):o<=10?(P(e,17,e.bl_tree),Z(e,o-3,3)):(P(e,18,e.bl_tree),Z(e,o-11,7));o=0,a=s,0===r?(h=138,l=3):s===r?(h=6,l=3):(h=7,l=4)}};let J=!1;const X=(e,t,n,i)=>{Z(e,0+(i?1:0),3),M(e),F(e,n),F(e,~n),n&&e.pending_buf.set(e.window.subarray(t,t+n),e.pending),e.pending+=n};var Q=(e,t,n,i)=>{let s,a,r=0;e.level>0?(2===e.strm.data_type&&(e.strm.data_type=(e=>{let t,n=4093624447;for(t=0;t<=31;t++,n>>>=1)if(1&n&&0!==e.dyn_ltree[2*t])return 0;if(0!==e.dyn_ltree[18]||0!==e.dyn_ltree[20]||0!==e.dyn_ltree[26])return 1;for(t=32;t<m;t++)if(0!==e.dyn_ltree[2*t])return 1;return 0})(e)),W(e,e.l_desc),W(e,e.d_desc),r=(e=>{let t;for(Y(e,e.dyn_ltree,e.l_desc.max_code),Y(e,e.dyn_dtree,e.d_desc.max_code),W(e,e.bl_desc),t=18;t>=3&&0===e.bl_tree[2*N[t]+1];t--);return e.opt_len+=3*(t+1)+5+5+4,t})(e),s=e.opt_len+3+7>>>3,a=e.static_len+3+7>>>3,a<=s&&(s=a)):s=a=n+5,n+4<=s&&-1!==t?X(e,t,n,i):4===e.strategy||a===s?(Z(e,2+(i?1:0),3),K(e,z,E)):(Z(e,4+(i?1:0),3),((e,t,n,i)=>{let s;for(Z(e,t-257,5),Z(e,n-1,5),Z(e,i-4,4),s=0;s<i;s++)Z(e,e.bl_tree[2*N[s]+1],3);G(e,e.dyn_ltree,t-1),G(e,e.dyn_dtree,n-1)})(e,e.l_desc.max_code+1,e.d_desc.max_code+1,r+1),K(e,e.dyn_ltree,e.dyn_dtree)),H(e),i&&M(e)},ee={_tr_init:e=>{J||((()=>{let e,t,n,i,s;const a=new Array(16);for(n=0,i=0;i<28;i++)for(O[i]=n,e=0;e<1<<k[i];e++)U[n++]=i;for(U[n-1]=i,s=0,i=0;i<16;i++)for(B[i]=s,e=0;e<1<<x[i];e++)S[s++]=i;for(s>>=7;i<y;i++)for(B[i]=s<<7,e=0;e<1<<x[i]-7;e++)S[256+s++]=i;for(t=0;t<=v;t++)a[t]=0;for(e=0;e<=143;)z[2*e+1]=8,e++,a[8]++;for(;e<=255;)z[2*e+1]=9,e++,a[9]++;for(;e<=279;)z[2*e+1]=7,e++,a[7]++;for(;e<=287;)z[2*e+1]=8,e++,a[8]++;for($(z,287,a),e=0;e<y;e++)E[2*e+1]=5,E[2*e]=L(e,5);T=new A(z,k,257,w,v),I=new A(E,x,0,y,v),V=new A(new Array(0),C,0,19,7)})(),J=!0),e.l_desc=new R(e.dyn_ltree,T),e.d_desc=new R(e.dyn_dtree,I),e.bl_desc=new R(e.bl_tree,V),e.bi_buf=0,e.bi_valid=0,H(e)},_tr_stored_block:X,_tr_flush_block:Q,_tr_tally:(e,t,n)=>(e.pending_buf[e.sym_buf+e.sym_next++]=t,e.pending_buf[e.sym_buf+e.sym_next++]=t>>8,e.pending_buf[e.sym_buf+e.sym_next++]=n,0===t?e.dyn_ltree[2*n]++:(e.matches++,t--,e.dyn_ltree[2*(U[n]+m+1)]++,e.dyn_dtree[2*D(t)]++),e.sym_next===e.sym_end),_tr_align:e=>{Z(e,2,3),P(e,256,z),(e=>{16===e.bi_valid?(F(e,e.bi_buf),e.bi_buf=0,e.bi_valid=0):e.bi_valid>=8&&(e.pending_buf[e.pending++]=255&e.bi_buf,e.bi_buf>>=8,e.bi_valid-=8)})(e)}};var te=(e,t,n,i)=>{let s=65535&e|0,a=e>>>16&65535|0,r=0;for(;0!==n;){r=n>2e3?2e3:n,n-=r;do{s=s+t[i++]|0,a=a+s|0}while(--r);s%=65521,a%=65521}return s|a<<16|0};const ne=new Uint32Array((()=>{let e,t=[];for(var n=0;n<256;n++){e=n;for(var i=0;i<8;i++)e=1&e?3988292384^e>>>1:e>>>1;t[n]=e}return t})());var ie=(e,t,n,i)=>{const s=ne,a=i+n;e^=-1;for(let r=i;r<a;r++)e=e>>>8^s[255&(e^t[r])];return-1^e},se={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"},ae={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_MEM_ERROR:-4,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8};const{_tr_init:re,_tr_stored_block:oe,_tr_flush_block:he,_tr_tally:le,_tr_align:ce}=ee,{Z_NO_FLUSH:de,Z_PARTIAL_FLUSH:fe,Z_FULL_FLUSH:ue,Z_FINISH:pe,Z_BLOCK:be,Z_OK:ge,Z_STREAM_END:_e,Z_STREAM_ERROR:me,Z_DATA_ERROR:we,Z_BUF_ERROR:ye,Z_DEFAULT_COMPRESSION:ve,Z_FILTERED:ke,Z_HUFFMAN_ONLY:xe,Z_RLE:Ce,Z_FIXED:Ne,Z_DEFAULT_STRATEGY:ze,Z_UNKNOWN:Ee,Z_DEFLATED:Se}=ae,Ue=258,Oe=262,Be=42,Ae=113,Te=666,Ie=(e,t)=>(e.msg=se[t],t),Ve=e=>2*e-(e>4?9:0),Re=e=>{let t=e.length;for(;--t>=0;)e[t]=0},De=e=>{let t,n,i,s=e.w_size;t=e.hash_size,i=t;do{n=e.head[--i],e.head[i]=n>=s?n-s:0}while(--t);t=s,i=t;do{n=e.prev[--i],e.prev[i]=n>=s?n-s:0}while(--t)};let Fe=(e,t,n)=>(t<<e.hash_shift^n)&e.hash_mask;const Ze=e=>{const t=e.state;let n=t.pending;n>e.avail_out&&(n=e.avail_out),0!==n&&(e.output.set(t.pending_buf.subarray(t.pending_out,t.pending_out+n),e.next_out),e.next_out+=n,t.pending_out+=n,e.total_out+=n,e.avail_out-=n,t.pending-=n,0===t.pending&&(t.pending_out=0))},Pe=(e,t)=>{he(e,e.block_start>=0?e.block_start:-1,e.strstart-e.block_start,t),e.block_start=e.strstart,Ze(e.strm)},Le=(e,t)=>{e.pending_buf[e.pending++]=t},$e=(e,t)=>{e.pending_buf[e.pending++]=t>>>8&255,e.pending_buf[e.pending++]=255&t},He=(e,t,n,i)=>{let s=e.avail_in;return s>i&&(s=i),0===s?0:(e.avail_in-=s,t.set(e.input.subarray(e.next_in,e.next_in+s),n),1===e.state.wrap?e.adler=te(e.adler,t,s,n):2===e.state.wrap&&(e.adler=ie(e.adler,t,s,n)),e.next_in+=s,e.total_in+=s,s)},Me=(e,t)=>{let n,i,s=e.max_chain_length,a=e.strstart,r=e.prev_length,o=e.nice_match;const h=e.strstart>e.w_size-Oe?e.strstart-(e.w_size-Oe):0,l=e.window,c=e.w_mask,d=e.prev,f=e.strstart+Ue;let u=l[a+r-1],p=l[a+r];e.prev_length>=e.good_match&&(s>>=2),o>e.lookahead&&(o=e.lookahead);do{if(n=t,l[n+r]===p&&l[n+r-1]===u&&l[n]===l[a]&&l[++n]===l[a+1]){a+=2,n++;do{}while(l[++a]===l[++n]&&l[++a]===l[++n]&&l[++a]===l[++n]&&l[++a]===l[++n]&&l[++a]===l[++n]&&l[++a]===l[++n]&&l[++a]===l[++n]&&l[++a]===l[++n]&&a<f);if(i=Ue-(f-a),a=f-Ue,i>r){if(e.match_start=t,r=i,i>=o)break;u=l[a+r-1],p=l[a+r]}}}while((t=d[t&c])>h&&0!==--s);return r<=e.lookahead?r:e.lookahead},je=e=>{const t=e.w_size;let n,i,s;do{if(i=e.window_size-e.lookahead-e.strstart,e.strstart>=t+(t-Oe)&&(e.window.set(e.window.subarray(t,t+t-i),0),e.match_start-=t,e.strstart-=t,e.block_start-=t,e.insert>e.strstart&&(e.insert=e.strstart),De(e),i+=t),0===e.strm.avail_in)break;if(n=He(e.strm,e.window,e.strstart+e.lookahead,i),e.lookahead+=n,e.lookahead+e.insert>=3)for(s=e.strstart-e.insert,e.ins_h=e.window[s],e.ins_h=Fe(e,e.ins_h,e.window[s+1]);e.insert&&(e.ins_h=Fe(e,e.ins_h,e.window[s+3-1]),e.prev[s&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=s,s++,e.insert--,!(e.lookahead+e.insert<3)););}while(e.lookahead<Oe&&0!==e.strm.avail_in)},qe=(e,t)=>{let n,i,s,a=e.pending_buf_size-5>e.w_size?e.w_size:e.pending_buf_size-5,r=0,o=e.strm.avail_in;do{if(n=65535,s=e.bi_valid+42>>3,e.strm.avail_out<s)break;if(s=e.strm.avail_out-s,i=e.strstart-e.block_start,n>i+e.strm.avail_in&&(n=i+e.strm.avail_in),n>s&&(n=s),n<a&&(0===n&&t!==pe||t===de||n!==i+e.strm.avail_in))break;r=t===pe&&n===i+e.strm.avail_in?1:0,oe(e,0,0,r),e.pending_buf[e.pending-4]=n,e.pending_buf[e.pending-3]=n>>8,e.pending_buf[e.pending-2]=~n,e.pending_buf[e.pending-1]=~n>>8,Ze(e.strm),i&&(i>n&&(i=n),e.strm.output.set(e.window.subarray(e.block_start,e.block_start+i),e.strm.next_out),e.strm.next_out+=i,e.strm.avail_out-=i,e.strm.total_out+=i,e.block_start+=i,n-=i),n&&(He(e.strm,e.strm.output,e.strm.next_out,n),e.strm.next_out+=n,e.strm.avail_out-=n,e.strm.total_out+=n)}while(0===r);return o-=e.strm.avail_in,o&&(o>=e.w_size?(e.matches=2,e.window.set(e.strm.input.subarray(e.strm.next_in-e.w_size,e.strm.next_in),0),e.strstart=e.w_size,e.insert=e.strstart):(e.window_size-e.strstart<=o&&(e.strstart-=e.w_size,e.window.set(e.window.subarray(e.w_size,e.w_size+e.strstart),0),e.matches<2&&e.matches++,e.insert>e.strstart&&(e.insert=e.strstart)),e.window.set(e.strm.input.subarray(e.strm.next_in-o,e.strm.next_in),e.strstart),e.strstart+=o,e.insert+=o>e.w_size-e.insert?e.w_size-e.insert:o),e.block_start=e.strstart),e.high_water<e.strstart&&(e.high_water=e.strstart),r?4:t!==de&&t!==pe&&0===e.strm.avail_in&&e.strstart===e.block_start?2:(s=e.window_size-e.strstart,e.strm.avail_in>s&&e.block_start>=e.w_size&&(e.block_start-=e.w_size,e.strstart-=e.w_size,e.window.set(e.window.subarray(e.w_size,e.w_size+e.strstart),0),e.matches<2&&e.matches++,s+=e.w_size,e.insert>e.strstart&&(e.insert=e.strstart)),s>e.strm.avail_in&&(s=e.strm.avail_in),s&&(He(e.strm,e.window,e.strstart,s),e.strstart+=s,e.insert+=s>e.w_size-e.insert?e.w_size-e.insert:s),e.high_water<e.strstart&&(e.high_water=e.strstart),s=e.bi_valid+42>>3,s=e.pending_buf_size-s>65535?65535:e.pending_buf_size-s,a=s>e.w_size?e.w_size:s,i=e.strstart-e.block_start,(i>=a||(i||t===pe)&&t!==de&&0===e.strm.avail_in&&i<=s)&&(n=i>s?s:i,r=t===pe&&0===e.strm.avail_in&&n===i?1:0,oe(e,e.block_start,n,r),e.block_start+=n,Ze(e.strm)),r?3:1)},Ke=(e,t)=>{let n,i;for(;;){if(e.lookahead<Oe){if(je(e),e.lookahead<Oe&&t===de)return 1;if(0===e.lookahead)break}if(n=0,e.lookahead>=3&&(e.ins_h=Fe(e,e.ins_h,e.window[e.strstart+3-1]),n=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart),0!==n&&e.strstart-n<=e.w_size-Oe&&(e.match_length=Me(e,n)),e.match_length>=3)if(i=le(e,e.strstart-e.match_start,e.match_length-3),e.lookahead-=e.match_length,e.match_length<=e.max_lazy_match&&e.lookahead>=3){e.match_length--;do{e.strstart++,e.ins_h=Fe(e,e.ins_h,e.window[e.strstart+3-1]),n=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart}while(0!==--e.match_length);e.strstart++}else e.strstart+=e.match_length,e.match_length=0,e.ins_h=e.window[e.strstart],e.ins_h=Fe(e,e.ins_h,e.window[e.strstart+1]);else i=le(e,0,e.window[e.strstart]),e.lookahead--,e.strstart++;if(i&&(Pe(e,!1),0===e.strm.avail_out))return 1}return e.insert=e.strstart<2?e.strstart:2,t===pe?(Pe(e,!0),0===e.strm.avail_out?3:4):e.sym_next&&(Pe(e,!1),0===e.strm.avail_out)?1:2},We=(e,t)=>{let n,i,s;for(;;){if(e.lookahead<Oe){if(je(e),e.lookahead<Oe&&t===de)return 1;if(0===e.lookahead)break}if(n=0,e.lookahead>=3&&(e.ins_h=Fe(e,e.ins_h,e.window[e.strstart+3-1]),n=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart),e.prev_length=e.match_length,e.prev_match=e.match_start,e.match_length=2,0!==n&&e.prev_length<e.max_lazy_match&&e.strstart-n<=e.w_size-Oe&&(e.match_length=Me(e,n),e.match_length<=5&&(e.strategy===ke||3===e.match_length&&e.strstart-e.match_start>4096)&&(e.match_length=2)),e.prev_length>=3&&e.match_length<=e.prev_length){s=e.strstart+e.lookahead-3,i=le(e,e.strstart-1-e.prev_match,e.prev_length-3),e.lookahead-=e.prev_length-1,e.prev_length-=2;do{++e.strstart<=s&&(e.ins_h=Fe(e,e.ins_h,e.window[e.strstart+3-1]),n=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart)}while(0!==--e.prev_length);if(e.match_available=0,e.match_length=2,e.strstart++,i&&(Pe(e,!1),0===e.strm.avail_out))return 1}else if(e.match_available){if(i=le(e,0,e.window[e.strstart-1]),i&&Pe(e,!1),e.strstart++,e.lookahead--,0===e.strm.avail_out)return 1}else e.match_available=1,e.strstart++,e.lookahead--}return e.match_available&&(i=le(e,0,e.window[e.strstart-1]),e.match_available=0),e.insert=e.strstart<2?e.strstart:2,t===pe?(Pe(e,!0),0===e.strm.avail_out?3:4):e.sym_next&&(Pe(e,!1),0===e.strm.avail_out)?1:2};function Ye(e,t,n,i,s){this.good_length=e,this.max_lazy=t,this.nice_length=n,this.max_chain=i,this.func=s}const Ge=[new Ye(0,0,0,0,qe),new Ye(4,4,8,4,Ke),new Ye(4,5,16,8,Ke),new Ye(4,6,32,32,Ke),new Ye(4,4,16,16,We),new Ye(8,16,32,32,We),new Ye(8,16,128,128,We),new Ye(8,32,128,256,We),new Ye(32,128,258,1024,We),new Ye(32,258,258,4096,We)];function Je(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=Se,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new Uint16Array(1146),this.dyn_dtree=new Uint16Array(122),this.bl_tree=new Uint16Array(78),Re(this.dyn_ltree),Re(this.dyn_dtree),Re(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new Uint16Array(16),this.heap=new Uint16Array(573),Re(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new Uint16Array(573),Re(this.depth),this.sym_buf=0,this.lit_bufsize=0,this.sym_next=0,this.sym_end=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}const Xe=e=>{if(!e)return 1;const t=e.state;return!t||t.strm!==e||t.status!==Be&&57!==t.status&&69!==t.status&&73!==t.status&&91!==t.status&&103!==t.status&&t.status!==Ae&&t.status!==Te?1:0},Qe=e=>{if(Xe(e))return Ie(e,me);e.total_in=e.total_out=0,e.data_type=Ee;const t=e.state;return t.pending=0,t.pending_out=0,t.wrap<0&&(t.wrap=-t.wrap),t.status=2===t.wrap?57:t.wrap?Be:Ae,e.adler=2===t.wrap?0:1,t.last_flush=-2,re(t),ge},et=e=>{const t=Qe(e);var n;return t===ge&&((n=e.state).window_size=2*n.w_size,Re(n.head),n.max_lazy_match=Ge[n.level].max_lazy,n.good_match=Ge[n.level].good_length,n.nice_match=Ge[n.level].nice_length,n.max_chain_length=Ge[n.level].max_chain,n.strstart=0,n.block_start=0,n.lookahead=0,n.insert=0,n.match_length=n.prev_length=2,n.match_available=0,n.ins_h=0),t},tt=(e,t,n,i,s,a)=>{if(!e)return me;let r=1;if(t===ve&&(t=6),i<0?(r=0,i=-i):i>15&&(r=2,i-=16),s<1||s>9||n!==Se||i<8||i>15||t<0||t>9||a<0||a>Ne||8===i&&1!==r)return Ie(e,me);8===i&&(i=9);const o=new Je;return e.state=o,o.strm=e,o.status=Be,o.wrap=r,o.gzhead=null,o.w_bits=i,o.w_size=1<<o.w_bits,o.w_mask=o.w_size-1,o.hash_bits=s+7,o.hash_size=1<<o.hash_bits,o.hash_mask=o.hash_size-1,o.hash_shift=~~((o.hash_bits+3-1)/3),o.window=new Uint8Array(2*o.w_size),o.head=new Uint16Array(o.hash_size),o.prev=new Uint16Array(o.w_size),o.lit_bufsize=1<<s+6,o.pending_buf_size=4*o.lit_bufsize,o.pending_buf=new Uint8Array(o.pending_buf_size),o.sym_buf=o.lit_bufsize,o.sym_end=3*(o.lit_bufsize-1),o.level=t,o.strategy=a,o.method=n,et(e)};var nt={deflateInit:(e,t)=>tt(e,t,Se,15,8,ze),deflateInit2:tt,deflateReset:et,deflateResetKeep:Qe,deflateSetHeader:(e,t)=>Xe(e)||2!==e.state.wrap?me:(e.state.gzhead=t,ge),deflate:(e,t)=>{if(Xe(e)||t>be||t<0)return e?Ie(e,me):me;const n=e.state;if(!e.output||0!==e.avail_in&&!e.input||n.status===Te&&t!==pe)return Ie(e,0===e.avail_out?ye:me);const i=n.last_flush;if(n.last_flush=t,0!==n.pending){if(Ze(e),0===e.avail_out)return n.last_flush=-1,ge}else if(0===e.avail_in&&Ve(t)<=Ve(i)&&t!==pe)return Ie(e,ye);if(n.status===Te&&0!==e.avail_in)return Ie(e,ye);if(n.status===Be&&0===n.wrap&&(n.status=Ae),n.status===Be){let t=Se+(n.w_bits-8<<4)<<8,i=-1;if(i=n.strategy>=xe||n.level<2?0:n.level<6?1:6===n.level?2:3,t|=i<<6,0!==n.strstart&&(t|=32),t+=31-t%31,$e(n,t),0!==n.strstart&&($e(n,e.adler>>>16),$e(n,65535&e.adler)),e.adler=1,n.status=Ae,Ze(e),0!==n.pending)return n.last_flush=-1,ge}if(57===n.status)if(e.adler=0,Le(n,31),Le(n,139),Le(n,8),n.gzhead)Le(n,(n.gzhead.text?1:0)+(n.gzhead.hcrc?2:0)+(n.gzhead.extra?4:0)+(n.gzhead.name?8:0)+(n.gzhead.comment?16:0)),Le(n,255&n.gzhead.time),Le(n,n.gzhead.time>>8&255),Le(n,n.gzhead.time>>16&255),Le(n,n.gzhead.time>>24&255),Le(n,9===n.level?2:n.strategy>=xe||n.level<2?4:0),Le(n,255&n.gzhead.os),n.gzhead.extra&&n.gzhead.extra.length&&(Le(n,255&n.gzhead.extra.length),Le(n,n.gzhead.extra.length>>8&255)),n.gzhead.hcrc&&(e.adler=ie(e.adler,n.pending_buf,n.pending,0)),n.gzindex=0,n.status=69;else if(Le(n,0),Le(n,0),Le(n,0),Le(n,0),Le(n,0),Le(n,9===n.level?2:n.strategy>=xe||n.level<2?4:0),Le(n,3),n.status=Ae,Ze(e),0!==n.pending)return n.last_flush=-1,ge;if(69===n.status){if(n.gzhead.extra){let t=n.pending,i=(65535&n.gzhead.extra.length)-n.gzindex;for(;n.pending+i>n.pending_buf_size;){let s=n.pending_buf_size-n.pending;if(n.pending_buf.set(n.gzhead.extra.subarray(n.gzindex,n.gzindex+s),n.pending),n.pending=n.pending_buf_size,n.gzhead.hcrc&&n.pending>t&&(e.adler=ie(e.adler,n.pending_buf,n.pending-t,t)),n.gzindex+=s,Ze(e),0!==n.pending)return n.last_flush=-1,ge;t=0,i-=s}let s=new Uint8Array(n.gzhead.extra);n.pending_buf.set(s.subarray(n.gzindex,n.gzindex+i),n.pending),n.pending+=i,n.gzhead.hcrc&&n.pending>t&&(e.adler=ie(e.adler,n.pending_buf,n.pending-t,t)),n.gzindex=0}n.status=73}if(73===n.status){if(n.gzhead.name){let t,i=n.pending;do{if(n.pending===n.pending_buf_size){if(n.gzhead.hcrc&&n.pending>i&&(e.adler=ie(e.adler,n.pending_buf,n.pending-i,i)),Ze(e),0!==n.pending)return n.last_flush=-1,ge;i=0}t=n.gzindex<n.gzhead.name.length?255&n.gzhead.name.charCodeAt(n.gzindex++):0,Le(n,t)}while(0!==t);n.gzhead.hcrc&&n.pending>i&&(e.adler=ie(e.adler,n.pending_buf,n.pending-i,i)),n.gzindex=0}n.status=91}if(91===n.status){if(n.gzhead.comment){let t,i=n.pending;do{if(n.pending===n.pending_buf_size){if(n.gzhead.hcrc&&n.pending>i&&(e.adler=ie(e.adler,n.pending_buf,n.pending-i,i)),Ze(e),0!==n.pending)return n.last_flush=-1,ge;i=0}t=n.gzindex<n.gzhead.comment.length?255&n.gzhead.comment.charCodeAt(n.gzindex++):0,Le(n,t)}while(0!==t);n.gzhead.hcrc&&n.pending>i&&(e.adler=ie(e.adler,n.pending_buf,n.pending-i,i))}n.status=103}if(103===n.status){if(n.gzhead.hcrc){if(n.pending+2>n.pending_buf_size&&(Ze(e),0!==n.pending))return n.last_flush=-1,ge;Le(n,255&e.adler),Le(n,e.adler>>8&255),e.adler=0}if(n.status=Ae,Ze(e),0!==n.pending)return n.last_flush=-1,ge}if(0!==e.avail_in||0!==n.lookahead||t!==de&&n.status!==Te){let i=0===n.level?qe(n,t):n.strategy===xe?((e,t)=>{let n;for(;;){if(0===e.lookahead&&(je(e),0===e.lookahead)){if(t===de)return 1;break}if(e.match_length=0,n=le(e,0,e.window[e.strstart]),e.lookahead--,e.strstart++,n&&(Pe(e,!1),0===e.strm.avail_out))return 1}return e.insert=0,t===pe?(Pe(e,!0),0===e.strm.avail_out?3:4):e.sym_next&&(Pe(e,!1),0===e.strm.avail_out)?1:2})(n,t):n.strategy===Ce?((e,t)=>{let n,i,s,a;const r=e.window;for(;;){if(e.lookahead<=Ue){if(je(e),e.lookahead<=Ue&&t===de)return 1;if(0===e.lookahead)break}if(e.match_length=0,e.lookahead>=3&&e.strstart>0&&(s=e.strstart-1,i=r[s],i===r[++s]&&i===r[++s]&&i===r[++s])){a=e.strstart+Ue;do{}while(i===r[++s]&&i===r[++s]&&i===r[++s]&&i===r[++s]&&i===r[++s]&&i===r[++s]&&i===r[++s]&&i===r[++s]&&s<a);e.match_length=Ue-(a-s),e.match_length>e.lookahead&&(e.match_length=e.lookahead)}if(e.match_length>=3?(n=le(e,1,e.match_length-3),e.lookahead-=e.match_length,e.strstart+=e.match_length,e.match_length=0):(n=le(e,0,e.window[e.strstart]),e.lookahead--,e.strstart++),n&&(Pe(e,!1),0===e.strm.avail_out))return 1}return e.insert=0,t===pe?(Pe(e,!0),0===e.strm.avail_out?3:4):e.sym_next&&(Pe(e,!1),0===e.strm.avail_out)?1:2})(n,t):Ge[n.level].func(n,t);if(3!==i&&4!==i||(n.status=Te),1===i||3===i)return 0===e.avail_out&&(n.last_flush=-1),ge;if(2===i&&(t===fe?ce(n):t!==be&&(oe(n,0,0,!1),t===ue&&(Re(n.head),0===n.lookahead&&(n.strstart=0,n.block_start=0,n.insert=0))),Ze(e),0===e.avail_out))return n.last_flush=-1,ge}return t!==pe?ge:n.wrap<=0?_e:(2===n.wrap?(Le(n,255&e.adler),Le(n,e.adler>>8&255),Le(n,e.adler>>16&255),Le(n,e.adler>>24&255),Le(n,255&e.total_in),Le(n,e.total_in>>8&255),Le(n,e.total_in>>16&255),Le(n,e.total_in>>24&255)):($e(n,e.adler>>>16),$e(n,65535&e.adler)),Ze(e),n.wrap>0&&(n.wrap=-n.wrap),0!==n.pending?ge:_e)},deflateEnd:e=>{if(Xe(e))return me;const t=e.state.status;return e.state=null,t===Ae?Ie(e,we):ge},deflateSetDictionary:(e,t)=>{let n=t.length;if(Xe(e))return me;const i=e.state,s=i.wrap;if(2===s||1===s&&i.status!==Be||i.lookahead)return me;if(1===s&&(e.adler=te(e.adler,t,n,0)),i.wrap=0,n>=i.w_size){0===s&&(Re(i.head),i.strstart=0,i.block_start=0,i.insert=0);let e=new Uint8Array(i.w_size);e.set(t.subarray(n-i.w_size,n),0),t=e,n=i.w_size}const a=e.avail_in,r=e.next_in,o=e.input;for(e.avail_in=n,e.next_in=0,e.input=t,je(i);i.lookahead>=3;){let e=i.strstart,t=i.lookahead-2;do{i.ins_h=Fe(i,i.ins_h,i.window[e+3-1]),i.prev[e&i.w_mask]=i.head[i.ins_h],i.head[i.ins_h]=e,e++}while(--t);i.strstart=e,i.lookahead=2,je(i)}return i.strstart+=i.lookahead,i.block_start=i.strstart,i.insert=i.lookahead,i.lookahead=0,i.match_length=i.prev_length=2,i.match_available=0,e.next_in=r,e.input=o,e.avail_in=a,i.wrap=s,ge},deflateInfo:"pako deflate (from Nodeca project)"};const it=(e,t)=>Object.prototype.hasOwnProperty.call(e,t);var st={assign:function(e){const t=Array.prototype.slice.call(arguments,1);for(;t.length;){const n=t.shift();if(n){if("object"!==typeof n)throw new TypeError(n+"must be non-object");for(const t in n)it(n,t)&&(e[t]=n[t])}}return e},flattenChunks:e=>{let t=0;for(let i=0,s=e.length;i<s;i++)t+=e[i].length;const n=new Uint8Array(t);for(let i=0,s=0,a=e.length;i<a;i++){let t=e[i];n.set(t,s),s+=t.length}return n}};let at=!0;try{String.fromCharCode.apply(null,new Uint8Array(1))}catch(Yn){at=!1}const rt=new Uint8Array(256);for(let Gn=0;Gn<256;Gn++)rt[Gn]=Gn>=252?6:Gn>=248?5:Gn>=240?4:Gn>=224?3:Gn>=192?2:1;rt[254]=rt[254]=1;var ot={string2buf:e=>{if("function"===typeof TextEncoder&&TextEncoder.prototype.encode)return(new TextEncoder).encode(e);let t,n,i,s,a,r=e.length,o=0;for(s=0;s<r;s++)n=e.charCodeAt(s),55296===(64512&n)&&s+1<r&&(i=e.charCodeAt(s+1),56320===(64512&i)&&(n=65536+(n-55296<<10)+(i-56320),s++)),o+=n<128?1:n<2048?2:n<65536?3:4;for(t=new Uint8Array(o),a=0,s=0;a<o;s++)n=e.charCodeAt(s),55296===(64512&n)&&s+1<r&&(i=e.charCodeAt(s+1),56320===(64512&i)&&(n=65536+(n-55296<<10)+(i-56320),s++)),n<128?t[a++]=n:n<2048?(t[a++]=192|n>>>6,t[a++]=128|63&n):n<65536?(t[a++]=224|n>>>12,t[a++]=128|n>>>6&63,t[a++]=128|63&n):(t[a++]=240|n>>>18,t[a++]=128|n>>>12&63,t[a++]=128|n>>>6&63,t[a++]=128|63&n);return t},buf2string:(e,t)=>{const n=t||e.length;if("function"===typeof TextDecoder&&TextDecoder.prototype.decode)return(new TextDecoder).decode(e.subarray(0,t));let i,s;const a=new Array(2*n);for(s=0,i=0;i<n;){let t=e[i++];if(t<128){a[s++]=t;continue}let r=rt[t];if(r>4)a[s++]=65533,i+=r-1;else{for(t&=2===r?31:3===r?15:7;r>1&&i<n;)t=t<<6|63&e[i++],r--;r>1?a[s++]=65533:t<65536?a[s++]=t:(t-=65536,a[s++]=55296|t>>10&1023,a[s++]=56320|1023&t)}}return((e,t)=>{if(t<65534&&e.subarray&&at)return String.fromCharCode.apply(null,e.length===t?e:e.subarray(0,t));let n="";for(let i=0;i<t;i++)n+=String.fromCharCode(e[i]);return n})(a,s)},utf8border:(e,t)=>{(t=t||e.length)>e.length&&(t=e.length);let n=t-1;for(;n>=0&&128===(192&e[n]);)n--;return n<0||0===n?t:n+rt[e[n]]>t?n:t}};var ht=function(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0};const lt=Object.prototype.toString,{Z_NO_FLUSH:ct,Z_SYNC_FLUSH:dt,Z_FULL_FLUSH:ft,Z_FINISH:ut,Z_OK:pt,Z_STREAM_END:bt,Z_DEFAULT_COMPRESSION:gt,Z_DEFAULT_STRATEGY:_t,Z_DEFLATED:mt}=ae;function wt(e){this.options=st.assign({level:gt,method:mt,chunkSize:16384,windowBits:15,memLevel:8,strategy:_t},e||{});let t=this.options;t.raw&&t.windowBits>0?t.windowBits=-t.windowBits:t.gzip&&t.windowBits>0&&t.windowBits<16&&(t.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new ht,this.strm.avail_out=0;let n=nt.deflateInit2(this.strm,t.level,t.method,t.windowBits,t.memLevel,t.strategy);if(n!==pt)throw new Error(se[n]);if(t.header&&nt.deflateSetHeader(this.strm,t.header),t.dictionary){let e;if(e="string"===typeof t.dictionary?ot.string2buf(t.dictionary):"[object ArrayBuffer]"===lt.call(t.dictionary)?new Uint8Array(t.dictionary):t.dictionary,n=nt.deflateSetDictionary(this.strm,e),n!==pt)throw new Error(se[n]);this._dict_set=!0}}function yt(e,t){const n=new wt(t);if(n.push(e,!0),n.err)throw n.msg||se[n.err];return n.result}wt.prototype.push=function(e,t){const n=this.strm,i=this.options.chunkSize;let s,a;if(this.ended)return!1;for(a=t===~~t?t:!0===t?ut:ct,"string"===typeof e?n.input=ot.string2buf(e):"[object ArrayBuffer]"===lt.call(e)?n.input=new Uint8Array(e):n.input=e,n.next_in=0,n.avail_in=n.input.length;;)if(0===n.avail_out&&(n.output=new Uint8Array(i),n.next_out=0,n.avail_out=i),(a===dt||a===ft)&&n.avail_out<=6)this.onData(n.output.subarray(0,n.next_out)),n.avail_out=0;else{if(s=nt.deflate(n,a),s===bt)return n.next_out>0&&this.onData(n.output.subarray(0,n.next_out)),s=nt.deflateEnd(this.strm),this.onEnd(s),this.ended=!0,s===pt;if(0!==n.avail_out){if(a>0&&n.next_out>0)this.onData(n.output.subarray(0,n.next_out)),n.avail_out=0;else if(0===n.avail_in)break}else this.onData(n.output)}return!0},wt.prototype.onData=function(e){this.chunks.push(e)},wt.prototype.onEnd=function(e){e===pt&&(this.result=st.flattenChunks(this.chunks)),this.chunks=[],this.err=e,this.msg=this.strm.msg};var vt={Deflate:wt,deflate:yt,deflateRaw:function(e,t){return(t=t||{}).raw=!0,yt(e,t)},gzip:function(e,t){return(t=t||{}).gzip=!0,yt(e,t)},constants:ae};const kt=16209;var xt=function(e,t){let n,i,s,a,r,o,h,l,c,d,f,u,p,b,g,_,m,w,y,v,k,x,C,N;const z=e.state;n=e.next_in,C=e.input,i=n+(e.avail_in-5),s=e.next_out,N=e.output,a=s-(t-e.avail_out),r=s+(e.avail_out-257),o=z.dmax,h=z.wsize,l=z.whave,c=z.wnext,d=z.window,f=z.hold,u=z.bits,p=z.lencode,b=z.distcode,g=(1<<z.lenbits)-1,_=(1<<z.distbits)-1;e:do{u<15&&(f+=C[n++]<<u,u+=8,f+=C[n++]<<u,u+=8),m=p[f&g];t:for(;;){if(w=m>>>24,f>>>=w,u-=w,w=m>>>16&255,0===w)N[s++]=65535&m;else{if(!(16&w)){if(0===(64&w)){m=p[(65535&m)+(f&(1<<w)-1)];continue t}if(32&w){z.mode=16191;break e}e.msg="invalid literal/length code",z.mode=kt;break e}y=65535&m,w&=15,w&&(u<w&&(f+=C[n++]<<u,u+=8),y+=f&(1<<w)-1,f>>>=w,u-=w),u<15&&(f+=C[n++]<<u,u+=8,f+=C[n++]<<u,u+=8),m=b[f&_];n:for(;;){if(w=m>>>24,f>>>=w,u-=w,w=m>>>16&255,!(16&w)){if(0===(64&w)){m=b[(65535&m)+(f&(1<<w)-1)];continue n}e.msg="invalid distance code",z.mode=kt;break e}if(v=65535&m,w&=15,u<w&&(f+=C[n++]<<u,u+=8,u<w&&(f+=C[n++]<<u,u+=8)),v+=f&(1<<w)-1,v>o){e.msg="invalid distance too far back",z.mode=kt;break e}if(f>>>=w,u-=w,w=s-a,v>w){if(w=v-w,w>l&&z.sane){e.msg="invalid distance too far back",z.mode=kt;break e}if(k=0,x=d,0===c){if(k+=h-w,w<y){y-=w;do{N[s++]=d[k++]}while(--w);k=s-v,x=N}}else if(c<w){if(k+=h+c-w,w-=c,w<y){y-=w;do{N[s++]=d[k++]}while(--w);if(k=0,c<y){w=c,y-=w;do{N[s++]=d[k++]}while(--w);k=s-v,x=N}}}else if(k+=c-w,w<y){y-=w;do{N[s++]=d[k++]}while(--w);k=s-v,x=N}for(;y>2;)N[s++]=x[k++],N[s++]=x[k++],N[s++]=x[k++],y-=3;y&&(N[s++]=x[k++],y>1&&(N[s++]=x[k++]))}else{k=s-v;do{N[s++]=N[k++],N[s++]=N[k++],N[s++]=N[k++],y-=3}while(y>2);y&&(N[s++]=N[k++],y>1&&(N[s++]=N[k++]))}break}}break}}while(n<i&&s<r);y=u>>3,n-=y,u-=y<<3,f&=(1<<u)-1,e.next_in=n,e.next_out=s,e.avail_in=n<i?i-n+5:5-(n-i),e.avail_out=s<r?r-s+257:257-(s-r),z.hold=f,z.bits=u};const Ct=15,Nt=new Uint16Array([3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0]),zt=new Uint8Array([16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78]),Et=new Uint16Array([1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0]),St=new Uint8Array([16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64]);var Ut=(e,t,n,i,s,a,r,o)=>{const h=o.bits;let l,c,d,f,u,p,b=0,g=0,_=0,m=0,w=0,y=0,v=0,k=0,x=0,C=0,N=null;const z=new Uint16Array(16),E=new Uint16Array(16);let S,U,O,B=null;for(b=0;b<=Ct;b++)z[b]=0;for(g=0;g<i;g++)z[t[n+g]]++;for(w=h,m=Ct;m>=1&&0===z[m];m--);if(w>m&&(w=m),0===m)return s[a++]=20971520,s[a++]=20971520,o.bits=1,0;for(_=1;_<m&&0===z[_];_++);for(w<_&&(w=_),k=1,b=1;b<=Ct;b++)if(k<<=1,k-=z[b],k<0)return-1;if(k>0&&(0===e||1!==m))return-1;for(E[1]=0,b=1;b<Ct;b++)E[b+1]=E[b]+z[b];for(g=0;g<i;g++)0!==t[n+g]&&(r[E[t[n+g]]++]=g);if(0===e?(N=B=r,p=20):1===e?(N=Nt,B=zt,p=257):(N=Et,B=St,p=0),C=0,g=0,b=_,u=a,y=w,v=0,d=-1,x=1<<w,f=x-1,1===e&&x>852||2===e&&x>592)return 1;for(;;){S=b-v,r[g]+1<p?(U=0,O=r[g]):r[g]>=p?(U=B[r[g]-p],O=N[r[g]-p]):(U=96,O=0),l=1<<b-v,c=1<<y,_=c;do{c-=l,s[u+(C>>v)+c]=S<<24|U<<16|O|0}while(0!==c);for(l=1<<b-1;C&l;)l>>=1;if(0!==l?(C&=l-1,C+=l):C=0,g++,0===--z[b]){if(b===m)break;b=t[n+r[g]]}if(b>w&&(C&f)!==d){for(0===v&&(v=w),u+=_,y=b-v,k=1<<y;y+v<m&&(k-=z[y+v],!(k<=0));)y++,k<<=1;if(x+=1<<y,1===e&&x>852||2===e&&x>592)return 1;d=C&f,s[d]=w<<24|y<<16|u-a|0}}return 0!==C&&(s[u+C]=b-v<<24|64<<16|0),o.bits=w,0};const{Z_FINISH:Ot,Z_BLOCK:Bt,Z_TREES:At,Z_OK:Tt,Z_STREAM_END:It,Z_NEED_DICT:Vt,Z_STREAM_ERROR:Rt,Z_DATA_ERROR:Dt,Z_MEM_ERROR:Ft,Z_BUF_ERROR:Zt,Z_DEFLATED:Pt}=ae,Lt=16180,$t=16190,Ht=16191,Mt=16192,jt=16194,qt=16199,Kt=16200,Wt=16206,Yt=16209,Gt=e=>(e>>>24&255)+(e>>>8&65280)+((65280&e)<<8)+((255&e)<<24);function Jt(){this.strm=null,this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new Uint16Array(320),this.work=new Uint16Array(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}const Xt=e=>{if(!e)return 1;const t=e.state;return!t||t.strm!==e||t.mode<Lt||t.mode>16211?1:0},Qt=e=>{if(Xt(e))return Rt;const t=e.state;return e.total_in=e.total_out=t.total=0,e.msg="",t.wrap&&(e.adler=1&t.wrap),t.mode=Lt,t.last=0,t.havedict=0,t.flags=-1,t.dmax=32768,t.head=null,t.hold=0,t.bits=0,t.lencode=t.lendyn=new Int32Array(852),t.distcode=t.distdyn=new Int32Array(592),t.sane=1,t.back=-1,Tt},en=e=>{if(Xt(e))return Rt;const t=e.state;return t.wsize=0,t.whave=0,t.wnext=0,Qt(e)},tn=(e,t)=>{let n;if(Xt(e))return Rt;const i=e.state;return t<0?(n=0,t=-t):(n=5+(t>>4),t<48&&(t&=15)),t&&(t<8||t>15)?Rt:(null!==i.window&&i.wbits!==t&&(i.window=null),i.wrap=n,i.wbits=t,en(e))},nn=(e,t)=>{if(!e)return Rt;const n=new Jt;e.state=n,n.strm=e,n.window=null,n.mode=Lt;const i=tn(e,t);return i!==Tt&&(e.state=null),i};let sn,an,rn=!0;const on=e=>{if(rn){sn=new Int32Array(512),an=new Int32Array(32);let t=0;for(;t<144;)e.lens[t++]=8;for(;t<256;)e.lens[t++]=9;for(;t<280;)e.lens[t++]=7;for(;t<288;)e.lens[t++]=8;for(Ut(1,e.lens,0,288,sn,0,e.work,{bits:9}),t=0;t<32;)e.lens[t++]=5;Ut(2,e.lens,0,32,an,0,e.work,{bits:5}),rn=!1}e.lencode=sn,e.lenbits=9,e.distcode=an,e.distbits=5},hn=(e,t,n,i)=>{let s;const a=e.state;return null===a.window&&(a.wsize=1<<a.wbits,a.wnext=0,a.whave=0,a.window=new Uint8Array(a.wsize)),i>=a.wsize?(a.window.set(t.subarray(n-a.wsize,n),0),a.wnext=0,a.whave=a.wsize):(s=a.wsize-a.wnext,s>i&&(s=i),a.window.set(t.subarray(n-i,n-i+s),a.wnext),(i-=s)?(a.window.set(t.subarray(n-i,n),0),a.wnext=i,a.whave=a.wsize):(a.wnext+=s,a.wnext===a.wsize&&(a.wnext=0),a.whave<a.wsize&&(a.whave+=s))),0};var ln={inflateReset:en,inflateReset2:tn,inflateResetKeep:Qt,inflateInit:e=>nn(e,15),inflateInit2:nn,inflate:(e,t)=>{let n,i,s,a,r,o,h,l,c,d,f,u,p,b,g,_,m,w,y,v,k,x,C=0;const N=new Uint8Array(4);let z,E;const S=new Uint8Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]);if(Xt(e)||!e.output||!e.input&&0!==e.avail_in)return Rt;n=e.state,n.mode===Ht&&(n.mode=Mt),r=e.next_out,s=e.output,h=e.avail_out,a=e.next_in,i=e.input,o=e.avail_in,l=n.hold,c=n.bits,d=o,f=h,x=Tt;e:for(;;)switch(n.mode){case Lt:if(0===n.wrap){n.mode=Mt;break}for(;c<16;){if(0===o)break e;o--,l+=i[a++]<<c,c+=8}if(2&n.wrap&&35615===l){0===n.wbits&&(n.wbits=15),n.check=0,N[0]=255&l,N[1]=l>>>8&255,n.check=ie(n.check,N,2,0),l=0,c=0,n.mode=16181;break}if(n.head&&(n.head.done=!1),!(1&n.wrap)||(((255&l)<<8)+(l>>8))%31){e.msg="incorrect header check",n.mode=Yt;break}if((15&l)!==Pt){e.msg="unknown compression method",n.mode=Yt;break}if(l>>>=4,c-=4,k=8+(15&l),0===n.wbits&&(n.wbits=k),k>15||k>n.wbits){e.msg="invalid window size",n.mode=Yt;break}n.dmax=1<<n.wbits,n.flags=0,e.adler=n.check=1,n.mode=512&l?16189:Ht,l=0,c=0;break;case 16181:for(;c<16;){if(0===o)break e;o--,l+=i[a++]<<c,c+=8}if(n.flags=l,(255&n.flags)!==Pt){e.msg="unknown compression method",n.mode=Yt;break}if(57344&n.flags){e.msg="unknown header flags set",n.mode=Yt;break}n.head&&(n.head.text=l>>8&1),512&n.flags&&4&n.wrap&&(N[0]=255&l,N[1]=l>>>8&255,n.check=ie(n.check,N,2,0)),l=0,c=0,n.mode=16182;case 16182:for(;c<32;){if(0===o)break e;o--,l+=i[a++]<<c,c+=8}n.head&&(n.head.time=l),512&n.flags&&4&n.wrap&&(N[0]=255&l,N[1]=l>>>8&255,N[2]=l>>>16&255,N[3]=l>>>24&255,n.check=ie(n.check,N,4,0)),l=0,c=0,n.mode=16183;case 16183:for(;c<16;){if(0===o)break e;o--,l+=i[a++]<<c,c+=8}n.head&&(n.head.xflags=255&l,n.head.os=l>>8),512&n.flags&&4&n.wrap&&(N[0]=255&l,N[1]=l>>>8&255,n.check=ie(n.check,N,2,0)),l=0,c=0,n.mode=16184;case 16184:if(1024&n.flags){for(;c<16;){if(0===o)break e;o--,l+=i[a++]<<c,c+=8}n.length=l,n.head&&(n.head.extra_len=l),512&n.flags&&4&n.wrap&&(N[0]=255&l,N[1]=l>>>8&255,n.check=ie(n.check,N,2,0)),l=0,c=0}else n.head&&(n.head.extra=null);n.mode=16185;case 16185:if(1024&n.flags&&(u=n.length,u>o&&(u=o),u&&(n.head&&(k=n.head.extra_len-n.length,n.head.extra||(n.head.extra=new Uint8Array(n.head.extra_len)),n.head.extra.set(i.subarray(a,a+u),k)),512&n.flags&&4&n.wrap&&(n.check=ie(n.check,i,u,a)),o-=u,a+=u,n.length-=u),n.length))break e;n.length=0,n.mode=16186;case 16186:if(2048&n.flags){if(0===o)break e;u=0;do{k=i[a+u++],n.head&&k&&n.length<65536&&(n.head.name+=String.fromCharCode(k))}while(k&&u<o);if(512&n.flags&&4&n.wrap&&(n.check=ie(n.check,i,u,a)),o-=u,a+=u,k)break e}else n.head&&(n.head.name=null);n.length=0,n.mode=16187;case 16187:if(4096&n.flags){if(0===o)break e;u=0;do{k=i[a+u++],n.head&&k&&n.length<65536&&(n.head.comment+=String.fromCharCode(k))}while(k&&u<o);if(512&n.flags&&4&n.wrap&&(n.check=ie(n.check,i,u,a)),o-=u,a+=u,k)break e}else n.head&&(n.head.comment=null);n.mode=16188;case 16188:if(512&n.flags){for(;c<16;){if(0===o)break e;o--,l+=i[a++]<<c,c+=8}if(4&n.wrap&&l!==(65535&n.check)){e.msg="header crc mismatch",n.mode=Yt;break}l=0,c=0}n.head&&(n.head.hcrc=n.flags>>9&1,n.head.done=!0),e.adler=n.check=0,n.mode=Ht;break;case 16189:for(;c<32;){if(0===o)break e;o--,l+=i[a++]<<c,c+=8}e.adler=n.check=Gt(l),l=0,c=0,n.mode=$t;case $t:if(0===n.havedict)return e.next_out=r,e.avail_out=h,e.next_in=a,e.avail_in=o,n.hold=l,n.bits=c,Vt;e.adler=n.check=1,n.mode=Ht;case Ht:if(t===Bt||t===At)break e;case Mt:if(n.last){l>>>=7&c,c-=7&c,n.mode=Wt;break}for(;c<3;){if(0===o)break e;o--,l+=i[a++]<<c,c+=8}switch(n.last=1&l,l>>>=1,c-=1,3&l){case 0:n.mode=16193;break;case 1:if(on(n),n.mode=qt,t===At){l>>>=2,c-=2;break e}break;case 2:n.mode=16196;break;case 3:e.msg="invalid block type",n.mode=Yt}l>>>=2,c-=2;break;case 16193:for(l>>>=7&c,c-=7&c;c<32;){if(0===o)break e;o--,l+=i[a++]<<c,c+=8}if((65535&l)!==(l>>>16^65535)){e.msg="invalid stored block lengths",n.mode=Yt;break}if(n.length=65535&l,l=0,c=0,n.mode=jt,t===At)break e;case jt:n.mode=16195;case 16195:if(u=n.length,u){if(u>o&&(u=o),u>h&&(u=h),0===u)break e;s.set(i.subarray(a,a+u),r),o-=u,a+=u,h-=u,r+=u,n.length-=u;break}n.mode=Ht;break;case 16196:for(;c<14;){if(0===o)break e;o--,l+=i[a++]<<c,c+=8}if(n.nlen=257+(31&l),l>>>=5,c-=5,n.ndist=1+(31&l),l>>>=5,c-=5,n.ncode=4+(15&l),l>>>=4,c-=4,n.nlen>286||n.ndist>30){e.msg="too many length or distance symbols",n.mode=Yt;break}n.have=0,n.mode=16197;case 16197:for(;n.have<n.ncode;){for(;c<3;){if(0===o)break e;o--,l+=i[a++]<<c,c+=8}n.lens[S[n.have++]]=7&l,l>>>=3,c-=3}for(;n.have<19;)n.lens[S[n.have++]]=0;if(n.lencode=n.lendyn,n.lenbits=7,z={bits:n.lenbits},x=Ut(0,n.lens,0,19,n.lencode,0,n.work,z),n.lenbits=z.bits,x){e.msg="invalid code lengths set",n.mode=Yt;break}n.have=0,n.mode=16198;case 16198:for(;n.have<n.nlen+n.ndist;){for(;C=n.lencode[l&(1<<n.lenbits)-1],g=C>>>24,_=C>>>16&255,m=65535&C,!(g<=c);){if(0===o)break e;o--,l+=i[a++]<<c,c+=8}if(m<16)l>>>=g,c-=g,n.lens[n.have++]=m;else{if(16===m){for(E=g+2;c<E;){if(0===o)break e;o--,l+=i[a++]<<c,c+=8}if(l>>>=g,c-=g,0===n.have){e.msg="invalid bit length repeat",n.mode=Yt;break}k=n.lens[n.have-1],u=3+(3&l),l>>>=2,c-=2}else if(17===m){for(E=g+3;c<E;){if(0===o)break e;o--,l+=i[a++]<<c,c+=8}l>>>=g,c-=g,k=0,u=3+(7&l),l>>>=3,c-=3}else{for(E=g+7;c<E;){if(0===o)break e;o--,l+=i[a++]<<c,c+=8}l>>>=g,c-=g,k=0,u=11+(127&l),l>>>=7,c-=7}if(n.have+u>n.nlen+n.ndist){e.msg="invalid bit length repeat",n.mode=Yt;break}for(;u--;)n.lens[n.have++]=k}}if(n.mode===Yt)break;if(0===n.lens[256]){e.msg="invalid code -- missing end-of-block",n.mode=Yt;break}if(n.lenbits=9,z={bits:n.lenbits},x=Ut(1,n.lens,0,n.nlen,n.lencode,0,n.work,z),n.lenbits=z.bits,x){e.msg="invalid literal/lengths set",n.mode=Yt;break}if(n.distbits=6,n.distcode=n.distdyn,z={bits:n.distbits},x=Ut(2,n.lens,n.nlen,n.ndist,n.distcode,0,n.work,z),n.distbits=z.bits,x){e.msg="invalid distances set",n.mode=Yt;break}if(n.mode=qt,t===At)break e;case qt:n.mode=Kt;case Kt:if(o>=6&&h>=258){e.next_out=r,e.avail_out=h,e.next_in=a,e.avail_in=o,n.hold=l,n.bits=c,xt(e,f),r=e.next_out,s=e.output,h=e.avail_out,a=e.next_in,i=e.input,o=e.avail_in,l=n.hold,c=n.bits,n.mode===Ht&&(n.back=-1);break}for(n.back=0;C=n.lencode[l&(1<<n.lenbits)-1],g=C>>>24,_=C>>>16&255,m=65535&C,!(g<=c);){if(0===o)break e;o--,l+=i[a++]<<c,c+=8}if(_&&0===(240&_)){for(w=g,y=_,v=m;C=n.lencode[v+((l&(1<<w+y)-1)>>w)],g=C>>>24,_=C>>>16&255,m=65535&C,!(w+g<=c);){if(0===o)break e;o--,l+=i[a++]<<c,c+=8}l>>>=w,c-=w,n.back+=w}if(l>>>=g,c-=g,n.back+=g,n.length=m,0===_){n.mode=16205;break}if(32&_){n.back=-1,n.mode=Ht;break}if(64&_){e.msg="invalid literal/length code",n.mode=Yt;break}n.extra=15&_,n.mode=16201;case 16201:if(n.extra){for(E=n.extra;c<E;){if(0===o)break e;o--,l+=i[a++]<<c,c+=8}n.length+=l&(1<<n.extra)-1,l>>>=n.extra,c-=n.extra,n.back+=n.extra}n.was=n.length,n.mode=16202;case 16202:for(;C=n.distcode[l&(1<<n.distbits)-1],g=C>>>24,_=C>>>16&255,m=65535&C,!(g<=c);){if(0===o)break e;o--,l+=i[a++]<<c,c+=8}if(0===(240&_)){for(w=g,y=_,v=m;C=n.distcode[v+((l&(1<<w+y)-1)>>w)],g=C>>>24,_=C>>>16&255,m=65535&C,!(w+g<=c);){if(0===o)break e;o--,l+=i[a++]<<c,c+=8}l>>>=w,c-=w,n.back+=w}if(l>>>=g,c-=g,n.back+=g,64&_){e.msg="invalid distance code",n.mode=Yt;break}n.offset=m,n.extra=15&_,n.mode=16203;case 16203:if(n.extra){for(E=n.extra;c<E;){if(0===o)break e;o--,l+=i[a++]<<c,c+=8}n.offset+=l&(1<<n.extra)-1,l>>>=n.extra,c-=n.extra,n.back+=n.extra}if(n.offset>n.dmax){e.msg="invalid distance too far back",n.mode=Yt;break}n.mode=16204;case 16204:if(0===h)break e;if(u=f-h,n.offset>u){if(u=n.offset-u,u>n.whave&&n.sane){e.msg="invalid distance too far back",n.mode=Yt;break}u>n.wnext?(u-=n.wnext,p=n.wsize-u):p=n.wnext-u,u>n.length&&(u=n.length),b=n.window}else b=s,p=r-n.offset,u=n.length;u>h&&(u=h),h-=u,n.length-=u;do{s[r++]=b[p++]}while(--u);0===n.length&&(n.mode=Kt);break;case 16205:if(0===h)break e;s[r++]=n.length,h--,n.mode=Kt;break;case Wt:if(n.wrap){for(;c<32;){if(0===o)break e;o--,l|=i[a++]<<c,c+=8}if(f-=h,e.total_out+=f,n.total+=f,4&n.wrap&&f&&(e.adler=n.check=n.flags?ie(n.check,s,f,r-f):te(n.check,s,f,r-f)),f=h,4&n.wrap&&(n.flags?l:Gt(l))!==n.check){e.msg="incorrect data check",n.mode=Yt;break}l=0,c=0}n.mode=16207;case 16207:if(n.wrap&&n.flags){for(;c<32;){if(0===o)break e;o--,l+=i[a++]<<c,c+=8}if(4&n.wrap&&l!==(4294967295&n.total)){e.msg="incorrect length check",n.mode=Yt;break}l=0,c=0}n.mode=16208;case 16208:x=It;break e;case Yt:x=Dt;break e;case 16210:return Ft;default:return Rt}return e.next_out=r,e.avail_out=h,e.next_in=a,e.avail_in=o,n.hold=l,n.bits=c,(n.wsize||f!==e.avail_out&&n.mode<Yt&&(n.mode<Wt||t!==Ot))&&hn(e,e.output,e.next_out,f-e.avail_out),d-=e.avail_in,f-=e.avail_out,e.total_in+=d,e.total_out+=f,n.total+=f,4&n.wrap&&f&&(e.adler=n.check=n.flags?ie(n.check,s,f,e.next_out-f):te(n.check,s,f,e.next_out-f)),e.data_type=n.bits+(n.last?64:0)+(n.mode===Ht?128:0)+(n.mode===qt||n.mode===jt?256:0),(0===d&&0===f||t===Ot)&&x===Tt&&(x=Zt),x},inflateEnd:e=>{if(Xt(e))return Rt;let t=e.state;return t.window&&(t.window=null),e.state=null,Tt},inflateGetHeader:(e,t)=>{if(Xt(e))return Rt;const n=e.state;return 0===(2&n.wrap)?Rt:(n.head=t,t.done=!1,Tt)},inflateSetDictionary:(e,t)=>{const n=t.length;let i,s,a;return Xt(e)?Rt:(i=e.state,0!==i.wrap&&i.mode!==$t?Rt:i.mode===$t&&(s=1,s=te(s,t,n,0),s!==i.check)?Dt:(a=hn(e,t,n,n),a?(i.mode=16210,Ft):(i.havedict=1,Tt)))},inflateInfo:"pako inflate (from Nodeca project)"};var cn=function(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1};const dn=Object.prototype.toString,{Z_NO_FLUSH:fn,Z_FINISH:un,Z_OK:pn,Z_STREAM_END:bn,Z_NEED_DICT:gn,Z_STREAM_ERROR:_n,Z_DATA_ERROR:mn,Z_MEM_ERROR:wn}=ae;function yn(e){this.options=st.assign({chunkSize:65536,windowBits:15,to:""},e||{});const t=this.options;t.raw&&t.windowBits>=0&&t.windowBits<16&&(t.windowBits=-t.windowBits,0===t.windowBits&&(t.windowBits=-15)),!(t.windowBits>=0&&t.windowBits<16)||e&&e.windowBits||(t.windowBits+=32),t.windowBits>15&&t.windowBits<48&&0===(15&t.windowBits)&&(t.windowBits|=15),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new ht,this.strm.avail_out=0;let n=ln.inflateInit2(this.strm,t.windowBits);if(n!==pn)throw new Error(se[n]);if(this.header=new cn,ln.inflateGetHeader(this.strm,this.header),t.dictionary&&("string"===typeof t.dictionary?t.dictionary=ot.string2buf(t.dictionary):"[object ArrayBuffer]"===dn.call(t.dictionary)&&(t.dictionary=new Uint8Array(t.dictionary)),t.raw&&(n=ln.inflateSetDictionary(this.strm,t.dictionary),n!==pn)))throw new Error(se[n])}function vn(e,t){const n=new yn(t);if(n.push(e),n.err)throw n.msg||se[n.err];return n.result}yn.prototype.push=function(e,t){const n=this.strm,i=this.options.chunkSize,s=this.options.dictionary;let a,r,o;if(this.ended)return!1;for(r=t===~~t?t:!0===t?un:fn,"[object ArrayBuffer]"===dn.call(e)?n.input=new Uint8Array(e):n.input=e,n.next_in=0,n.avail_in=n.input.length;;){for(0===n.avail_out&&(n.output=new Uint8Array(i),n.next_out=0,n.avail_out=i),a=ln.inflate(n,r),a===gn&&s&&(a=ln.inflateSetDictionary(n,s),a===pn?a=ln.inflate(n,r):a===mn&&(a=gn));n.avail_in>0&&a===bn&&n.state.wrap>0&&0!==e[n.next_in];)ln.inflateReset(n),a=ln.inflate(n,r);switch(a){case _n:case mn:case gn:case wn:return this.onEnd(a),this.ended=!0,!1}if(o=n.avail_out,n.next_out&&(0===n.avail_out||a===bn))if("string"===this.options.to){let e=ot.utf8border(n.output,n.next_out),t=n.next_out-e,s=ot.buf2string(n.output,e);n.next_out=t,n.avail_out=i-t,t&&n.output.set(n.output.subarray(e,e+t),0),this.onData(s)}else this.onData(n.output.length===n.next_out?n.output:n.output.subarray(0,n.next_out));if(a!==pn||0!==o){if(a===bn)return a=ln.inflateEnd(this.strm),this.onEnd(a),this.ended=!0,!0;if(0===n.avail_in)break}}return!0},yn.prototype.onData=function(e){this.chunks.push(e)},yn.prototype.onEnd=function(e){e===pn&&("string"===this.options.to?this.result=this.chunks.join(""):this.result=st.flattenChunks(this.chunks)),this.chunks=[],this.err=e,this.msg=this.strm.msg};var kn={Inflate:yn,inflate:vn,inflateRaw:function(e,t){return(t=t||{}).raw=!0,vn(e,t)},ungzip:vn,constants:ae};const{Deflate:xn,deflate:Cn,deflateRaw:Nn,gzip:zn}=vt,{Inflate:En,inflate:Sn,inflateRaw:Un,ungzip:On}=kn;var Bn=Un;class An extends Error{constructor(e){super(e),this.code="ERR_ABORTED"}}function Tn(e){if(e&&e.aborted){if("undefined"===typeof DOMException){const e=new An("aborted");throw e.code="ERR_ABORTED",e}throw new DOMException("aborted","AbortError")}}function In(e,t,n,i){return e<i&&t>=n}class Vn{constructor(e,t,n,i,a,r){if(this.bbi=e,this.refsByName=t,this.cirTreeOffset=n,this.isBigEndian=i,this.isCompressed=a,this.blockType=r,this.featureCache=new(u())({cache:new(b())({maxSize:1e3}),fill:async(e,t)=>{const n=Number(e.length),i=Number(e.offset),{buffer:a}=await this.bbi.read(s.Buffer.alloc(n),0,n,i,{signal:t});return a}}),!(n>=0))throw new Error("invalid cirTreeOffset!");const o=function(e){const t=e?"big":"little",n=(new d).endianess(t).uint32("chromId").uint32("start").uint32("end").uint32("validCnt").floatle("minScore").floatle("maxScore").floatle("sumData").floatle("sumSqData").saveOffset("offset"),i=(new d).endianess(t).uint8("isLeaf").skip(1).uint16("cnt").choice({tag:"isLeaf",choices:{1:(new d).endianess(t).array("blocksToFetch",{length:"cnt",type:(new d).endianess(t).uint32("startChrom").uint32("startBase").uint32("endChrom").uint32("endBase").uint64("blockOffset").uint64("blockSize").saveOffset("offset")}),0:(new d).array("recurOffsets",{length:"cnt",type:(new d).endianess(t).uint32("startChrom").uint32("startBase").uint32("endChrom").uint32("endBase").uint64("blockOffset").saveOffset("offset")})}}),s=(new d).endianess(t).uint32("chromId").int32("start").int32("end").string("rest",{zeroTerminated:!0}).saveOffset("offset");return{bigWigParser:(new d).endianess(t).skip(4).int32("blockStart").skip(4).uint32("itemStep").uint32("itemSpan").uint8("blockType").skip(1).uint16("itemCount").choice({tag:"blockType",choices:{3:(new d).array("items",{length:"itemCount",type:(new d).floatle("score")}),2:(new d).array("items",{length:"itemCount",type:(new d).endianess(t).int32("start").floatle("score")}),1:(new d).array("items",{length:"itemCount",type:(new d).endianess(t).int32("start").int32("end").floatle("score")})}}),bigBedParser:s,summaryParser:n,leafParser:i}}(i);this.leafParser=o.leafParser,this.bigBedParser=o.bigBedParser}async readWigData(e,t,n,i,a){try{const{refsByName:r,bbi:o,cirTreeOffset:h,isBigEndian:l}=this,c=r[e];void 0===c&&i.complete();const d={chrId:c,start:t,end:n};this.cirTreePromise||(this.cirTreePromise=o.read(s.Buffer.alloc(48),0,48,Number(h),a));const{buffer:f}=await this.cirTreePromise,u=l?f.readUInt32BE(4):f.readUInt32LE(4);let p=[],b=0;const _=(e,t,n)=>{try{const i=e.subarray(t),s=this.leafParser.parse(i);if(s.blocksToFetch&&(p=p.concat(s.blocksToFetch.filter((e=>m(e))).map((e=>({offset:e.blockOffset,length:e.blockSize}))))),s.recurOffsets){const e=s.recurOffsets.filter((e=>m(e))).map((e=>Number(e.blockOffset)));e.length>0&&y(e,n+1)}}catch(s){i.error(s)}},m=e=>{const{startChrom:i,startBase:s,endChrom:a,endBase:r}=e;return(i<c||i===c&&s<=n)&&(a>c||a===c&&r>=t)},w=async(e,t,n)=>{try{const s=t.max-t.min,r=t.min,o=await this.featureCache.get("".concat(s,"_").concat(r),{length:s,offset:r},null===a||void 0===a?void 0:a.signal);for(const h of e)t.contains(h)&&(_(o,h-r,n),b-=1,0===b&&this.readFeatures(i,p,{...a,request:d}).catch((e=>i.error(e))))}catch(s){i.error(s)}},y=(e,t)=>{try{b+=e.length;const n=4+32*Number(u);let i=new g([{min:e[0],max:e[0]+n}]);for(let t=1;t<e.length;t+=1){const s=new g([{min:e[t],max:e[t]+n}]);i=i.union(s)}i.getRanges().map((n=>w(e,n,t)))}catch(n){i.error(n)}};return y([Number(h)+48],1)}catch(r){i.error(r)}}parseSummaryBlock(e,t,n){const i=[];let s=t;const a=new DataView(e.buffer,e.byteOffset,e.length);for(;s<e.byteLength;){const e=a.getUint32(s,!0);s+=4;const t=a.getUint32(s,!0);s+=4;const r=a.getUint32(s,!0);s+=4;const o=a.getUint32(s,!0);s+=4;const h=a.getFloat32(s,!0);s+=4;const l=a.getFloat32(s,!0);s+=4;const c=a.getFloat32(s,!0);s+=4,s+=4,(!n||e===n.chrId&&In(t,r,n.start,n.end))&&i.push({start:t,end:r,maxScore:l,minScore:h,summary:!0,score:c/(o||1)})}return i}parseBigBedBlock(e,t,n,i){const s=[];let a=t;for(;a<e.byteLength;){const t=this.bigBedParser.parse(e.subarray(a));t.uniqueId="bb-".concat(n+a),s.push(t),a+=t.offset}return i?s.filter((e=>In(e.start,e.end,i.start,i.end))):s}parseBigWigBlock(e,t,n){const i=e.subarray(t),s=new DataView(i.buffer,i.byteOffset,i.length);let a=0;a+=4;const r=s.getInt32(a,!0);a+=8;const o=s.getUint32(a,!0);a+=4;const h=s.getUint32(a,!0);a+=4;const l=s.getUint8(a);a+=2;const c=s.getUint16(a,!0);a+=2;const d=new Array(c);switch(l){case 1:for(let e=0;e<c;e++){const t=s.getInt32(a,!0);a+=4;const n=s.getInt32(a,!0);a+=4;const i=s.getFloat32(a,!0);a+=4,d[e]={start:t,end:n,score:i}}break;case 2:for(let e=0;e<c;e++){const t=s.getInt32(a,!0);a+=4;const n=s.getFloat32(a,!0);a+=4,d[e]={score:n,start:t,end:t+h}}break;case 3:for(let e=0;e<c;e++){const t=s.getFloat32(a,!0);a+=4;const n=r+e*o;d[e]={score:t,start:n,end:n+h}}}return n?d.filter((e=>In(e.start,e.end,n.start,n.end))):d}async readFeatures(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};try{const{blockType:i,isCompressed:s}=this,{signal:a,request:r}=n,o=function(e){e.sort(((e,t)=>Number(e.offset)-Number(t.offset)));const t=[];let n,i;for(const s of e)n&&i&&Number(s.offset)-i<=2e3?(n.length=BigInt(Number(n.length)+Number(s.length)-i+Number(s.offset)),n.blocks.push(s)):t.push(n={blocks:[s],length:s.length,offset:s.offset}),i=Number(n.offset)+Number(n.length);return t}(t);Tn(a),await Promise.all(o.map((async t=>{Tn(a);const{length:n,offset:o}=t,h=await this.featureCache.get("".concat(n,"_").concat(o),t,a);for(const c of t.blocks){Tn(a);let n=Number(c.offset)-Number(t.offset),o=h;switch(s&&(l=h.subarray(n),o=Bn(l.subarray(2)),n=0),Tn(a),i){case"summary":e.next(this.parseSummaryBlock(o,n,r));break;case"bigwig":e.next(this.parseBigWigBlock(o,n,r));break;case"bigbed":e.next(this.parseBigBedBlock(o,n,256*Number(c.offset),r));break;default:console.warn("Don't know what to do with ".concat(i))}}var l}))),e.complete()}catch(i){e.error(i)}}}var Rn=n(54856),Dn=n(58989),Fn=n(1301),Zn=n(97151);const Pn=-2003829722,Ln=-2021002517;function $n(e){const t=e?"big":"little",n=(new d).endianess(t).int32("magic").uint16("version").uint16("numZoomLevels").uint64("chromTreeOffset").uint64("unzoomedDataOffset").uint64("unzoomedIndexOffset").uint16("fieldCount").uint16("definedFieldCount").uint64("asOffset").uint64("totalSummaryOffset").uint32("uncompressBufSize").uint64("extHeaderOffset").array("zoomLevels",{length:"numZoomLevels",type:(new d).endianess(t).uint32("reductionLevel").uint32("reserved").uint64("dataOffset").uint64("indexOffset")}),i=(new d).endianess(t).uint64("basesCovered").doublele("scoreMin").doublele("scoreMax").doublele("scoreSum").doublele("scoreSumSquares");return{chromTreeParser:(new d).endianess(t).uint32("magic").uint32("blockSize").uint32("keySize").uint32("valSize").uint64("itemCount"),totalSummaryParser:i,headerParser:n,isLeafNode:(new d).endianess(t).uint8("isLeafNode").skip(1).uint16("cnt").saveOffset("offset")}}class Hn{getHeader(e){return this.headerP||(this.headerP=this._getHeader(e).catch((e=>{throw this.headerP=void 0,e}))),this.headerP}constructor(e){const{filehandle:t,renameRefSeqs:n=(e=>e),path:i,url:s}=e;if(this.renameRefSeqs=n,t)this.bbi=t;else if(s)this.bbi=new Rn.RemoteFile(s);else{if(!i)throw new Error("no file given");this.bbi=new Rn.LocalFile(i)}}async _getHeader(e){const t=await this._getMainHeader(e),n=await this._readChromTree(t,e);return{...t,...n}}async _getMainHeader(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2e3;const{buffer:n}=await this.bbi.read(s.Buffer.alloc(t),0,t,0,e),i=this._isBigEndian(n),a=$n(i),r=a.headerParser.parse(n),{magic:o,asOffset:h,totalSummaryOffset:l}=r;if(r.fileType=o===Ln?"bigbed":"bigwig",h>t||l>t)return this._getMainHeader(e,2*t);if(h){const e=Number(r.asOffset);r.autoSql=(c=n.subarray(e,n.indexOf(0,e)),(new TextDecoder).decode(c))}var c;if(r.totalSummaryOffset>t-40)return this._getMainHeader(e,2*t);if(r.totalSummaryOffset){const e=n.subarray(Number(r.totalSummaryOffset)),t=a.totalSummaryParser.parse(e);r.totalSummary={...t,basesCovered:Number(t.basesCovered)}}return{...r,isBigEndian:i}}_isBigEndian(e){let t=e.readInt32LE(0);if(t===Pn||t===Ln)return!1;if(t=e.readInt32BE(0),t===Pn||t===Ln)return!0;throw new Error("not a BigWig/BigBed file")}async _readChromTree(e,t){const n=e.isBigEndian,i=n?"big":"little",a=[],r={};let o=Number(e.unzoomedDataOffset);const h=Number(e.chromTreeOffset);for(;o%4!==0;)o+=1;const l=o-h,{buffer:c}=await this.bbi.read(s.Buffer.alloc(l),0,l,Number(h),t),f=$n(n),{keySize:u}=f.chromTreeParser.parse(c),p=(new d).endianess(i).string("key",{stripNull:!0,length:u}).uint32("refId").uint32("refSize").saveOffset("offset"),b=(new d).endianess(i).skip(u).uint64("childOffset").saveOffset("offset"),g=async e=>{let t=e;if(t>=c.length)throw new Error("reading beyond end of buffer");const n=f.isLeafNode.parse(c.subarray(t)),{isLeafNode:i,cnt:s}=n;if(t+=n.offset,i)for(let o=0;o<s;o+=1){const e=p.parse(c.subarray(t));t+=e.offset;const{key:n,refId:i,refSize:s}=e,o={name:n,id:i,length:s};r[this.renameRefSeqs(n)]=i,a[i]=o}else{const e=[];for(let n=0;n<s;n+=1){const n=b.parse(c.subarray(t)),{childOffset:i}=n;t+=n.offset,e.push(g(Number(i)-Number(h)))}await Promise.all(e)}};return await g(32),{refsByName:r,refsByNumber:a}}async getUnzoomedView(e){const{unzoomedIndexOffset:t,refsByName:n,uncompressBufSize:i,isBigEndian:s,fileType:a}=await this.getHeader(e);return new Vn(this.bbi,n,t,s,i>0,a)}async getFeatureStream(e,t,n,i){await this.getHeader(i);const s=this.renameRefSeqs(e);let a;const{basesPerSpan:r,scale:o}=i||{};return a=r?await this.getView(1/r,i):o?await this.getView(o,i):await this.getView(1,i),new Dn.c((e=>{a.readWigData(s,t,n,e,i)}))}async getFeatures(e,t,n,i){const s=await this.getFeatureStream(e,t,n,i);return(await(0,Fn._)(s.pipe((0,Zn.$)()))).flat()}}class Mn extends Hn{async getView(e,t){const{zoomLevels:n,refsByName:i,fileSize:s,isBigEndian:a,uncompressBufSize:r}=await this.getHeader(t),o=1/e;let h=n.length;s||(h-=1);for(let l=h;l>=0;l-=1){const e=n[l];if(e&&e.reductionLevel<=2*o){const t=Number(e.indexOffset);return new Vn(this.bbi,i,t,a,r>0,"summary")}}return this.getUnzoomedView(t)}}var jn=n(41108),qn=n(76405),Kn=n(43879);class Wn extends Hn{constructor(){super(...arguments),this.readIndicesCache=new(u())({cache:new(b())({maxSize:1}),fill:(e,t)=>this._readIndices({...e,signal:t})})}readIndices(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{signal:t,...n}=e;return this.readIndicesCache.get(JSON.stringify(n),e,t)}async getView(e,t){return this.getUnzoomedView(t)}async _readIndices(e){const{extHeaderOffset:t,isBigEndian:n}=await this.getHeader(e),{buffer:i}=await this.bbi.read(s.Buffer.alloc(64),0,64,Number(t)),a=n?"big":"little",r=(new d).endianess(a).uint16("size").uint16("count").uint64("offset").parse(i),{count:o,offset:h}=r;if(0===o)return[];const l=20*o,{buffer:c}=await this.bbi.read(s.Buffer.alloc(l),0,l,Number(h)),f=(new d).endianess(a).int16("type").int16("fieldcount").uint64("offset").skip(4).int16("field"),u=[];for(let s=0;s<o;s+=1)u.push(f.parse(c.subarray(20*s)));return u}async searchExtraIndexBlocks(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const{isBigEndian:n}=await this.getHeader(t),i=await this.readIndices(t);if(0===i.length)return[];const a=i.map((async i=>{const{offset:a,field:r}=i,{buffer:o}=await this.bbi.read(s.Buffer.alloc(32),0,32,Number(a),t),h=n?"big":"little",l=(new d).endianess(h).int32("magic").int32("blockSize").int32("keySize").int32("valSize").uint64("itemCount"),{blockSize:c,keySize:f,valSize:u}=l.parse(o),p=(new d).endianess(h).int8("nodeType").skip(1).int16("cnt").choice({tag:"nodeType",choices:{0:(new d).array("leafkeys",{length:"cnt",type:(new d).endianess(h).string("key",{length:f,stripNull:!0}).uint64("offset")}),1:(new d).array("keys",{length:"cnt",type:(new d).endianess(h).string("key",{length:f,stripNull:!0}).uint64("offset").uint32("length").uint32("reserved")})}}),b=async n=>{const i=Number(n),a=4+c*(f+u),{buffer:o}=await this.bbi.read(s.Buffer.alloc(a),0,a,i,t),h=p.parse(o);if(h.leafkeys){let t;for(let n=0;n<h.leafkeys.length;n+=1){const{key:i}=h.leafkeys[n];if(e.localeCompare(i)<0&&t)return b(t);t=h.leafkeys[n].offset}return b(t)}for(let t=0;t<h.keys.length;t+=1)if(h.keys[t].key===e)return{...h.keys[t],field:r}};return b(Number(a)+32)}));return(await Promise.all(a)).filter((e=>!!e))}async searchExtraIndex(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const n=await this.searchExtraIndexBlocks(e,t);if(0===n.length)return[];const i=await this.getUnzoomedView(t),s=n.map((e=>new Dn.c((n=>{i.readFeatures(n,[e],t)})).pipe((0,qn.T)(((e,t)=>e.concat(t))),(0,Kn.T)((t=>{for(const n of t)n.field=e.field;return t})))));return(await(0,Fn._)((0,jn.h)(...s))).filter((t=>{var n;return(null===(n=t.rest)||void 0===n?void 0:n.split("\t")[(t.field||0)-3])===e}))}}}}]);
//# sourceMappingURL=3583.13cb5436.chunk.js.map