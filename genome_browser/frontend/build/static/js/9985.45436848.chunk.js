"use strict";(self.webpackChunkfrontend=self.webpackChunkfrontend||[]).push([[9985],{9985:(e,t,n)=>{n.d(t,{drawFeats:()=>f});var o=n(91775),r=n(23746),s=n(61959),a=n(95805);function i(e){return 2*Math.random()*e-e}function l(e,t,n,o){e.strokeStyle=o,e.beginPath(),e.moveTo(t,0),e.lineTo(t,n),e.stroke()}function f(e,t,n,f){const{chainData:d,colorBy:c,drawInter:g,drawLongRange:h,lineWidthSetting:u,jitterVal:v}=e;if(!d)return;const m=(0,o.getContainingView)(e),{assemblyManager:k}=(0,o.getSession)(e),{chains:y,stats:P}=d,S=(0,a.d)(d),p=k.get(m.assemblyNames[0]),b=(null===c||void 0===c?void 0:c.type)||"insertSizeAndOrientation";if(p){t.lineWidth=u;for(const e of y)if(1===e.length&&h){const t=e[0];if(!S||8&t.flags){const e=[t,...(0,s.Cu)(t.SA,t.id,t.strand,t.name)].sort(((e,t)=>e.clipPos-t.clipPos));for(let t=0;t<e.length-1;t++){x(e[t],e[t+1],p,!0)}}else{x(t,{refName:t.next_ref||"",start:t.next_pos||0,end:t.next_pos||0,strand:t.strand},p,!0)}}else{const t=S?e.filter((e=>!(2048&e.flags)&&!(8&e.flags))):e.sort(((e,t)=>e.clipPos-t.clipPos)).filter((e=>!(256&e.flags)));for(let e=0;e<t.length-1;e++)x(t[e],t[e+1],p,!1)}}function x(e,n,o,s){var a,d,c;const h=e.strand,u=n.strand,k=-1===u,y=-1===h?e.start:e.end,p=S?k?n.start:n.end:k?n.end:n.start,x=o.getCanonicalRefName(e.refName)||e.refName,N=o.getCanonicalRefName(n.refName)||n.refName,C=null===(a=m.bpToPx({refName:x,coord:y}))||void 0===a?void 0:a.offsetPx,T=null===(d=m.bpToPx({refName:N,coord:p}))||void 0===d?void 0:d.offsetPx;if(void 0!==C&&void 0!==T){const o=(T-C)/2,a=Math.abs(o),d=C-m.offsetPx,g=T-m.offsetPx,k=a>1e4;s&&k?(t.moveTo(d,0),t.beginPath()):(t.beginPath(),t.moveTo(d,0)),s&&k?t.strokeStyle="red":S?"insertSizeAndOrientation"===b?t.strokeStyle=(0,r.sY)(e,n,P)[0]:"orientation"===b?t.strokeStyle=(0,r.DW)(e)[0]:"insertSize"===b?t.strokeStyle=(null===(c=(0,r.L9)(e,n,P))||void 0===c?void 0:c[0])||"grey":"gradient"===b&&(t.strokeStyle="hsl(".concat(10*Math.log10(a),",50%,50%)")):"orientation"===b||"insertSizeAndOrientation"===b?t.strokeStyle=-1===h&&1===u?"navy":1===h&&-1===u?"green":"grey":"gradient"===b&&(t.strokeStyle="hsl(".concat(10*Math.log10(a),",50%,50%)"));const y=d+2*o,p=Math.min(f+i(v),a);s?a>1e5?(l(t,d+i(v),f,"red"),l(t,g+i(v),f,"red")):k?(t.arc(d+o+i(v),0,a,0,Math.PI),t.stroke()):(t.bezierCurveTo(d+i(v),p,y,p,y+i(v),0),t.stroke()):(t.bezierCurveTo(d+i(v),p,y,p,y+i(v),0),t.stroke())}else C&&g&&l(t,C-m.offsetPx,f,"purple")}}},95805:(e,t,n)=>{function o(e){for(const t of e.chains.values())if(1&t[0].flags)return!0;return!1}n.d(t,{d:()=>o})}}]);
//# sourceMappingURL=9985.45436848.chunk.js.map