"use strict";(self.webpackChunkfrontend=self.webpackChunkfrontend||[]).push([[7479],{97479:(t,e,o)=>{o.d(e,{drawFeats:()=>l});var a=o(91775),n=o(95805),f=o(98779);function s(t,e,o,a,n,f){o<0&&(t+=o,o=-o),a<0&&(e+=a,a=-a),f&&(n.fillStyle=f),n.fillRect(t,e,o,a)}function i(t,e,o,a,n,f){o<0&&(t+=o,o=-o),a<0&&(e+=a,a=-a),f&&(n.strokeStyle=f),n.strokeRect(t,e,o,a)}var r=o(23746);function c(t){let{type:e,v0:o,v1:a,stats:n}=t;if("insertSizeAndOrientation"===e)return(0,r.sY)(o,a,n);if("orientation"===e)return(0,r.DW)(o);if("insertSize"===e)return(0,r.L9)(o,a,n);if("gradient"===e){const t=Math.min(o.start,a.start),e=Math.max(o.end,a.end);return["hsl(".concat(10*Math.log10(Math.abs(e-t)),",50%,50%)"),"hsl(".concat(10*Math.log10(Math.abs(e-t)),",50%,30%)")]}}function l(t,e){const{chainData:o}=t;if(!o)return;const{assemblyManager:l}=(0,a.getSession)(t),d=(0,a.getContainingView)(t),m=d.assemblyNames[0],v=l.get(m);if(!v)return;(0,n.d)(o)?function(t){let{ctx:e,self:o,chainData:n,view:r,asm:l}=t;var d,m,v,h,x,u,N;const g=[],P=(0,f.getConf)(o,"featureHeight"),M=(null===(d=o.colorBy)||void 0===d?void 0:d.type)||"insertSizeAndOrientation",{chains:p,stats:b}=n;for(const a of p)if(a.length>1){const t=a[0],e=a[1],o=l.getCanonicalRefName(t.refName)||t.refName,n=l.getCanonicalRefName(e.refName)||e.refName,f=null===(m=r.bpToPx({refName:o,coord:t.start}))||void 0===m?void 0:m.offsetPx,s=null===(v=r.bpToPx({refName:o,coord:t.end}))||void 0===v?void 0:v.offsetPx,i=null===(h=r.bpToPx({refName:n,coord:e.start}))||void 0===h?void 0:h.offsetPx,c=null===(x=r.bpToPx({refName:n,coord:e.end}))||void 0===x?void 0:x.offsetPx;let d=0;if(void 0!==f&&void 0!==s&&void 0!==i&&void 0!==c){if(t.refName===e.refName){const o=Math.min(t.start,e.start),a=Math.max(t.end,e.end);d=Math.abs(a-o)}g.push({r1s:f,r1e:s,r2s:i,r2e:c,v0:t,v1:e,distance:d})}}else if(o.drawSingletons){const t=a[0],o=l.getCanonicalRefName(t.refName)||t.refName,n=null===(u=r.bpToPx({refName:o,coord:t.start}))||void 0===u?void 0:u.offsetPx,f=null===(N=r.bpToPx({refName:o,coord:t.end}))||void 0===N?void 0:N.offsetPx;if(void 0!==n&&void 0!==f){const t=Math.max(f-n,2);s(n-r.offsetPx,0,t,P,e,"#f00"),i(n-r.offsetPx,0,t,P,e,"#a00")}}const w=Math.log((0,a.max)(g.map((t=>t.distance)))),C=Math.max(Math.log((0,a.min)(g.map((t=>t.distance))))-1,0),T=(o.height-20)/(w-C);for(const{r1e:a,r1s:f,r2e:k,r2s:y,distance:S,v0:R,v1:A}of g){const t=Math.max(a-f,2),o=Math.max(k-y,2),[n,l]=c({type:M,v0:R,v1:A,stats:b})||[],d=(Math.log(S)-C)*T,m=P/2-.5,v=y-a;s(a-r.offsetPx,d+m,v,1,e,"black"),i(f-r.offsetPx,d,t,P,e,l),i(y-r.offsetPx,d,o,P,e,l),s(f-r.offsetPx,d,t,P,e,n),s(y-r.offsetPx,d,o,P,e,n)}}({self:t,view:d,asm:v,ctx:e,chainData:o}):function(t){let{ctx:e,self:o,chainData:n,view:c,asm:l}=t;var d,m,v,h,x;const u=[],N=[],{chains:g}=n,{height:P}=o,M=(0,f.getConf)(o,"featureHeight");for(const a of g){let t=Number.MAX_VALUE,e=Number.MIN_VALUE;for(const n of a){const o=l.getCanonicalRefName(n.refName)||n.refName,a=null===(d=c.bpToPx({refName:o,coord:n.start}))||void 0===d?void 0:d.offsetPx,f=null===(m=c.bpToPx({refName:o,coord:n.end}))||void 0===m?void 0:m.offsetPx;void 0!==a&&void 0!==f&&(t=Math.min(t,a),e=Math.max(e,f))}const o=Math.abs(e-t);u.push(o),N.push(t)}const p=Math.log((0,a.max)(u)),b=Math.max(Math.log((0,a.min)(u))-1,0),w=(P-20)/(p-b),C=M/2-.5;for(let a=0;a<g.length;a++){const t=g[a],o=u[a],n=(Math.log(o)-b)*w;s(N[a]-c.offsetPx,n+C,o,1,e,"black");const f=t[0];let d;d=2048&f.flags?"-"===(null===(v=f.SA)||void 0===v?void 0:v.split(";")[0].split(",")[2])?-1:1:f.strand;for(const a of t){const t=l.getCanonicalRefName(a.refName)||a.refName,o=null===(h=c.bpToPx({refName:t,coord:a.start}))||void 0===h?void 0:h.offsetPx,f=null===(x=c.bpToPx({refName:t,coord:a.end}))||void 0===x?void 0:x.offsetPx;if(void 0!==o&&void 0!==f){const t=Math.max(f-o,2),l=o-c.offsetPx,m=-1===a.strand*d?"color_rev_strand":"color_fwd_strand";i(l,n,t,M,e,r.w7[m]),s(l,n,t,M,e,r.pf[m])}}}}({self:t,view:d,asm:v,ctx:e,chainData:o})}},95805:(t,e,o)=>{function a(t){for(const e of t.chains.values())if(1&e[0].flags)return!0;return!1}o.d(e,{d:()=>a})}}]);
//# sourceMappingURL=7479.6d087c77.chunk.js.map