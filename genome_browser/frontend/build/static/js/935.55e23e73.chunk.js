"use strict";(self.webpackChunkfrontend=self.webpackChunkfrontend||[]).push([[935],{60935:(e,t,n)=>{n.r(t),n.d(t,{default:()=>D});var l=n(65043),a=n(94496),r=n(72882),i=n(42788),s=n(56894),o=n(71716),c=n(6762),m=n(69570),u=n(70276),d=n(96233),g=n(31913),p=n(95629),E=n(91775),v=n(21337),A=n(10155),f=n(47030),h=n(71062),y=n(69392),k=n(80216),b=n(74802),S=n(17555),x=n(19301);const C=(0,l.lazy)((()=>n.e(9529).then(n.bind(n,19529)))),P=(0,u.makeStyles)()((()=>({lockedPluginTooltip:{marginRight:"0.5rem"}})));function M(){const{classes:e}=P();return l.createElement(y.A,{className:e.lockedPluginTooltip,title:"This plugin was installed by an administrator, you cannot remove it."},l.createElement(S.A,null))}const w=(0,d.observer)((function(e){let{plugin:t,model:n}=e;var r;const[i,s]=(0,l.useState)(),{pluginManager:c}=(0,E.getEnv)(n),m=(0,E.getSession)(n),{jbrowse:u,adminMode:d}=m,g=!!(0,x.isSessionWithSessionPlugins)(m)&&(null===(r=m.sessionPlugins)||void 0===r?void 0:r.some((e=>c.pluginMetadata[t.name].url===e.url)));return l.createElement(l.Fragment,null,i?l.createElement(l.Suspense,{fallback:null},l.createElement(C,{plugin:i,onClose:e=>{if(e){const e=c.pluginMetadata[t.name];d?u.removePlugin(e):(0,x.isSessionWithSessionPlugins)(m)&&m.removeSessionPlugin(e)}s(void 0)}})):null,l.createElement(k.Ay,{key:t.name},d||g?l.createElement(o.A,{"data-testid":"removePlugin-".concat(t.name),onClick:()=>s(t.name)},l.createElement(b.default,null)):l.createElement(M,null),l.createElement(a.A,null,t.name)))})),j=(0,d.observer)((function(e){let{pluginManager:t,model:n}=e;const{plugins:r}=t,{filterText:i}=n,s=r.filter((e=>{var n;return!(null===(n=t.pluginMetadata[e.name])||void 0===n?void 0:n.isCore)}));return l.createElement(h.A,null,s.length>0?s.filter((e=>e.name.toLowerCase().includes(i.toLowerCase()))).map((e=>l.createElement(w,{key:e.name,plugin:e,model:n}))):l.createElement(a.A,null,"No plugins currently installed"))}));var I=n(59314),T=n(98056),N=n(91598),L=n(70352),z=n(52177),F=n(22505),R=n(95382);const W=(0,u.makeStyles)()({card:{margin:"0.5em"},icon:{marginLeft:"0.5em",marginRight:"0.5em"},bold:{fontWeight:600},dataField:{display:"flex",alignItems:"center"}}),B=(0,d.observer)((function(e){let{plugin:t,model:n,adminMode:i}=e;const{classes:s}=W(),o=(0,E.getSession)(n),{pluginManager:c}=(0,E.getEnv)(n),{runtimePluginDefinitions:m}=c,u=m.some((e=>e.url===t.url)),[d,p]=(0,l.useState)(!1),v=u||d,A=(0,g.getParent)(n,3),{jbrowse:f}=A;return l.createElement(I.A,{variant:"outlined",key:t.name,className:s.card},l.createElement(T.A,null,l.createElement(a.A,{variant:"h5"},l.createElement(N.A,{href:"".concat(t.location,"#readme"),target:"_blank",rel:"noopener"},t.name)),l.createElement("div",{className:s.dataField},l.createElement(z.A,{style:{marginRight:"0.5em"}}),l.createElement(a.A,null,t.authors.join(", "))),l.createElement(a.A,{className:s.bold},"Description:"),l.createElement(a.A,null,t.description)),l.createElement(L.A,null,l.createElement(r.A,{variant:"contained",disabled:v,startIcon:u?l.createElement(R.A,null):l.createElement(F.A,null),onClick:()=>{i?f.addPlugin({name:t.name,url:t.url}):(0,x.isSessionWithSessionPlugins)(o)&&o.addSessionPlugin(t),p(!0)}},u?"Installed":"Install")))}));const H=(0,l.lazy)((()=>n.e(2590).then(n.bind(n,72590)))),V=(0,u.makeStyles)()((e=>({expandIcon:{color:e.palette.tertiary.contrastText},adminBadge:{borderRadius:3,backgroundColor:e.palette.quaternary.main,padding:"1em",display:"flex",alignContent:"center"},customPluginButton:{margin:"1em auto",display:"flex"}}))),D=(0,d.observer)((function(e){let{model:t}=e;const{classes:n}=V(),{plugins:u,error:d}=function(){const[e,t]=(0,l.useState)(),[n,a]=(0,l.useState)();return(0,l.useEffect)((()=>{(async()=>{try{const e=await fetch("https://jbrowse.org/plugin-store/plugins.json");if(!e.ok){const t=await e.text();throw new Error("HTTP ".concat(e.status," fetching plugins: ").concat(t))}const n=await e.json();t(n.plugins)}catch(e){console.error(e),a(e)}})()}),[]),{plugins:e,error:n}}(),[h,y]=(0,l.useState)(!1),{adminMode:k}=(0,E.getSession)(t),{pluginManager:b}=(0,g.getEnv)(t);return l.createElement("div",null,k&&l.createElement(l.Fragment,null,!E.isElectron&&l.createElement("div",{className:n.adminBadge},l.createElement(f.A,{style:{marginRight:"0.3em"}}),l.createElement(a.A,null,"You are using the ",l.createElement("code",null,"admin-server"),". Any changes you make will be saved to your configuration file. You also have the ability to add custom plugins that are not in the store.")),l.createElement(r.A,{className:n.customPluginButton,variant:"contained",onClick:()=>y(!0)},"Add custom plugin"),h?l.createElement(l.Suspense,{fallback:null},l.createElement(H,{onClose:()=>y(!1),model:t})):null),l.createElement(i.A,{label:"Filter plugins",value:t.filterText,onChange:e=>t.setFilterText(e.target.value),fullWidth:!0,InputProps:{endAdornment:l.createElement(s.A,{position:"end"},l.createElement(o.A,{onClick:()=>t.clearFilterText()},l.createElement(A.A,null)))}}),l.createElement(c.A,{defaultExpanded:!0},l.createElement(m.A,{expandIcon:l.createElement(v.default,{className:n.expandIcon})},l.createElement(a.A,{variant:"h5"},"Installed plugins")),l.createElement("div",{style:{margin:"1em"}},l.createElement(j,{pluginManager:b,model:t}))),l.createElement(c.A,{defaultExpanded:!0},l.createElement(m.A,{expandIcon:l.createElement(v.default,{className:n.expandIcon})},l.createElement(a.A,{variant:"h5"},"Available plugins")),d?l.createElement(a.A,{color:"error"},"".concat(d)):u?u.filter((e=>!(E.isElectron&&e.cjsUrl)&&e.name.toLowerCase().includes(t.filterText.toLowerCase()))).map((e=>l.createElement(B,{key:e.name,plugin:e,model:t,adminMode:!!k}))):l.createElement(p.LoadingEllipses,null)))}))},95382:(e,t,n)=>{var l=n(24994);t.A=void 0;var a=l(n(40039)),r=n(70579);t.A=(0,a.default)((0,r.jsx)("path",{d:"M9 16.17 4.83 12l-1.42 1.41L9 19 21 7l-1.41-1.41z"}),"Check")},10155:(e,t,n)=>{var l=n(24994);t.A=void 0;var a=l(n(40039)),r=n(70579);t.A=(0,a.default)((0,r.jsx)("path",{d:"M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"}),"Clear")},47030:(e,t,n)=>{var l=n(24994);t.A=void 0;var a=l(n(40039)),r=n(70579);t.A=(0,a.default)((0,r.jsx)("path",{d:"M11 7h2v2h-2zm0 4h2v6h-2zm1-9C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2m0 18c-4.41 0-8-3.59-8-8s3.59-8 8-8 8 3.59 8 8-3.59 8-8 8"}),"InfoOutlined")},17555:(e,t,n)=>{var l=n(24994);t.A=void 0;var a=l(n(40039)),r=n(70579);t.A=(0,a.default)((0,r.jsx)("path",{d:"M18 8h-1V6c0-2.76-2.24-5-5-5S7 3.24 7 6v2H6c-1.1 0-2 .9-2 2v10c0 1.1.9 2 2 2h12c1.1 0 2-.9 2-2V10c0-1.1-.9-2-2-2m-6 9c-1.1 0-2-.9-2-2s.9-2 2-2 2 .9 2 2-.9 2-2 2m3.1-9H8.9V6c0-1.71 1.39-3.1 3.1-3.1 1.71 0 3.1 1.39 3.1 3.1z"}),"Lock")},52177:(e,t,n)=>{var l=n(24994);t.A=void 0;var a=l(n(40039)),r=n(70579);t.A=(0,a.default)((0,r.jsx)("path",{d:"M12 12c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4m0 2c-2.67 0-8 1.34-8 4v2h16v-2c0-2.66-5.33-4-8-4"}),"Person")}}]);
//# sourceMappingURL=935.55e23e73.chunk.js.map