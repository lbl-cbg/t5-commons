"use strict";(self.webpackChunkfrontend=self.webpackChunkfrontend||[]).push([[3709],{3709:(e,t,n)=>{n.r(t),n.d(t,{default:()=>$e});var i=n(65043),r=n(96233);let o;o="undefined"!==typeof window?window:"undefined"!==typeof self?self:n.g;let l=null,a=null;const s=o.clearTimeout,c=o.setTimeout,d=o.cancelAnimationFrame||o.mozCancelAnimationFrame||o.webkitCancelAnimationFrame,u=o.requestAnimationFrame||o.mozRequestAnimationFrame||o.webkitRequestAnimationFrame;function h(e){let t,n,i,r,s,c,d;const u="undefined"!==typeof document&&document.attachEvent;if(!u){c=function(e){const t=e.__resizeTriggers__,n=t.firstElementChild,i=t.lastElementChild,r=n.firstElementChild;i.scrollLeft=i.scrollWidth,i.scrollTop=i.scrollHeight,r.style.width=n.offsetWidth+1+"px",r.style.height=n.offsetHeight+1+"px",n.scrollLeft=n.scrollWidth,n.scrollTop=n.scrollHeight},s=function(e){return e.offsetWidth!==e.__resizeLast__.width||e.offsetHeight!==e.__resizeLast__.height},d=function(e){if(e.target.className&&"function"===typeof e.target.className.indexOf&&e.target.className.indexOf("contract-trigger")<0&&e.target.className.indexOf("expand-trigger")<0)return;const t=this;c(this),this.__resizeRAF__&&l(this.__resizeRAF__),this.__resizeRAF__=a((function(){s(t)&&(t.__resizeLast__.width=t.offsetWidth,t.__resizeLast__.height=t.offsetHeight,t.__resizeListeners__.forEach((function(n){n.call(t,e)})))}))};let e=!1,o="";i="animationstart";const u="Webkit Moz O ms".split(" ");let h="webkitAnimationStart animationstart oAnimationStart MSAnimationStart".split(" "),f="";{const t=document.createElement("fakeelement");if(void 0!==t.style.animationName&&(e=!0),!1===e)for(let n=0;n<u.length;n++)if(void 0!==t.style[u[n]+"AnimationName"]){f=u[n],o="-"+f.toLowerCase()+"-",i=h[n],e=!0;break}}n="resizeanim",t="@"+o+"keyframes "+n+" { from { opacity: 0; } to { opacity: 0; } } ",r=o+"animation: 1ms "+n+"; "}return{addResizeListener:function(l,a){if(u)l.attachEvent("onresize",a);else{if(!l.__resizeTriggers__){const a=l.ownerDocument,s=o.getComputedStyle(l);s&&"static"===s.position&&(l.style.position="relative"),function(n){if(!n.getElementById("detectElementResize")){const i=(t||"")+".resize-triggers { "+(r||"")+'visibility: hidden; opacity: 0; } .resize-triggers, .resize-triggers > div, .contract-trigger:before { content: " "; display: block; position: absolute; top: 0; left: 0; height: 100%; width: 100%; overflow: hidden; z-index: -1; } .resize-triggers > div { background: #eee; overflow: auto; } .contract-trigger:before { width: 200%; height: 200%; }',o=n.head||n.getElementsByTagName("head")[0],l=n.createElement("style");l.id="detectElementResize",l.type="text/css",null!=e&&l.setAttribute("nonce",e),l.styleSheet?l.styleSheet.cssText=i:l.appendChild(n.createTextNode(i)),o.appendChild(l)}}(a),l.__resizeLast__={},l.__resizeListeners__=[],(l.__resizeTriggers__=a.createElement("div")).className="resize-triggers";const u=a.createElement("div");u.className="expand-trigger",u.appendChild(a.createElement("div"));const h=a.createElement("div");h.className="contract-trigger",l.__resizeTriggers__.appendChild(u),l.__resizeTriggers__.appendChild(h),l.appendChild(l.__resizeTriggers__),c(l),l.addEventListener("scroll",d,!0),i&&(l.__resizeTriggers__.__animationListener__=function(e){e.animationName===n&&c(l)},l.__resizeTriggers__.addEventListener(i,l.__resizeTriggers__.__animationListener__))}l.__resizeListeners__.push(a)}},removeResizeListener:function(e,t){if(u)e.detachEvent("onresize",t);else if(e.__resizeListeners__.splice(e.__resizeListeners__.indexOf(t),1),!e.__resizeListeners__.length){e.removeEventListener("scroll",d,!0),e.__resizeTriggers__.__animationListener__&&(e.__resizeTriggers__.removeEventListener(i,e.__resizeTriggers__.__animationListener__),e.__resizeTriggers__.__animationListener__=null);try{e.__resizeTriggers__=!e.removeChild(e.__resizeTriggers__)}catch(n){}}}}}null==d||null==u?(l=s,a=function(e){return c(e,20)}):(l=function(e){let[t,n]=e;d(t),s(n)},a=function(e){const t=u((function(){s(n),e()})),n=c((function(){d(t),e()}),20);return[t,n]});class f extends i.Component{constructor(){super(...arguments),this.state={height:this.props.defaultHeight||0,scaledHeight:this.props.defaultHeight||0,scaledWidth:this.props.defaultWidth||0,width:this.props.defaultWidth||0},this._autoSizer=null,this._detectElementResize=null,this._parentNode=null,this._resizeObserver=null,this._timeoutId=null,this._onResize=()=>{this._timeoutId=null;const{disableHeight:e,disableWidth:t,onResize:n}=this.props;if(this._parentNode){const i=window.getComputedStyle(this._parentNode)||{},r=parseFloat(i.paddingLeft||"0"),o=parseFloat(i.paddingRight||"0"),l=parseFloat(i.paddingTop||"0"),a=parseFloat(i.paddingBottom||"0"),s=this._parentNode.getBoundingClientRect(),c=s.height-l-a,d=s.width-r-o,u=this._parentNode.offsetHeight-l-a,h=this._parentNode.offsetWidth-r-o;(e||this.state.height===u&&this.state.scaledHeight===c)&&(t||this.state.width===h&&this.state.scaledWidth===d)||(this.setState({height:u,width:h,scaledHeight:c,scaledWidth:d}),"function"===typeof n&&n({height:u,scaledHeight:c,scaledWidth:d,width:h}))}},this._setRef=e=>{this._autoSizer=e}}componentDidMount(){const{nonce:e}=this.props,t=this._autoSizer?this._autoSizer.parentNode:null;if(null!=t&&t.ownerDocument&&t.ownerDocument.defaultView&&t instanceof t.ownerDocument.defaultView.HTMLElement){this._parentNode=t;const n=t.ownerDocument.defaultView.ResizeObserver;null!=n?(this._resizeObserver=new n((()=>{this._timeoutId=setTimeout(this._onResize,0)})),this._resizeObserver.observe(t)):(this._detectElementResize=h(e),this._detectElementResize.addResizeListener(t,this._onResize)),this._onResize()}}componentWillUnmount(){this._parentNode&&(this._detectElementResize&&this._detectElementResize.removeResizeListener(this._parentNode,this._onResize),null!==this._timeoutId&&clearTimeout(this._timeoutId),this._resizeObserver&&this._resizeObserver.disconnect())}render(){const{children:e,defaultHeight:t,defaultWidth:n,disableHeight:r=!1,disableWidth:o=!1,doNotBailOutOnEmptyChildren:l=!1,nonce:a,onResize:s,style:c={},tagName:d="div",...u}=this.props,{height:h,scaledHeight:f,scaledWidth:m,width:p}=this.state,g={overflow:"visible"},v={};let _=!1;return r||(0===h&&(_=!0),g.height=0,v.height=h,v.scaledHeight=f),o||(0===p&&(_=!0),g.width=0,v.width=p,v.scaledWidth=m),l&&(_=!1),(0,i.createElement)(d,{ref:this._setRef,style:{...g,...c},...u},!_&&e(v))}}var m=n(33936),p=n(27e3),g=n(94814),v=n(70276),_=n(91775),b=n(22505);const S=(0,v.makeStyles)()((e=>({fab:{position:"absolute",bottom:e.spacing(6),right:e.spacing(6)}}))),k=(0,r.observer)((function(e){let{model:t}=e;const{classes:n}=S(),r=(0,_.getSession)(t),[o,l]=(0,i.useState)(null);function a(){l(null)}const s=(0,_.isSessionModelWithConnections)(r),c=(0,_.isSessionWithAddTracks)(r);return i.createElement(i.Fragment,null,c||s?i.createElement(i.Fragment,null,i.createElement(m.A,{color:"secondary",className:n.fab,onClick:e=>l(e.currentTarget)},i.createElement(b.A,null)),i.createElement(p.A,{anchorEl:o,open:Boolean(o),onClose:()=>l(null)},s?i.createElement(g.A,{onClick:()=>{a(),(0,_.isSessionModelWithWidgets)(r)&&r.showWidget(r.addWidget("AddConnectionWidget","addConnectionWidget"))}},"Add connection"):null,c?i.createElement(g.A,{onClick:()=>{a(),(0,_.isSessionModelWithWidgets)(r)&&r.showWidget(r.addWidget("AddTrackWidget","addTrackWidget",{view:t.view.id}))}},"Add track"):null)):null)}));var y=n(58168),C=n(9417),E=n(25540);const z=function(e){return function(t){e.forEach((function(e){"function"===typeof e?e(t):null!=e&&(e.current=t)}))}};var I=function(){},w=function(e,t){return void 0===t&&(t=null),{child:null,isShown:!t||t.public.isOpen&&t.isShown,parent:t,public:e,sibling:null,visited:!1}},T=function(e,t){return(0,t.getRecordData)(e).data.id},A=function(e){return function(t,n,i){return i.refresh?function(e,t,n){var i=e.createRecord,r=t.buildingTaskTimeout,o=t.placeholder,l=t.async,a=void 0!==l&&l,s=t.treeWalker,c=a&&void 0!==n.records,d=n.records,u=[],h=new Map,f=r?{timeout:r}:void 0,m=new WeakMap,p=s(),g=p.next().value,v=i(g.data,n,void 0,c?d.get(g.data.id):void 0);h.set(v.public.data.id,v),m.set(v,g);var _=v,b=!0,S=v,k=void 0!==o&&!(null===o&&!n.order),y=k?function(e){return e.timeRemaining()>0}:function(){return!0},C=function e(t){for(;null!==_;){if(!y(t))return void requestIdleCallback(e,f);if(_.visited)_.visited=!1,_=null!==_.sibling?_.sibling:_.parent,S=_;else{var r=p.next(m.get(_)).value;if(void 0===r){b?b=!1:(_.isShown&&u.push(_.public.data.id),_.visited=null!==_.child,_=null!==_.child?_.child:null!==_.sibling?_.sibling:_.parent),S=_;continue}var o=i(r.data,n,b?void 0:_,c?d.get(r.data.id):void 0);h.set(o.public.data.id,o),m.set(o,r),b||S!==_?S.sibling=o:S.child=o,S=o}}k&&n.setState({order:u,records:h,updateRequest:{}})};return k?requestIdleCallback(C,f):C(),void 0!==o&&a&&n.order?n:{order:u,records:h}}(e,t,n):function(e,t){var n=e.order,i=e.records,r=t.opennessState;if("object"!==typeof r)return null;for(var o in r)if(i.has(o)){var l=r[o],a=i.get(o),s="boolean"===typeof l?{open:l}:l,c=s.open,d=s.subtreeCallback,u=void 0===d?I:d,h=I,f=I;a.isShown&&(c?function(){for(var e=n.indexOf(o),t=a;null!==t;){if(null!==t.sibling){t=t.sibling;break}t=t.parent}var i=null===t?n.length-1-e:n.indexOf(t.public.data.id)-1-e,r=[[e+1,i]];h=function(t){if(t.isShown=!t.parent||t.parent.public.isOpen&&t.parent.isShown,t.isShown){var n=r[r.length-1];n.push(t.public.data.id),32770===n.length&&r.push([e+1+32768*r.length,0])}},f=function(){for(var e=0;e<r.length;e++){var t;(t=n).splice.apply(t,r[e])}}}():a.public.isOpen&&function(){var e=n.indexOf(o),t=0;h=function(e){e.isShown&&(t+=1),e.isShown=!e.parent||e.parent.public.isOpen&&e.parent.isShown},f=function(){n.splice(e+1,t)}}());for(var m=a;null!==m;)m.visited?(m.visited=!1,m=m===a?null:null!==m.sibling?m.sibling:m.parent):(m.public.isOpen=m===a?c:m.public.isOpen,u(m.public,a.public),m!==a&&h(m),m.visited=null!==m.child,m=null!==m.child?m.child:m===a?null:null!==m.sibling?m.sibling:m.parent);f()}return{order:n,records:i,updateRequest:{}}}(n,i)}},x=function(e){function t(t,n){var r;return(r=e.call(this,t,n)||this).getRecordData=r.getRecordData.bind((0,C.A)(r)),r.state={list:(0,i.createRef)(),recomputeTree:r.recomputeTree.bind((0,C.A)(r)),setState:r.setState.bind((0,C.A)(r))},r}(0,E.A)(t,e),t.getDerivedStateFromProps=function(e,t){var n=e.listRef,i=void 0===n?null:n,r=e.treeWalker,o=t.computeTree,l=t.list,a=t.order,s=t.treeWalker;return(0,y.A)({attachRefs:z([l,i])},r===s&&a?null:o(e,t,{refresh:!0}),{treeWalker:r})};var n=t.prototype;return n.getItemData=function(){var e=this.props,t=e.children,n=e.itemData;return{component:t,getRecordData:this.getRecordData,treeData:n}},n.getRecordData=function(e){var t=this.state,n=t.order;return t.records.get(n[e]).public},n.recomputeTree=function(e){var t=this;return new Promise((function(n){t.setState((function(n){return n.computeTree(t.props,n,{opennessState:e})}),n)}))},n.scrollTo=function(e){var t;null==(t=this.state.list.current)||t.scrollTo(e)},n.scrollToItem=function(e,t){var n;null==(n=this.state.list.current)||n.scrollToItem(this.state.order.indexOf(e),t)},t}(i.PureComponent);x.defaultProps={rowComponent:function(e){var t=e.index,n=e.data,r=n.component,o=n.getRecordData,l=n.treeData,a=e.style,s=e.isScrolling,c=o(t);return i.createElement(r,Object.assign({isScrolling:s,style:a,treeData:l},c))}};const R=x;A({createRecord:function(e,t,n,i){var r=t.recomputeTree;return w({data:e,isOpen:i?i.public.isOpen:e.isOpenByDefault,setOpen:function(t){var n;return r(((n={})[e.id]=t,n))}},n)}});var O=n(98587),M=Number.isNaN||function(e){return"number"===typeof e&&e!==e};function W(e,t){if(e.length!==t.length)return!1;for(var n=0;n<e.length;n++)if(i=e[n],r=t[n],!(i===r||M(i)&&M(r)))return!1;var i,r;return!0}const L=function(e,t){var n;void 0===t&&(t=W);var i,r=[],o=!1;return function(){for(var l=[],a=0;a<arguments.length;a++)l[a]=arguments[a];return o&&n===this&&t(l,r)||(i=e.apply(this,l),o=!0,n=this,r=l),i}};var N="object"===typeof performance&&"function"===typeof performance.now?function(){return performance.now()}:function(){return Date.now()};function D(e){cancelAnimationFrame(e.id)}function F(e,t){var n=N();var i={id:requestAnimationFrame((function r(){N()-n>=t?e.call(null):i.id=requestAnimationFrame(r)}))};return i}var H=-1;function P(e){if(void 0===e&&(e=!1),-1===H||e){var t=document.createElement("div"),n=t.style;n.width="50px",n.height="50px",n.overflow="scroll",document.body.appendChild(t),H=t.offsetWidth-t.clientWidth,document.body.removeChild(t)}return H}var B=null;function U(e){if(void 0===e&&(e=!1),null===B||e){var t=document.createElement("div"),n=t.style;n.width="50px",n.height="50px",n.overflow="scroll",n.direction="rtl";var i=document.createElement("div"),r=i.style;return r.width="100px",r.height="100px",t.appendChild(i),document.body.appendChild(t),t.scrollLeft>0?B="positive-descending":(t.scrollLeft=1,B=0===t.scrollLeft?"negative":"positive-ascending"),document.body.removeChild(t),B}return B}var j=function(e,t){return e};function q(e){var t,n=e.getItemOffset,r=e.getEstimatedTotalSize,o=e.getItemSize,l=e.getOffsetForIndexAndAlignment,a=e.getStartIndexForOffset,s=e.getStopIndexForStartIndex,c=e.initInstanceProps,d=e.shouldResetStyleCacheOnItemSizeChange,u=e.validateProps;return t=function(e){function t(t){var i;return(i=e.call(this,t)||this)._instanceProps=c(i.props,(0,C.A)(i)),i._outerRef=void 0,i._resetIsScrollingTimeoutId=null,i.state={instance:(0,C.A)(i),isScrolling:!1,scrollDirection:"forward",scrollOffset:"number"===typeof i.props.initialScrollOffset?i.props.initialScrollOffset:0,scrollUpdateWasRequested:!1},i._callOnItemsRendered=void 0,i._callOnItemsRendered=L((function(e,t,n,r){return i.props.onItemsRendered({overscanStartIndex:e,overscanStopIndex:t,visibleStartIndex:n,visibleStopIndex:r})})),i._callOnScroll=void 0,i._callOnScroll=L((function(e,t,n){return i.props.onScroll({scrollDirection:e,scrollOffset:t,scrollUpdateWasRequested:n})})),i._getItemStyle=void 0,i._getItemStyle=function(e){var t,r=i.props,l=r.direction,a=r.itemSize,s=r.layout,c=i._getItemStyleCache(d&&a,d&&s,d&&l);if(c.hasOwnProperty(e))t=c[e];else{var u=n(i.props,e,i._instanceProps),h=o(i.props,e,i._instanceProps),f="horizontal"===l||"horizontal"===s,m="rtl"===l,p=f?u:0;c[e]=t={position:"absolute",left:m?void 0:p,right:m?p:void 0,top:f?0:u,height:f?"100%":h,width:f?h:"100%"}}return t},i._getItemStyleCache=void 0,i._getItemStyleCache=L((function(e,t,n){return{}})),i._onScrollHorizontal=function(e){var t=e.currentTarget,n=t.clientWidth,r=t.scrollLeft,o=t.scrollWidth;i.setState((function(e){if(e.scrollOffset===r)return null;var t=i.props.direction,l=r;if("rtl"===t)switch(U()){case"negative":l=-r;break;case"positive-descending":l=o-n-r}return l=Math.max(0,Math.min(l,o-n)),{isScrolling:!0,scrollDirection:e.scrollOffset<l?"forward":"backward",scrollOffset:l,scrollUpdateWasRequested:!1}}),i._resetIsScrollingDebounced)},i._onScrollVertical=function(e){var t=e.currentTarget,n=t.clientHeight,r=t.scrollHeight,o=t.scrollTop;i.setState((function(e){if(e.scrollOffset===o)return null;var t=Math.max(0,Math.min(o,r-n));return{isScrolling:!0,scrollDirection:e.scrollOffset<t?"forward":"backward",scrollOffset:t,scrollUpdateWasRequested:!1}}),i._resetIsScrollingDebounced)},i._outerRefSetter=function(e){var t=i.props.outerRef;i._outerRef=e,"function"===typeof t?t(e):null!=t&&"object"===typeof t&&t.hasOwnProperty("current")&&(t.current=e)},i._resetIsScrollingDebounced=function(){null!==i._resetIsScrollingTimeoutId&&D(i._resetIsScrollingTimeoutId),i._resetIsScrollingTimeoutId=F(i._resetIsScrolling,150)},i._resetIsScrolling=function(){i._resetIsScrollingTimeoutId=null,i.setState({isScrolling:!1},(function(){i._getItemStyleCache(-1,null)}))},i}(0,E.A)(t,e),t.getDerivedStateFromProps=function(e,t){return V(e,t),u(e),null};var h=t.prototype;return h.scrollTo=function(e){e=Math.max(0,e),this.setState((function(t){return t.scrollOffset===e?null:{scrollDirection:t.scrollOffset<e?"forward":"backward",scrollOffset:e,scrollUpdateWasRequested:!0}}),this._resetIsScrollingDebounced)},h.scrollToItem=function(e,t){void 0===t&&(t="auto");var n=this.props,i=n.itemCount,r=n.layout,o=this.state.scrollOffset;e=Math.max(0,Math.min(e,i-1));var a=0;if(this._outerRef){var s=this._outerRef;a="vertical"===r?s.scrollWidth>s.clientWidth?P():0:s.scrollHeight>s.clientHeight?P():0}this.scrollTo(l(this.props,e,t,o,this._instanceProps,a))},h.componentDidMount=function(){var e=this.props,t=e.direction,n=e.initialScrollOffset,i=e.layout;if("number"===typeof n&&null!=this._outerRef){var r=this._outerRef;"horizontal"===t||"horizontal"===i?r.scrollLeft=n:r.scrollTop=n}this._callPropsCallbacks()},h.componentDidUpdate=function(){var e=this.props,t=e.direction,n=e.layout,i=this.state,r=i.scrollOffset;if(i.scrollUpdateWasRequested&&null!=this._outerRef){var o=this._outerRef;if("horizontal"===t||"horizontal"===n)if("rtl"===t)switch(U()){case"negative":o.scrollLeft=-r;break;case"positive-ascending":o.scrollLeft=r;break;default:var l=o.clientWidth,a=o.scrollWidth;o.scrollLeft=a-l-r}else o.scrollLeft=r;else o.scrollTop=r}this._callPropsCallbacks()},h.componentWillUnmount=function(){null!==this._resetIsScrollingTimeoutId&&D(this._resetIsScrollingTimeoutId)},h.render=function(){var e=this.props,t=e.children,n=e.className,o=e.direction,l=e.height,a=e.innerRef,s=e.innerElementType,c=e.innerTagName,d=e.itemCount,u=e.itemData,h=e.itemKey,f=void 0===h?j:h,m=e.layout,p=e.outerElementType,g=e.outerTagName,v=e.style,_=e.useIsScrolling,b=e.width,S=this.state.isScrolling,k="horizontal"===o||"horizontal"===m,C=k?this._onScrollHorizontal:this._onScrollVertical,E=this._getRangeToRender(),z=E[0],I=E[1],w=[];if(d>0)for(var T=z;T<=I;T++)w.push((0,i.createElement)(t,{data:u,key:f(T,u),index:T,isScrolling:_?S:void 0,style:this._getItemStyle(T)}));var A=r(this.props,this._instanceProps);return(0,i.createElement)(p||g||"div",{className:n,onScroll:C,ref:this._outerRefSetter,style:(0,y.A)({position:"relative",height:l,width:b,overflow:"auto",WebkitOverflowScrolling:"touch",willChange:"transform",direction:o},v)},(0,i.createElement)(s||c||"div",{children:w,ref:a,style:{height:k?"100%":A,pointerEvents:S?"none":void 0,width:k?A:"100%"}}))},h._callPropsCallbacks=function(){if("function"===typeof this.props.onItemsRendered&&this.props.itemCount>0){var e=this._getRangeToRender(),t=e[0],n=e[1],i=e[2],r=e[3];this._callOnItemsRendered(t,n,i,r)}if("function"===typeof this.props.onScroll){var o=this.state,l=o.scrollDirection,a=o.scrollOffset,s=o.scrollUpdateWasRequested;this._callOnScroll(l,a,s)}},h._getRangeToRender=function(){var e=this.props,t=e.itemCount,n=e.overscanCount,i=this.state,r=i.isScrolling,o=i.scrollDirection,l=i.scrollOffset;if(0===t)return[0,0,0,0];var c=a(this.props,l,this._instanceProps),d=s(this.props,c,l,this._instanceProps),u=r&&"backward"!==o?1:Math.max(1,n),h=r&&"forward"!==o?1:Math.max(1,n);return[Math.max(0,c-u),Math.max(0,Math.min(t-1,d+h)),c,d]},t}(i.PureComponent),t.defaultProps={direction:"ltr",itemData:void 0,layout:"vertical",overscanCount:2,useIsScrolling:!1},t}var V=function(e,t){e.children,e.direction,e.height,e.layout,e.innerTagName,e.outerTagName,e.width,t.instance},K=function(e,t,n){var i=e.itemSize,r=n.itemMetadataMap,o=n.lastMeasuredIndex;if(t>o){var l=0;if(o>=0){var a=r[o];l=a.offset+a.size}for(var s=o+1;s<=t;s++){var c=i(s);r[s]={offset:l,size:c},l+=c}n.lastMeasuredIndex=t}return r[t]},G=function(e,t,n,i,r){for(;i<=n;){var o=i+Math.floor((n-i)/2),l=K(e,o,t).offset;if(l===r)return o;l<r?i=o+1:l>r&&(n=o-1)}return i>0?i-1:0},J=function(e,t,n,i){for(var r=e.itemCount,o=1;n<r&&K(e,n,t).offset<i;)n+=o,o*=2;return G(e,t,Math.min(n,r-1),Math.floor(n/2),i)},Q=function(e,t){var n=e.itemCount,i=t.itemMetadataMap,r=t.estimatedItemSize,o=t.lastMeasuredIndex,l=0;if(o>=n&&(o=n-1),o>=0){var a=i[o];l=a.offset+a.size}return l+(n-o-1)*r},X=q({getItemOffset:function(e,t,n){return K(e,t,n).offset},getItemSize:function(e,t,n){return n.itemMetadataMap[t].size},getEstimatedTotalSize:Q,getOffsetForIndexAndAlignment:function(e,t,n,i,r,o){var l=e.direction,a=e.height,s=e.layout,c=e.width,d="horizontal"===l||"horizontal"===s?c:a,u=K(e,t,r),h=Q(e,r),f=Math.max(0,Math.min(h-d,u.offset)),m=Math.max(0,u.offset-d+u.size+o);switch("smart"===n&&(n=i>=m-d&&i<=f+d?"auto":"center"),n){case"start":return f;case"end":return m;case"center":return Math.round(m+(f-m)/2);default:return i>=m&&i<=f?i:i<m?m:f}},getStartIndexForOffset:function(e,t,n){return function(e,t,n){var i=t.itemMetadataMap,r=t.lastMeasuredIndex;return(r>0?i[r].offset:0)>=n?G(e,t,r,0,n):J(e,t,Math.max(0,r),n)}(e,n,t)},getStopIndexForStartIndex:function(e,t,n,i){for(var r=e.direction,o=e.height,l=e.itemCount,a=e.layout,s=e.width,c="horizontal"===r||"horizontal"===a?s:o,d=K(e,t,i),u=n+c,h=d.offset+d.size,f=t;f<l-1&&h<u;)f++,h+=K(e,f,i).size;return f},initInstanceProps:function(e,t){var n={itemMetadataMap:{},estimatedItemSize:e.estimatedItemSize||50,lastMeasuredIndex:-1};return t.resetAfterIndex=function(e,i){void 0===i&&(i=!0),n.lastMeasuredIndex=Math.min(n.lastMeasuredIndex,e-1),t._getItemStyleCache(-1),i&&t.forceUpdate()},n},shouldResetStyleCacheOnItemSizeChange:!1,validateProps:function(e){e.itemSize}});var Y=A({createRecord:function(e,t,n,i){var r=t.recomputeTree,o=t.resetAfterId,l=w({data:e,height:i?i.public.height:e.defaultHeight,isOpen:i?i.public.isOpen:e.isOpenByDefault,resize:function(e,t){l.public.height=e,o(l.public.data.id,t)},setOpen:function(t){var n;return r(((n={})[e.id]=t,n))}},n);return l}}),Z=function(e){function t(t,n){var i;return(i=e.call(this,t,n)||this).getItemSize=i.getItemSize.bind((0,C.A)(i)),i.state=(0,y.A)({},i.state,{computeTree:Y,resetAfterId:i.resetAfterId.bind((0,C.A)(i))}),i}(0,E.A)(t,e);var n=t.prototype;return n.resetAfterId=function(e,t){var n;void 0===t&&(t=!1);var i=this.state,r=i.list,o=i.order;null==(n=r.current)||n.resetAfterIndex(o.indexOf(e),t)},n.recomputeTree=function(t){var n=this;return e.prototype.recomputeTree.call(this,t).then((function(){var e;null==(e=n.state.list.current)||e.resetAfterIndex(0,!0)}))},n.render=function(){var e=this.props,t=(e.children,e.placeholder),n=e.itemSize,r=e.rowComponent,o=(e.treeWalker,(0,O.A)(e,["children","placeholder","itemSize","rowComponent","treeWalker"])),l=this.state,a=l.attachRefs,s=l.order;return t&&0===s.length?t:i.createElement(X,Object.assign({},o,{itemCount:s.length,itemData:this.getItemData(),itemKey:T,itemSize:null!=n?n:this.getItemSize,ref:a}),r)},n.getItemSize=function(e){return this.getRecordData(e).height},t}(R),$=n(94496),ee=n(71716),te=n(63026),ne=n.n(te),ie=n(40430),re=n(88221),oe=n(4055);function le(e){return"category"===(null===e||void 0===e?void 0:e.type)?e.children.map((e=>"category"===e.type?le(e):e.conf)).flat(1/0):[]}function ae(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new Map;e.id&&e.children.length&&t.set(e.id,e);for(const n of e.children)ae(n,t);return t}function se(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return e.endsWith("(Unsupported)")||e.endsWith("(Unknown)")}const ce=(0,v.makeStyles)()((e=>({contrastColor:{color:e.palette.tertiary.contrastText},accordionText:{margin:"auto 0",width:"100%"}})));function de(e){let{isOpen:t,setOpen:n,data:r}=e;const{classes:o}=ce(),[l,a]=(0,i.useState)(null),{menuItems:s=[],name:c,model:d,id:u,tree:h}=r;return i.createElement("div",{className:o.accordionText,onClick:()=>{l||(r.toggleCollapse(u),n(!t))}},i.createElement($.A,null,t?i.createElement(ie.default,null):i.createElement(re.default,null),c,i.createElement(ee.A,{onClick:e=>{a(e.currentTarget),e.stopPropagation()},className:o.contrastColor},i.createElement(oe.A,null))),l?i.createElement(ne(),{anchorEl:l,menuItems:[{label:"Add to selection",onClick:()=>{const e=ae(h).get(u);d.addToSelection(le(e))}},{label:"Remove from selection",onClick:()=>{const e=ae(h).get(u);d.removeFromSelection(le(e))}},{label:"Show all tracks",onClick:()=>{var e;for(const t of(null===(e=ae(h).get(u))||void 0===e?void 0:e.children)||[])"track"===t.type&&d.view.showTrack(t.trackId)}},{label:"Hide all tracks",onClick:()=>{var e;for(const t of(null===(e=ae(h).get(u))||void 0===e?void 0:e.children)||[])"track"===t.type&&d.view.hideTrack(t.trackId)}},...s],onMenuItemClick:(e,t)=>{t(),a(null)},open:Boolean(l),onClose:()=>a(null)}):null)}var ue=n(69392),he=n(99784),fe=n(1273),me=n(54893),pe=n.n(me),ge=n(98779),ve=n(72387);const _e=(0,v.makeStyles)()((e=>({compactCheckbox:{padding:0},checkboxLabel:{marginRight:0,"&:hover":{backgroundColor:e.palette.action.selected}},selected:{background:"#cccc"}})));function be(e){let{data:t}=e;const{classes:n}=_e(),{checked:r,conf:o,model:l,drawerPosition:a,id:s,trackId:c,name:d,onChange:u,selected:h}=t,f=o&&(0,ge.readConfObject)(o,"description")||"";return i.createElement(i.Fragment,null,i.createElement(ue.A,{title:f+(h?" (in selection)":""),placement:"left"===a?"right":"left"},i.createElement(he.A,{className:n.checkboxLabel,control:i.createElement(fe.A,{className:n.compactCheckbox,checked:r,onChange:()=>u(c),disabled:se(d),inputProps:{"data-testid":"htsTrackEntry-".concat(s)}}),label:i.createElement("div",{"data-testid":"htsTrackLabel-".concat(s),style:{background:h?"#cccc":void 0}},i.createElement(pe(),{html:d}))})),i.createElement(ve.A,{model:l,trackId:c,id:s,conf:o}))}const Se=(0,v.makeStyles)()((e=>({accordionBase:{display:"flex"},accordionCard:{padding:3,cursor:"pointer",display:"flex"},nestingLevelMarker:{position:"absolute",borderLeft:"1.5px solid #555"},accordionColor:{background:e.palette.tertiary.main,color:e.palette.tertiary.contrastText,width:"100%",display:"flex",paddingLeft:5}})));function ke(e){let{data:t,isOpen:n,style:r,setOpen:o}=e;const{isLeaf:l,nestingLevel:a}=t,{classes:s}=Se(),c=10*a+(l?10:0);return i.createElement("div",{style:r,className:l?void 0:s.accordionBase},new Array(a).fill(0).map(((e,t)=>i.createElement("div",{key:"mark-".concat(t),style:{left:10*t+4,height:null===r||void 0===r?void 0:r.height},className:s.nestingLevelMarker}))),i.createElement("div",{className:l?void 0:s.accordionCard,style:{marginLeft:c,whiteSpace:"nowrap",width:"100%"}},i.createElement("div",{className:l?void 0:s.accordionColor},l?i.createElement(be,{data:t}):i.createElement(de,{isOpen:n,data:t,setOpen:o}))))}function ye(e,t,n,i){const r="track"===e.type;return{data:{defaultHeight:r?22:40,isLeaf:r,isOpenByDefault:!0,nestingLevel:t,selected:!!r&&i[e.trackId],...e,...n},nestingLevel:t,node:e}}const Ce=(0,r.observer)((function(e){let{height:t,tree:n,model:r}=e;const{filterText:o,selection:l,view:a}=r,s=(0,i.useRef)(null),c=(0,_.getSession)(r),{drawerPosition:d}=c,u=(0,i.useMemo)((()=>Object.fromEntries(l.map((e=>[e.trackId,e])))),[l]),h=(0,i.useMemo)((()=>({onChange:e=>{a.toggleTrack(e)&&r.addToRecentlyUsed(e)},toggleCollapse:e=>r.toggleCategory(e),tree:n,model:r,drawerPosition:d})),[a,r,d,n]),f=(0,i.useCallback)((function*(){for(const e of n.children)yield ye(e,0,h,u);for(;;){const e=yield;for(const t of e.node.children)yield ye(t,e.nestingLevel+1,h,u)}}),[n,h,u]);return(0,i.useEffect)((()=>{s.current.recomputeTree({refreshNodes:!0,useDefaultHeight:!0})}),[n,o]),i.createElement(i.Fragment,null,i.createElement(Z,{ref:s,treeWalker:f,height:t},ke))}));var Ee=n(42788),ze=n(56894),Ie=n(10155),we=n(16615),Te=n.n(we),Ae=n(89611);const xe=(0,i.lazy)((()=>n.e(4856).then(n.bind(n,24856)))),Re=(0,i.lazy)((()=>n.e(2796).then(n.bind(n,72796)))),Oe=(0,i.lazy)((()=>n.e(3161).then(n.bind(n,43161)))),Me=(0,i.lazy)((()=>n.e(4148).then(n.bind(n,24148)))),We=(0,i.lazy)((()=>n.e(321).then(n.bind(n,80321)))),Le=(0,r.observer)((function(e){let{model:t}=e;const n=(0,_.getSession)(t),[r,o]=(0,i.useState)(),[l,a]=(0,i.useState)(),[s,c]=(0,i.useState)(!1),[d,u]=(0,i.useState)(!1),[h,f]=(0,i.useState)(!1);function m(e,t){var i;const r=(0,ge.readConfObject)(e,"name"),l=null===(i=n.prepareToBreakConnection)||void 0===i?void 0:i.call(n,e);if(l){const[t,n]=l;Object.keys(n).length>0?o({connectionConf:e,safelyBreakConnection:t,dereferenceTypeCount:n,name:r}):t()}t&&a({name:r,connectionConf:e})}return i.createElement(i.Fragment,null,i.createElement(Te(),{menuItems:[{label:"Open faceted track selector",onClick:()=>{f(!0)}},...(0,_.isSessionWithAddTracks)(n)?[{label:"Add track...",onClick:()=>{(0,_.isSessionModelWithWidgets)(n)&&n.showWidget(n.addWidget("AddTrackWidget","addTrackWidget",{view:t.view.id}))}}]:[],{label:"Connections...",subMenu:[...(0,_.isSessionModelWithConnections)(n)?[{label:"Turn on/off connections...",onClick:()=>c(!0)}]:[],...(0,_.isSessionModelWithConnectionEditing)(n)?[{label:"Add connection...",onClick:()=>{(0,_.isSessionModelWithWidgets)(n)&&n.showWidget(n.addWidget("AddConnectionWidget","addConnectionWidget"))}},{label:"Delete connections...",onClick:()=>u(!0)}]:[]]},{label:"Sort...",type:"subMenu",subMenu:[{label:"Sort tracks by name",type:"checkbox",checked:t.activeSortTrackNames,onClick:()=>t.setSortTrackNames(!t.activeSortTrackNames)},{label:"Sort categories by name",type:"checkbox",checked:t.activeSortCategories,onClick:()=>t.setSortCategories(!t.activeSortCategories)}]},{label:"Collapse...",type:"subMenu",subMenu:[...t.hasAnySubcategories?[{label:"Collapse subcategories",onClick:()=>t.collapseSubCategories()}]:[],{label:"Collapse top-level categories",onClick:()=>t.collapseTopLevelCategories()},{label:"Expand all categories",onClick:()=>t.expandAllCategories()}]}]},i.createElement(Ae.A,null)),i.createElement(i.Suspense,{fallback:null},r?i.createElement(Re,{modalInfo:r,onClose:()=>o(void 0)}):null,l?i.createElement(Oe,{handleClose:()=>a(void 0),deleteDialogDetails:l,session:n}):null,d?i.createElement(Me,{handleClose:()=>u(!1),breakConnection:m,session:n}):null,s?i.createElement(We,{handleClose:()=>c(!1),session:n,breakConnection:m}):null,h?i.createElement(xe,{handleClose:()=>f(!1),model:t}):null))}));var Ne=n(94682),De=n(26641),Fe=n(58729),He=n(19871);const Pe=(0,r.observer)((function(e){let{model:t,tracks:n,extraMenuItems:r,children:o,onClick:l}=e;const{view:a}=t,[s,c]=(0,i.useState)(!1),d=(0,_.getSession)(t);return a?i.createElement(Te(),{closeAfterItemClick:!1,onClick:l,menuItems:[...n.map((e=>({type:"checkbox",label:i.createElement(i.Fragment,null,i.createElement(pe(),{html:(0,He.getTrackName)(e,d)})," ",i.createElement(ve.A,{id:e.trackId,trackId:e.trackId,model:t,conf:e,setOpen:c,stopPropagation:!0})),checked:a.tracks.some((t=>t.configuration===e)),onClick:()=>{s||t.view.toggleTrack(e.trackId)&&t.addToRecentlyUsed(e.trackId)}}))),...r]},o):null})),Be=(0,v.makeStyles)()({smallBadge:{height:14},margin:{marginRight:10}}),Ue=(0,r.observer)((function(e){let{model:t}=e;const{classes:n}=Be(),{view:r,favoriteTracks:o}=t;return r?i.createElement(Pe,{onClick:()=>t.setFavoritesCounter(0),tracks:o,model:t,extraMenuItems:o.length?[{type:"divider"},{label:"Clear favorites",onClick:()=>t.clearFavorites()}]:[{label:"No favorite tracks yet",onClick:()=>{}}]},i.createElement(ue.A,{title:"Favorite tracks"},i.createElement(De.A,{classes:{badge:n.smallBadge},color:"secondary",anchorOrigin:{vertical:"bottom",horizontal:"right"},className:n.margin,badgeContent:t.favoritesCounter},i.createElement(Fe.A,null)))):null}));var je=n(61958);const qe=(0,v.makeStyles)()({smallBadge:{height:14}}),Ve=(0,r.observer)((function(e){let{model:t}=e;const{classes:n}=qe(),{view:r,recentlyUsedCounter:o,recentlyUsedTracks:l}=t;return r?i.createElement(Pe,{onClick:()=>t.setRecentlyUsedCounter(0),model:t,tracks:l,extraMenuItems:l.length?[{type:"divider"},{label:"Clear recently used",onClick:()=>t.clearRecentlyUsed()}]:[{label:"No recently used",onClick:()=>{}}]},i.createElement(ue.A,{title:"Recently used tracks"},i.createElement(De.A,{classes:{badge:n.smallBadge},anchorOrigin:{vertical:"bottom",horizontal:"right"},color:"secondary",badgeContent:o},i.createElement(je.A,null)))):null})),Ke=(0,v.makeStyles)()((e=>({searchBox:{margin:e.spacing(2)}}))),Ge=(0,r.observer)((function(e){let{model:t}=e;const{filterText:n}=t,{classes:r}=Ke();return i.createElement(Ee.A,{className:r.searchBox,label:"Filter tracks",value:n,onChange:e=>t.setFilterText(e.target.value),fullWidth:!0,InputProps:{endAdornment:i.createElement(ze.A,{position:"end"},i.createElement(ee.A,{onClick:()=>t.clearFilterText()},i.createElement(Ie.A,null)))}})})),Je=(0,r.observer)((function(e){let{model:t,setHeaderHeight:n}=e;return i.createElement("div",{ref:e=>n((null===e||void 0===e?void 0:e.getBoundingClientRect().height)||0),"data-testid":"hierarchical_track_selector"},i.createElement("div",{style:{display:"flex"}},i.createElement(Le,{model:t}),i.createElement(Ne.A,{model:t}),i.createElement(Ge,{model:t}),i.createElement(Ve,{model:t}),i.createElement(Ue,{model:t})))})),Qe=e=>{let{tree:t,model:n,offset:r}=e;return"undefined"===typeof jest?i.createElement(f,{disableWidth:!0},(e=>i.createElement(Ce,{height:(e.height||r)-r,model:n,tree:t}))):i.createElement(Ce,{height:9e3,model:n,tree:t})},Xe=e=>{let{overrideDimensions:t,children:n}=e;return t?i.createElement("div",{style:{...t}},n):i.createElement(i.Fragment,null,n)},Ye=(0,r.observer)((function(e){let{model:t,toolbarHeight:n,overrideDimensions:r}=e;return i.createElement(Xe,{overrideDimensions:r},i.createElement(Ze,{model:t,toolbarHeight:n}),i.createElement(k,{model:t}))})),Ze=(0,r.observer)((function(e){let{model:t,toolbarHeight:n=0}=e;const[r,o]=(0,i.useState)(0);return i.createElement(i.Fragment,null,i.createElement(Je,{model:t,setHeaderHeight:o}),i.createElement(Qe,{tree:t.hierarchy,model:t,offset:n+r}))})),$e=Ye},94682:(e,t,n)=>{n.d(t,{A:()=>d});var i=n(65043),r=n(26641),o=n(96233),l=n(91775),a=n(61334),s=n(16615),c=n.n(s);const d=(0,o.observer)((function(e){let{model:t}=e;const{selection:n}=t,{pluginManager:o}=(0,l.getEnv)(t),s=(0,l.getSession)(t),d=o.evaluateExtensionPoint("TrackSelector-multiTrackMenuItems",[],{session:s});return n.length?i.createElement(c(),{menuItems:[{label:"Clear",onClick:()=>t.clearSelection()},...d.map((e=>({...e,..."onClick"in e?{onClick:()=>e.onClick(t)}:{}})))]},i.createElement(r.A,{badgeContent:n.length,color:"primary"},i.createElement(a.A,null))):null}))},72387:(e,t,n)=>{n.d(t,{A:()=>h});var i=n(65043),r=n(70276),o=n(91775),l=n(16615),a=n.n(l),s=n(4055),c=n(68620),d=n(97412);const u=(0,r.makeStyles)()({cascadingStyle:{padding:0}}),h=function(e){let{id:t,trackId:n,stopPropagation:r,model:l,setOpen:h,conf:f}=e;var m,p;const{classes:g}=u();return i.createElement(a(),{className:g.cascadingStyle,stopPropagation:r,setOpen:h,"data-testid":"htsTrackEntryMenu-".concat(t),menuItems:[...(null===(p=(m=(0,o.getSession)(l)).getTrackActionMenuItems)||void 0===p?void 0:p.call(m,f))||[],l.isFavorite(n)?{label:"Remove from favorites",onClick:()=>l.removeFromFavorites(n),icon:c.A}:{label:"Add to favorites",onClick:()=>l.addToFavorites(n),icon:d.A},{label:"Add to selection",onClick:()=>l.addToSelection([f])},...l.isSelected(f)?[{label:"Remove from selection",onClick:()=>l.removeFromSelection([f])}]:[]]},i.createElement(s.A,null))}},10155:(e,t,n)=>{var i=n(24994);t.A=void 0;var r=i(n(40039)),o=n(70579);t.A=(0,r.default)((0,o.jsx)("path",{d:"M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"}),"Clear")},58729:(e,t,n)=>{var i=n(24994);t.A=void 0;var r=i(n(40039)),o=n(70579);t.A=(0,r.default)((0,o.jsx)("path",{d:"M12 17.27 18.18 21l-1.64-7.03L22 9.24l-7.19-.61L12 2 9.19 8.63 2 9.24l5.46 4.73L5.82 21z"}),"Grade")},61958:(e,t,n)=>{var i=n(24994);t.A=void 0;var r=i(n(40039)),o=n(70579);t.A=(0,r.default)((0,o.jsx)("path",{d:"M13 3c-4.97 0-9 4.03-9 9H1l3.89 3.89.07.14L9 12H6c0-3.87 3.13-7 7-7s7 3.13 7 7-3.13 7-7 7c-1.93 0-3.68-.79-4.94-2.06l-1.42 1.42C8.27 19.99 10.51 21 13 21c4.97 0 9-4.03 9-9s-4.03-9-9-9m-1 5v5l4.28 2.54.72-1.21-3.5-2.08V8z"}),"History")},4055:(e,t,n)=>{var i=n(24994);t.A=void 0;var r=i(n(40039)),o=n(70579);t.A=(0,r.default)((0,o.jsx)("path",{d:"M6 10c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2m12 0c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2m-6 0c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2"}),"MoreHoriz")},61334:(e,t,n)=>{var i=n(24994);t.A=void 0;var r=i(n(40039)),o=n(70579);t.A=(0,r.default)((0,o.jsx)("path",{d:"M7 18c-1.1 0-1.99.9-1.99 2S5.9 22 7 22s2-.9 2-2-.9-2-2-2M1 2v2h2l3.6 7.59-1.35 2.45c-.16.28-.25.61-.25.96 0 1.1.9 2 2 2h12v-2H7.42c-.14 0-.25-.11-.25-.25l.03-.12.9-1.63h7.45c.75 0 1.41-.41 1.75-1.03l3.58-6.49c.08-.14.12-.31.12-.48 0-.55-.45-1-1-1H5.21l-.94-2zm16 16c-1.1 0-1.99.9-1.99 2s.89 2 1.99 2 2-.9 2-2-.9-2-2-2"}),"ShoppingCart")},97412:(e,t,n)=>{var i=n(24994);t.A=void 0;var r=i(n(40039)),o=n(70579);t.A=(0,r.default)((0,o.jsx)("path",{d:"M12 17.27 18.18 21l-1.64-7.03L22 9.24l-7.19-.61L12 2 9.19 8.63 2 9.24l5.46 4.73L5.82 21z"}),"Star")},68620:(e,t,n)=>{var i=n(24994);t.A=void 0;var r=i(n(40039)),o=n(70579);t.A=(0,r.default)((0,o.jsx)("path",{d:"m22 9.24-7.19-.62L12 2 9.19 8.63 2 9.24l5.46 4.73L5.82 21 12 17.27 18.18 21l-1.63-7.03zM12 15.4l-3.76 2.27 1-4.28-3.32-2.88 4.38-.38L12 6.1l1.71 4.04 4.38.38-3.32 2.88 1 4.28z"}),"StarBorderOutlined")}}]);
//# sourceMappingURL=3709.581f2adc.chunk.js.map