"use strict";(self.webpackChunkfrontend=self.webpackChunkfrontend||[]).push([[8262],{58262:(e,t,n)=>{n.r(t),n.d(t,{default:()=>L});var l=n(65043),r=n(96233),a=n(65204),i=n(49379),o=n(70059),s=n(94496),c=n(42788),d=n(99784),u=n(1273),m=n(17230),f=n(12722),p=n(91775),v=n(81160),h=n.n(v),E=n(55253);function g(e){let{columns:t,filter:n,setFilter:r}=e;return l.createElement(l.Fragment,null,l.createElement(s.A,null,"These filters can use a plain text search or regex style query, e.g. in the genotype field, entering 1 will query for all genotypes that include the first alternate allele e.g. 0|1 or 1|1, entering [1-9]\\d* will find any non-zero allele e.g. 0|2 or 2/33"),t.map((e=>{let{field:t}=e;return l.createElement(c.A,{key:"filter-".concat(t),placeholder:"Filter ".concat(t),value:n[t]||"",onChange:e=>r({...n,[t]:e.target.value})})})))}function w(e){var t;const{feature:n,descriptions:r={}}=e,{ref:a,scrollLeft:o}=(0,E.useResizeBar)(),[c,v]=(0,l.useState)({}),w=n.samples||{},S=Object.entries(w);let b,y=[];const A=Object.keys(c);try{y=S.map((e=>({...Object.fromEntries(Object.entries(e[1]).map((e=>[e[0],"".concat(e[1])]))),sample:e[0],id:e[0]}))).filter((e=>!A.length||A.every((t=>{const n=c[t];return!n||e[t].match(new RegExp(n,"i"))}))))}catch(L){b=L}const k=["sample",...Object.keys((null===(t=S[0])||void 0===t?void 0:t[1])||{})],[O,C]=(0,l.useState)(!1),[N,F]=(0,l.useState)(k.map((e=>(0,p.measureGridWidth)(y.map((t=>t[e])))))),T=k.map(((e,t)=>{var n,l;return{field:e,description:null===(l=null===(n=null===r||void 0===r?void 0:r.FORMAT)||void 0===n?void 0:n[e])||void 0===l?void 0:l.Description,width:N[t]}}));return S.length?l.createElement(i.BaseCard,{...e,title:"Samples"},b?l.createElement(s.A,{color:"error"},"".concat(b)):null,l.createElement(d.A,{control:l.createElement(u.A,{checked:O,onChange:e=>C(e.target.checked)}),label:l.createElement(s.A,{variant:"body2"},"Show options")}),O?l.createElement(g,{setFilter:v,columns:T,filter:c}):null,l.createElement("div",{ref:a},l.createElement(h(),{widths:N,setWidths:F,scrollLeft:o}),l.createElement(m.zh,{rows:y,hideFooter:y.length<100,columns:T,disableRowSelectionOnClick:!0,rowHeight:25,columnHeaderHeight:35,disableColumnMenu:!0,slots:{toolbar:O?f.O:null},slotProps:{toolbar:{printOptions:{disableToolbarButton:!0}}}}))):null}var S=n(91598);const b=(0,l.lazy)((()=>n.e(52).then(n.bind(n,80052))));function y(e){let{locStrings:t,model:n}=e;const r=(0,p.getSession)(n);return l.createElement("div",null,l.createElement(s.A,null,"Link to linear view of breakend endpoints"),l.createElement("ul",null,t.map(((e,t)=>l.createElement("li",{key:"".concat(e,"-").concat(t)},l.createElement(S.A,{href:"#",onClick:t=>{var l;t.preventDefault();const{view:a}=n;try{if(!a)throw new Error("No view associated with this feature detail panel anymore");null===(l=a.navToLocString)||void 0===l||l.call(a,e)}catch(i){console.error(i),r.notify("".concat(i))}}},"LGV - ".concat(e)))))))}function A(e){let{locStrings:t,model:n,feature:r,viewType:a}=e;const i=(0,p.getSession)(n),o=new p.SimpleFeature(r);return l.createElement("div",null,l.createElement(s.A,null,"Launch split views with breakend source and target"),l.createElement("ul",null,t.map((e=>l.createElement("li",{key:"".concat(JSON.stringify(e))},l.createElement(S.A,{href:"#",onClick:e=>{e.preventDefault(),i.queueDialog((e=>[b,{handleClose:e,model:n,feature:o,viewType:a}]))}},"".concat(r.refName,":").concat(r.start," // ").concat(e," (split view)")))))))}function k(e){const{model:t,locStrings:n,feature:r}=e,a=(0,p.getSession)(t),{pluginManager:o}=(0,p.getEnv)(a);let s;try{s=o.getViewType("BreakpointSplitView")}catch(c){}return l.createElement(i.BaseCard,{...e,title:"Breakends"},l.createElement(y,{model:t,locStrings:n}),s?l.createElement(A,{viewType:s,model:t,locStrings:n,feature:r}):null)}function O(e){let{rows:t,columns:n}=e;const{ref:r,scrollLeft:a}=(0,E.useResizeBar)(),[i,o]=(0,l.useState)(!1),[c,v]=(0,l.useState)(n.map((e=>(0,p.measureGridWidth)(t.map((t=>t[e.field]))))));return t.length?l.createElement("div",{ref:r},l.createElement(d.A,{control:l.createElement(u.A,{checked:i,onChange:e=>o(e.target.checked)}),label:l.createElement(s.A,{variant:"body2"},"Show options")}),l.createElement("div",{ref:r},l.createElement(h(),{widths:c,setWidths:v,scrollLeft:a}),l.createElement(m.zh,{rowHeight:25,rows:t,columns:n.map(((e,t)=>({...e,width:c[t]}))),slots:{toolbar:i?f.O:null}}))):null}function C(e){let{data:t,fields:n,title:r}=e;return t.length?l.createElement(i.BaseCard,{title:r},l.createElement(O,{rows:t.map(((e,t)=>({id:t,...Object.fromEntries(e.split("|").map(((e,t)=>[n[t],e])))})))||[],columns:n.map((e=>({field:e})))})):null}const N={CHROM:"chromosome: An identifier from the reference genome",POS:"position: The reference position, with the 1st base having position 1",ID:"identifier: Semi-colon separated list of unique identifiers where available",REF:"reference base(s): Each base must be one of A,C,G,T,N (case insensitive).",ALT:"alternate base(s): Comma-separated list of alternate non-reference alleles",QUAL:"quality: Phred-scaled quality score for the assertion made in ALT",FILTER:"filter status: PASS if this position has passed all filters, otherwise a semicolon-separated list of codes for filters that fail"};function F(e){let{descriptions:t,feature:n}=e;var r,a,i,o;const s=null===(a=null===(r=null===t||void 0===t?void 0:t.INFO)||void 0===r?void 0:r.ANN)||void 0===a?void 0:a.Description,c=(null===(i=null===s||void 0===s?void 0:s.match(/.*Functional annotations:'(.*)'$/))||void 0===i?void 0:i[1].split("|"))||[],d=(null===(o=n.INFO)||void 0===o?void 0:o.ANN)||[];return l.createElement(C,{fields:c,data:d,title:"Variant ANN field"})}function T(e){let{descriptions:t,feature:n}=e;var r,a,i,o;const s=null===(a=null===(r=null===t||void 0===t?void 0:t.INFO)||void 0===r?void 0:r.CSQ)||void 0===a?void 0:a.Description,c=(null===(i=null===s||void 0===s?void 0:s.match(/.*Format: (.*)/))||void 0===i?void 0:i[1].split("|"))||[],d=(null===(o=n.INFO)||void 0===o?void 0:o.CSQ)||[];return l.createElement(C,{fields:c,data:d,title:"Variant CSQ field"})}const L=(0,r.observer)((function(e){const{model:t}=e,{featureData:n,descriptions:r}=t,s=JSON.parse(JSON.stringify(n)),{samples:c,...d}=s;return l.createElement(a.A,{"data-testid":"variant-side-drawer"},l.createElement(i.FeatureDetails,{feature:d,descriptions:{...N,...r},...e}),l.createElement(T,{feature:d,descriptions:r}),l.createElement(F,{feature:d,descriptions:r}),"breakend"===s.type?l.createElement(k,{feature:s,locStrings:s.ALT.map((e=>{var t;return(null===(t=(0,o.h)(e))||void 0===t?void 0:t.MatePosition)||""})),model:t}):null,"translocation"===s.type?l.createElement(k,{feature:s,model:t,locStrings:["".concat(s.INFO.CHR2[0],":").concat(s.INFO.END)]}):null,l.createElement(w,{feature:s,...e,descriptions:r}))}))}}]);
//# sourceMappingURL=8262.b418c4c4.chunk.js.map